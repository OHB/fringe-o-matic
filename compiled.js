var Genetic=function(){function a(){this.crossover=this.mutate=this.seed=this.fitness=null;this.select1=function(a){this.internalGenState.rlr=this.internalGenState.rlr||0;return a[Math.floor(Math.random()*Math.min(a.length,this.internalGenState.rlr++))].entity};this.select2=function(a){return[this.select1(a),this.select1(a)]};this.optimize=function(a,b){return a>=b};this.notification=this.generation=null;this.configuration={size:250,crossover:.9,mutation:.2,iterations:100,fittestAlwaysSurvives:!0,
maxResults:1,skip:0};this.userData={};this.internalGenState={};this.entities=[];this.start=function(){function a(a){return Math.random()<=e.configuration.mutation&&e.mutate?e.mutate(a):a}var b,e=this;for(b=0;b<this.configuration.size;++b)this.entities.push(this.seed());for(b=0;b<this.configuration.iterations;++b){this.internalGenState={};var g=this.entities.map(function(a){return{fitness:e.fitness(a),entity:a}}).sort(function(a,b){return e.optimize(a.fitness,b.fitness)?-1:1}),c={maximum:g[0].fitness,
minimum:g[g.length-1].fitness},k=this.generation?this.generation(g.slice(0,this.configuration.maxResults),b,c):!0;k="undefined"!==typeof k&&!k||b===this.configuration.iterations-1;this.notification&&(k||0===this.configuration.skip||0==b%this.configuration.skip)&&this.sendNotification(g.slice(0,this.configuration.maxResults),b,c,k);if(k)break;c=[];for(this.configuration.fittestAlwaysSurvives&&c.push(g[0].entity);c.length<e.configuration.size;)this.crossover&&Math.random()<=this.configuration.crossover&&
c.length+1<e.configuration.size?(k=this.select2(g),k=this.crossover(k[0],k[1]).map(a),c.push(k[0],k[1])):c.push(a(e.select1(g)));this.entities=c}};this.sendNotification=function(a,b,e,c){postMessage({best:a[0],generation:b,stats:e,isFinished:c})}}var b={stringify:function(a){return JSON.stringify(a,function(a,b){return b instanceof Function||"function"===typeof b?"__func__:"+b.toString():b instanceof RegExp?"__regex__:"+b:b})},parse:function(a){return JSON.parse(a,function(a,b){return"string"!==typeof b?
b:0===b.lastIndexOf("__func__:",0)?eval("("+b.slice(9)+")"):0===b.lastIndexOf("__regex__:",0)?eval("("+b.slice(10)+")"):b})}},c=function(a){return null===a||"object"!==typeof a?a:JSON.parse(JSON.stringify(a))};a.prototype.evolve=function(a,f){for(var e in a)this.configuration[e]=a[e];for(e in f)this.userData[e]=f[e];e="var Serialization = {'stringify': "+b.stringify.toString()+", 'parse': "+b.parse.toString()+"};\n";e+="var Clone = "+c.toString()+";\n";e+='var genetic = Serialization.parse("'+b.stringify(this).replace(/[\\"']/g,
"\\$&").replace(/\u0000/g,"\\0")+'");\n';var g=this;e=new Blob([e+"onmessage = function(e) { genetic.start(); }\n"]);this.worker=new Worker(window.URL.createObjectURL(e));this.worker.onmessage=function(a){a=a.data;g.notification(a.best,a.generation,a.stats,a.isFinished)};this.worker.postMessage("")};a.prototype.stop=function(){this.worker.terminate()};return{create:function(){return new a},Clone:c}}();
!function(a,b){"object"==typeof exports?module.exports=b(require("angular")):"function"==typeof define&&define.amd?define(["angular"],b):b(a.angular)}(this,function(a){return a.module("ngMap",[]),function(){var b,c=function(c,f,e,g,h,k,m,n,l){b=k;var d=this,p=h.startSymbol(),q=h.endSymbol();d.mapOptions;d.mapEvents;d.eventListeners;d.addObject=function(a,b){if(d.map){d.map[a]=d.map[a]||{};var c=Object.keys(d.map[a]).length;d.map[a][b.id||c]=b;d.map instanceof google.maps.Map&&("infoWindows"!=a&&b.setMap&&
b.setMap&&b.setMap(d.map),b.centered&&b.position&&d.map.setCenter(b.position),"markers"==a&&d.objectChanged("markers"),"customMarkers"==a&&d.objectChanged("customMarkers"))}};d.deleteObject=function(a,b){if(b.map){var c=b.map[a],l;for(l in c)c[l]===b&&(google.maps.event.clearInstanceListeners(b),delete c[l]);b.map&&b.setMap&&b.setMap(null);"markers"==a&&d.objectChanged("markers");"customMarkers"==a&&d.objectChanged("customMarkers")}};d.observeAttrSetObj=function(a,d,c){if(d.noWatcher)return!1;a=b.getAttrsToObserve(a);
for(var l=0;l<a.length;l++){var e=a[l];d.$observe(e,m.observeAndSet(e,c))}};d.zoomToIncludeMarkers=function(){if(null!=d.map.markers&&0<Object.keys(d.map.markers).length||null!=d.map.customMarkers&&0<Object.keys(d.map.customMarkers).length){var a=new google.maps.LatLngBounds,b;for(b in d.map.markers)a.extend(d.map.markers[b].getPosition());for(var c in d.map.customMarkers)a.extend(d.map.customMarkers[c].getPosition());d.mapOptions.maximumZoom&&(d.enableMaximumZoomCheck=!0);d.map.fitBounds(a)}};d.objectChanged=
function(a){!d.map||"markers"!=a&&"customMarkers"!=a||"auto"!=d.map.zoomToIncludeMarkers||d.zoomToIncludeMarkers()};d.initializeMap=function(){var h=d.mapOptions,k=d.mapEvents,r=d.map;if(d.map=n.getMapInstance(f[0]),m.setStyle(f[0]),r){var B=b.filter(e),v=b.getOptions(B);B=b.getControlOptions(B);h=a.extend(v,B);for(var C in r)if(v=r[C],"object"==typeof v)for(var y in v)d.addObject(C,v[y]);d.map.showInfoWindow=d.showInfoWindow;d.map.hideInfoWindow=d.hideInfoWindow}h.zoom=h.zoom&&!isNaN(h.zoom)?+h.zoom:
15;r=h.center;C=new RegExp(l(p)+".*"+l(q));!h.center||"string"==typeof r&&r.match(C)?h.center=new google.maps.LatLng(0,0):"string"==typeof r&&r.match(/^[0-9.-]*,[0-9.-]*$/)?(C=parseFloat(r.split(",")[0]),r=parseFloat(r.split(",")[1]),h.center=new google.maps.LatLng(C,r)):r instanceof google.maps.LatLng||(r=h.center,delete h.center,m.getGeoLocation(r,h.geoLocationOptions).then(function(a){d.map.setCenter(a);(a=h.geoCallback)&&g(a)(c)},function(){h.geoFallbackCenter&&d.map.setCenter(h.geoFallbackCenter)}));
d.map.setOptions(h);for(var z in k)r=google.maps.event.addListener(d.map,z,k[z]),d.eventListeners[z]=r;d.observeAttrSetObj(t,e,d.map);d.singleInfoWindow=h.singleInfoWindow;google.maps.event.trigger(d.map,"resize");google.maps.event.addListenerOnce(d.map,"idle",function(){m.addMap(d);h.zoomToIncludeMarkers&&d.zoomToIncludeMarkers();c.map=d.map;c.$emit("mapInitialized",d.map);e.mapInitialized&&g(e.mapInitialized)(c,{map:d.map})});h.zoomToIncludeMarkers&&h.maximumZoom&&google.maps.event.addListener(d.map,
"zoom_changed",function(){1==d.enableMaximumZoomCheck&&(d.enableMaximumZoomCheck=!1,google.maps.event.addListenerOnce(d.map,"bounds_changed",function(){d.map.setZoom(Math.min(h.maximumZoom,d.map.getZoom()))}))})};c.google=google;var t=b.orgAttributes(f);k=b.filter(e);h=b.getOptions(k,{scope:c});var v=b.getControlOptions(k);v=a.extend(h,v);k=b.getEvents(c,k);(Object.keys(k).length&&void 0,d.mapOptions=v,d.mapEvents=k,d.eventListeners={},h.lazyInit)?(e.id&&0===e.id.indexOf(p,0)&&-1!==e.id.indexOf(q,
e.id.length-q.length)?(k=e.id.slice(2,-2),k=g(k)(c)):k=e.id,d.map={id:k},m.addMap(d)):d.initializeMap();h.triggerResize&&google.maps.event.trigger(d.map,"resize");f.bind("$destroy",function(){n.returnMapInstance(d.map);m.deleteMap(d)})};c.$inject="$scope $element $attrs $parse $interpolate Attr2MapOptions NgMap NgMapPool escapeRegexpFilter".split(" ");a.module("ngMap").controller("__MapController",c)}(),function(){var b,c=function(a,c,f,k){k=k[0]||k[1];var e=b.orgAttributes(c),g=b.filter(f),l=b.getOptions(g,
{scope:a});a=b.getEvents(a,g);var h=d(l,a);k.addObject("bicyclingLayers",h);k.observeAttrSetObj(e,f,h);c.bind("$destroy",function(){k.deleteObject("bicyclingLayers",h)})},d=function(a,b){var d=new google.maps.BicyclingLayer(a),c;for(c in b)google.maps.event.addListener(d,c,b[c]);return d},f=function(a){return b=a,{restrict:"E",require:["?^map","?^ngMap"],link:c}};f.$inject=["Attr2MapOptions"];a.module("ngMap").directive("bicyclingLayer",f)}(),function(){var b,c=function(a,d,c,h,k){h=h[0]||h[1];var f=
b.filter(c);c=b.getOptions(f,{scope:a});f=b.getEvents(a,f);var g=a.$new(),l=d[0].parentElement.removeChild(d[0]);k(g,function(a){d.empty();d.append(a);d.on("$destroy",function(){g.$destroy()})});for(var e in f)google.maps.event.addDomListener(l,e,f[e]);h.addObject("customControls",l);h.map.controls[google.maps.ControlPosition[c.position]].push(l);d.bind("$destroy",function(){h.deleteObject("customControls",l)})},d=function(a,d){return b=a,{restrict:"E",require:["?^map","?^ngMap"],link:c,transclude:!0}};
d.$inject=["Attr2MapOptions","NgMap"];a.module("ngMap").directive("customControl",d)}(),function(){var b,c,d,f,e=function(){for(var a=["transform","WebkitTransform","MozTransform","OTransform","msTransform"],b=document.createElement("div"),d=0;d<a.length;d++)if(b&&void 0!==b.style[a[d]])return a[d];return!1}(),g=function(a){a=a||{};this.el=document.createElement("div");this.el.style.display="block";this.el.style.visibility="hidden";this.visible=!0;for(var b in a)this[b]=a[b]},h=function(){g.prototype=
new google.maps.OverlayView;g.prototype.setContent=function(b,c){this.el.innerHTML=b;this.el.style.position="absolute";this.el.style.top=0;this.el.style.left=0;c&&d(a.element(this.el).contents())(c)};g.prototype.getDraggable=function(){return this.draggable};g.prototype.setDraggable=function(a){this.draggable=a};g.prototype.getPosition=function(){return this.position};g.prototype.setPosition=function(a){a&&(this.position=a);var b=this;this.getProjection()&&"function"==typeof this.position.lng&&(a=
function(){if(b.getProjection()){var a=b.getProjection().fromLatLngToDivPixel(b.position),d=Math.round(a.x-b.el.offsetWidth/2);a=Math.round(a.y-b.el.offsetHeight-10);e?b.el.style[e]="translate("+d+"px, "+a+"px)":(b.el.style.left=d+"px",b.el.style.top=a+"px");b.el.style.visibility="visible"}},b.el.offsetWidth&&b.el.offsetHeight?a():c(a,300))};g.prototype.setZIndex=function(a){void 0!==a&&(this.zIndex!==a&&(this.zIndex=a),this.el.style.zIndex!==this.zIndex&&(this.el.style.zIndex=this.zIndex))};g.prototype.getVisible=
function(){return this.visible};g.prototype.setVisible=function(a){"none"===this.el.style.display&&a?this.el.style.display="block":"none"===this.el.style.display||a||(this.el.style.display="none");this.visible=a};g.prototype.addClass=function(a){var b=this.el.className.trim().split(" ");-1==b.indexOf(a)&&b.push(a);this.el.className=b.join(" ")};g.prototype.removeClass=function(a){var b=this.el.className.split(" ");a=b.indexOf(a);-1<a&&b.splice(a,1);this.el.className=b.join(" ")};g.prototype.onAdd=
function(){this.getPanes().overlayMouseTarget.appendChild(this.el)};g.prototype.draw=function(){this.setPosition();this.setZIndex(this.zIndex);this.setVisible(this.visible)};g.prototype.onRemove=function(){this.el.parentNode.removeChild(this.el)}},k=function(a,d){return function(c,l,e,h){h=h[0]||h[1];var p=b.orgAttributes(l),m=b.filter(e),k=b.getOptions(m,{scope:c});m=b.getEvents(c,m);l[0].style.display="none";var q=new g(k);setTimeout(function(){c.$watch("["+d.join(",")+"]",function(){q.setContent(a,
c)},!0);q.setContent(l[0].innerHTML,c);var b=l[0].firstElementChild&&(l[0].firstElementChild.className||"");q["class"]&&(b+=" "+q["class"]);q.addClass("custom-marker");b&&q.addClass(b);k.position instanceof google.maps.LatLng||f.getGeoLocation(k.position).then(function(a){q.setPosition(a)})});for(var r in m)google.maps.event.addDomListener(q.el,r,m[r]);h.addObject("customMarkers",q);h.observeAttrSetObj(p,e,q);l.bind("$destroy",function(){h.deleteObject("customMarkers",q)})}},m=function(a,l,e,g,m,
t){b=g;c=a;d=l;f=m;var p=e.startSymbol(),q=e.endSymbol(),u=new RegExp(t(p)+"([^"+q.substring(0,1)+"]+)"+t(q),"g");return{restrict:"E",require:["?^map","?^ngMap"],compile:function(a){h();a[0].style.display="none";a=a.html();var b=[];return(a.match(u)||[]).forEach(function(a){var d=a.replace(p,"").replace(q,"");-1==a.indexOf("::")&&-1==a.indexOf("this.")&&-1==b.indexOf(d)&&b.push(a.replace(p,"").replace(q,""))}),k(a,b)}}};m.$inject="$timeout $compile $interpolate Attr2MapOptions NgMap escapeRegexpFilter".split(" ");
a.module("ngMap").directive("customMarker",m)}(),function(){var b,c,d,f,e,g=function(a,b){a.panel&&(a.panel=document.getElementById(a.panel)||document.querySelector(a.panel));var d=new google.maps.DirectionsRenderer(a),c;for(c in b)google.maps.event.addListener(d,c,b[c]);return d},h=function(a,b){var l=new google.maps.DirectionsService;b.travelMode=b.travelMode||"DRIVING";var g="origin destination travelMode transitOptions unitSystem durationInTraffic waypoints optimizeWaypoints provideRouteAlternatives avoidHighways avoidTolls region".split(" ");
if(b)for(var h in b)b.hasOwnProperty(h)&&-1===g.indexOf(h)&&delete b[h];b.waypoints&&(Array.isArray(b.waypoints)||delete b.waypoints);var m=function(b){if(f&&b)if(e)for(var d in b)b.hasOwnProperty(d)&&(e[d]=b[d]);else e=b;else f=c(function(){e||(e=b);l.route(e,function(b,d){d==google.maps.DirectionsStatus.OK&&(a.setDirections(b),e=void 0)});c.cancel(f);f=void 0},20)};b&&b.origin&&b.destination&&("current-location"==b.origin?d.getCurrentPosition().then(function(a){b.origin=new google.maps.LatLng(a.coords.latitude,
a.coords.longitude);m(b)}):"current-location"==b.destination?d.getCurrentPosition().then(function(a){b.destination=new google.maps.LatLng(a.coords.latitude,a.coords.longitude);m(b)}):m(b))},k=function(a,f,l,e){b=e;c=f;d=l;return{restrict:"E",require:["?^map","?^ngMap"],link:function(d,f,e,l){l=l[0]||l[1];var p=a.orgAttributes(f),k=a.filter(e),m=a.getOptions(k,{scope:d});d=a.getEvents(d,k);var q=a.getAttrsToObserve(p);q=[];k.noWatcher||(q=a.getAttrsToObserve(p));var r=g(m,d);l.addObject("directionsRenderers",
r);q.forEach(function(b){!function(b){e.$observe(b,function(d){if("panel"==b)c(function(){var a=document.getElementById(d)||document.querySelector(d);a&&r.setPanel(a)});else if(m[b]!==d){var f=a.toOptionValue(d,{key:b});m[b]=f;h(r,m)}})}(b)});b.getMap().then(function(){h(r,m)});f.bind("$destroy",function(){l.deleteObject("directionsRenderers",r)})}}};k.$inject=["Attr2MapOptions","$timeout","NavigatorGeolocation","NgMap"];a.module("ngMap").directive("directions",k)}(),function(){a.module("ngMap").directive("drawingManager",
["Attr2MapOptions",function(a){return{restrict:"E",require:["?^map","?^ngMap"],link:function(b,d,f,e){e=e[0]||e[1];var c=a.filter(f),h=a.getOptions(c,{scope:b}),k=a.getControlOptions(c);b=a.getEvents(b,c);var m=new google.maps.drawing.DrawingManager({drawingMode:h.drawingmode,drawingControl:h.drawingcontrol,drawingControlOptions:k.drawingControlOptions,circleOptions:h.circleoptions,markerOptions:h.markeroptions,polygonOptions:h.polygonoptions,polylineOptions:h.polylineoptions,rectangleOptions:h.rectangleoptions});
f.$observe("drawingControlOptions",function(b){m.drawingControlOptions=a.getControlOptions({drawingControlOptions:b}).drawingControlOptions;m.setDrawingMode(null);m.setMap(e.map)});for(var n in b)google.maps.event.addListener(m,n,b[n]);e.addObject("mapDrawingManager",m);d.bind("$destroy",function(){e.deleteObject("mapDrawingManager",m)})}}}])}(),function(){a.module("ngMap").directive("dynamicMapsEngineLayer",["Attr2MapOptions",function(a){return{restrict:"E",require:["?^map","?^ngMap"],link:function(b,
d,f,e){e=e[0]||e[1];f=a.filter(f);d=a.getOptions(f,{scope:b});var c=a.getEvents(b,f,c);b=c;c=new google.maps.visualization.DynamicMapsEngineLayer(d);for(var h in b)google.maps.event.addListener(c,h,b[h]);e.addObject("mapsEngineLayers",c)}}}])}(),function(){a.module("ngMap").directive("fusionTablesLayer",["Attr2MapOptions",function(a){var b=function(a,b){var d=new google.maps.FusionTablesLayer(a),c;for(c in b)google.maps.event.addListener(d,c,b[c]);return d};return{restrict:"E",require:["?^map","?^ngMap"],
link:function(d,c,e,g){g=g[0]||g[1];e=a.filter(e);var f=a.getOptions(e,{scope:d}),k=a.getEvents(d,e,k),m=b(f,k);g.addObject("fusionTablesLayers",m);c.bind("$destroy",function(){g.deleteObject("fusionTablesLayers",m)})}}}])}(),function(){a.module("ngMap").directive("heatmapLayer",["Attr2MapOptions","$window",function(a,c){return{restrict:"E",require:["?^map","?^ngMap"],link:function(b,f,e,g){function d(a,b){return a.split(".").reduce(function(a,b){return a[b]},b||this)}g=g[0]||g[1];f=a.filter(e);var k=
a.getOptions(f,{scope:b});if(k.data=c[e.data]||d(e.data,b),!(k.data instanceof Array))throw"invalid heatmap data";k.data=new google.maps.MVCArray(k.data);e=new google.maps.visualization.HeatmapLayer(k);a.getEvents(b,f);g.addObject("heatmapLayers",e)}}}])}(),function(){var b=function(b,d,f,e,g,h,k){var c=function(b,c,h){!b.position||b.position instanceof google.maps.LatLng||delete b.position;var l=new google.maps.InfoWindow(b);for(var k in c)k&&google.maps.event.addListener(l,k,c[k]);var m=f(function(b){a.isString(h)?
e(h).then(function(d){b(a.element(d).wrap("<div>").parent())},function(a){throw"info-window template request failed: "+a;}):b(h)}).then(function(b){b=b.html().trim();if(1!=a.element(b).length)throw"info-window working as a template must have a container";l.__template=b.replace(/\s?ng-non-bindable[='"]+/,"")});return l.__open=function(a,b,c){m.then(function(){g(function(){c&&(b.anchor=c);var f=d(l.__template)(b);l.setContent(f[0]);b.$apply();c&&c.getPosition?l.open(a,c):c&&c instanceof google.maps.LatLng?
(l.open(a),l.setPosition(c)):l.open(a);l.content.parentElement.parentElement.parentElement.className="ng-map-info-window"})})},l};return{restrict:"E",require:["?^map","?^ngMap"],link:function(a,d,f,e){e=e[0]||e[1];d.css("display","none");var l,g=b.orgAttributes(d),m=b.filter(f),p=b.getOptions(m,{scope:a});m=b.getEvents(a,m);var u=c(p,m,p.template||d);!p.position||p.position instanceof google.maps.LatLng||(l=p.position);l&&k.getGeoLocation(l).then(function(b){u.setPosition(b);u.__open(e.map,a,b);(b=
f.geoCallback)&&h(b)(a)});e.addObject("infoWindows",u);e.observeAttrSetObj(g,f,u);e.showInfoWindow=e.map.showInfoWindow=e.showInfoWindow||function(b,d,c){var f="string"==typeof b?b:d;b="string"==typeof b?d:c;if("string"==typeof b)if("undefined"!=typeof e.map.markers&&"undefined"!=typeof e.map.markers[b])b=e.map.markers[b];else{if("undefined"==typeof e.map.customMarkers||"undefined"==typeof e.map.customMarkers[b])throw Error("Cant open info window for id "+b+". Marker or CustomMarker is not defined");
b=e.map.customMarkers[b]}e.map.infoWindows[f].__open(e.map,a,b?b:this.getPosition?this:null);e.singleInfoWindow&&(e.lastInfoWindow&&a.hideInfoWindow(e.lastInfoWindow),e.lastInfoWindow=f)};e.hideInfoWindow=e.map.hideInfoWindow=e.hideInfoWindow||function(a,b){e.map.infoWindows["string"==typeof a?a:b].close()};a.showInfoWindow=e.map.showInfoWindow;a.hideInfoWindow=e.map.hideInfoWindow;k.getMap(u.mapId?{id:u.mapId}:0).then(function(b){(u.visible&&u.__open(b,a),u.visibleOnMarker)&&u.__open(b,a,b.markers[u.visibleOnMarker])})}}};
b.$inject="Attr2MapOptions $compile $q $templateRequest $timeout $parse NgMap".split(" ");a.module("ngMap").directive("infoWindow",b)}(),function(){a.module("ngMap").directive("kmlLayer",["Attr2MapOptions",function(a){var b=function(a,b){var d=new google.maps.KmlLayer(a),c;for(c in b)google.maps.event.addListener(d,c,b[c]);return d};return{restrict:"E",require:["?^map","?^ngMap"],link:function(d,c,e,g){g=g[0]||g[1];var f=a.orgAttributes(c),k=a.filter(e),m=a.getOptions(k,{scope:d});d=a.getEvents(d,
k);var n=b(m,d);g.addObject("kmlLayers",n);g.observeAttrSetObj(f,e,n);c.bind("$destroy",function(){g.deleteObject("kmlLayers",n)})}}}])}(),function(){a.module("ngMap").directive("mapData",["Attr2MapOptions","NgMap",function(a,c){return{restrict:"E",require:["?^map","?^ngMap"],link:function(b,f,e,g){g=g[0]||g[1];f=a.filter(e);var d=a.getOptions(f,{scope:b}),k=a.getEvents(b,f,k);c.getMap(g.map.id).then(function(a){for(var c in d){var e=d[c];"function"==typeof b[e]?a.data[c](b[e]):a.data[c](e)}for(var f in k)a.data.addListener(f,
k[f])})}}}])}(),function(){var b,c,d=[],f=[],e=function(a,e,g){g=g.mapLazyLoadParams||g.mapLazyLoad;void 0===window.google||void 0===window.google.maps?(f.push({scope:a,element:e,savedHtml:d[f.length]}),window.lazyLoadCallback=function(){b(function(){f.forEach(function(a){a.element.html(a.savedHtml);c(a.element.contents())(a.scope)})},100)},a=document.createElement("script"),a.src=g+(-1<g.indexOf("?")?"&":"?")+"callback=lazyLoadCallback",document.querySelector('script[src="'+a.src+'"]')||document.body.appendChild(a)):
(e.html(d),c(e.contents())(a))},g=function(a,b){return!b.mapLazyLoad&&void 0,d.push(a.html()),void 0!==window.google&&void 0!==window.google.maps?!1:(a.html(""),{pre:e})},h=function(a,d){return c=a,b=d,{compile:g}};h.$inject=["$compile","$timeout"];a.module("ngMap").directive("mapLazyLoad",h)}(),function(){a.module("ngMap").directive("mapType",["$parse","NgMap",function(a,c){return{restrict:"E",require:["?^map","?^ngMap"],link:function(b,f,e,g){g=g[0]||g[1];var d,k=e.name;if(!k)throw"invalid map-type name";
if(d=a(e.object)(b),!d)throw"invalid map-type object";c.getMap().then(function(a){a.mapTypes.set(k,d)});g.addObject("mapTypes",d)}}}])}(),function(){var b=function(){return{restrict:"AE",controller:"__MapController",controllerAs:"ngmap"}};a.module("ngMap").directive("map",[b]);a.module("ngMap").directive("ngMap",[b])}(),function(){a.module("ngMap").directive("mapsEngineLayer",["Attr2MapOptions",function(a){return{restrict:"E",require:["?^map","?^ngMap"],link:function(b,d,f,e){e=e[0]||e[1];f=a.filter(f);
d=a.getOptions(f,{scope:b});var c=a.getEvents(b,f,c);b=c;c=new google.maps.visualization.MapsEngineLayer(d);for(var h in b)google.maps.event.addListener(c,h,b[h]);e.addObject("mapsEngineLayers",c)}}}])}(),function(){var b,c,d,f=function(a,b){if(d.defaultOptions.marker)for(c in d.defaultOptions.marker)"undefined"==typeof a[c]&&(a[c]=d.defaultOptions.marker[c]);a.position instanceof google.maps.LatLng||(a.position=new google.maps.LatLng(0,0));var c=new google.maps.Marker(a);0<Object.keys(b).length;
for(var e in b)e&&google.maps.event.addListener(c,e,b[e]);return c},e=function(a,e,g,n){n=n[0]||n[1];var l,h=b.orgAttributes(e),k=b.filter(g),q=b.getOptions(k,a,{scope:a});k=b.getEvents(a,k);q.position instanceof google.maps.LatLng||(l=q.position);var m=f(q,k);n.addObject("markers",m);l&&d.getGeoLocation(l).then(function(b){m.setPosition(b);q.centered&&m.map.setCenter(b);(b=g.geoCallback)&&c(b)(a)});n.observeAttrSetObj(h,g,m);e.bind("$destroy",function(){n.deleteObject("markers",m)})},g=function(a,
f,g){return b=a,c=f,d=g,{restrict:"E",require:["^?map","?^ngMap"],link:e}};g.$inject=["Attr2MapOptions","$parse","NgMap"];a.module("ngMap").directive("marker",g)}(),function(){a.module("ngMap").directive("overlayMapType",["NgMap",function(a){return{restrict:"E",require:["?^map","?^ngMap"],link:function(b,d,f,e){e=e[0]||e[1];var c=f.initMethod||"insertAt",h=b[f.object];a.getMap().then(function(a){if("insertAt"==c){var b=parseInt(f.index,10);a.overlayMapTypes.insertAt(b,h)}else"push"==c&&a.overlayMapTypes.push(h)});
e.addObject("overlayMapTypes",h)}}}])}(),function(){var b=function(a,b){return{restrict:"A",require:"?ngModel",link:function(d,c,g,h){if("false"===g.placesAutoComplete)return!1;var e=a.filter(g),f=a.getOptions(e,{scope:d});e=a.getEvents(d,e);var n=new google.maps.places.Autocomplete(c[0],f);n.setOptions({strictBounds:!0===f.strictBounds});for(var l in e)google.maps.event.addListener(n,l,e[l]);f=function(){b(function(){h&&h.$setViewValue(c.val())},100)};google.maps.event.addListener(n,"place_changed",
f);c[0].addEventListener("change",f);g.$observe("rectBounds",function(b){b&&(b=a.toOptionValue(b,{key:"rectBounds"}),n.setBounds(new google.maps.LatLngBounds(new google.maps.LatLng(b.south_west.lat,b.south_west.lng),new google.maps.LatLng(b.north_east.lat,b.north_east.lng))))});g.$observe("circleBounds",function(b){b&&(b=a.toOptionValue(b,{key:"circleBounds"}),b=new google.maps.Circle(b),n.setBounds(b.getBounds()))});g.$observe("types",function(b){b&&(b=a.toOptionValue(b,{key:"types"}),n.setTypes(b))});
g.$observe("componentRestrictions",function(a){a&&n.setComponentRestrictions(d.$eval(a))})}}};b.$inject=["Attr2MapOptions","$timeout"];a.module("ngMap").directive("placesAutoComplete",b)}(),function(){var b=function(a,b){var d=a.name;switch(delete a.name,d){case "circle":a.center instanceof google.maps.LatLng||(a.center=new google.maps.LatLng(0,0));var c=new google.maps.Circle(a);break;case "polygon":c=new google.maps.Polygon(a);break;case "polyline":c=new google.maps.Polyline(a);break;case "rectangle":c=
new google.maps.Rectangle(a);break;case "groundOverlay":case "image":c=new google.maps.GroundOverlay(a.url,a.bounds,{opacity:a.opacity,clickable:a.clickable,id:a.id})}for(var f in b)b[f]&&google.maps.event.addListener(c,f,b[f]);return c},c=function(a,c,e){return{restrict:"E",require:["?^map","?^ngMap"],link:function(d,f,k,m){m=m[0]||m[1];var g,l=a.orgAttributes(f);var h=a.filter(k);var p=a.getOptions(h,{scope:d}),q=a.getEvents(d,h);h=p.name;p.center instanceof google.maps.LatLng||(g=p.center);var t=
b(p,q);m.addObject("shapes",t);g&&"circle"==h&&e.getGeoLocation(g).then(function(a){t.setCenter(a);t.centered&&t.map.setCenter(a);(a=k.geoCallback)&&c(a)(d)});m.observeAttrSetObj(l,k,t);f.bind("$destroy",function(){m.deleteObject("shapes",t)})}}};c.$inject=["Attr2MapOptions","$parse","NgMap"];a.module("ngMap").directive("shape",c)}(),function(){var b=function(b,d){var c=function(a,b,d){var c,e;b.container&&(e=document.getElementById(b.container),e=e||document.querySelector(b.container));e?c=new google.maps.StreetViewPanorama(e,
b):(c=a.getStreetView(),c.setOptions(b));for(var f in d)f&&google.maps.event.addListener(c,f,d[f]);return c};return{restrict:"E",require:["?^map","?^ngMap"],link:function(e,f,h){f=b.filter(h);h=b.getOptions(f,{scope:e});var g=b.getControlOptions(f),m=a.extend(h,g),n=b.getEvents(e,f);d.getMap().then(function(a){var b=c(a,m,n);a.setStreetView(b);!b.getPosition()&&b.setPosition(a.getCenter());google.maps.event.addListener(b,"position_changed",function(){b.getPosition()!==a.getCenter()&&a.setCenter(b.getPosition())});
var d=google.maps.event.addListener(a,"center_changed",function(){b.setPosition(a.getCenter());google.maps.event.removeListener(d)})})}}};b.$inject=["Attr2MapOptions","NgMap"];a.module("ngMap").directive("streetViewPanorama",b)}(),function(){a.module("ngMap").directive("trafficLayer",["Attr2MapOptions",function(a){var b=function(a,b){var d=new google.maps.TrafficLayer(a),c;for(c in b)google.maps.event.addListener(d,c,b[c]);return d};return{restrict:"E",require:["?^map","?^ngMap"],link:function(d,
c,e,g){g=g[0]||g[1];var f=a.orgAttributes(c),k=a.filter(e),m=a.getOptions(k,{scope:d});d=a.getEvents(d,k);var n=b(m,d);g.addObject("trafficLayers",n);g.observeAttrSetObj(f,e,n);c.bind("$destroy",function(){g.deleteObject("trafficLayers",n)})}}}])}(),function(){a.module("ngMap").directive("transitLayer",["Attr2MapOptions",function(a){var b=function(a,b){var c=new google.maps.TransitLayer(a),d;for(d in b)google.maps.event.addListener(c,d,b[d]);return c};return{restrict:"E",require:["?^map","?^ngMap"],
link:function(c,f,e,g){g=g[0]||g[1];var d=a.orgAttributes(f),k=a.filter(e),m=a.getOptions(k,{scope:c});c=a.getEvents(c,k);var n=b(m,c);g.addObject("transitLayers",n);g.observeAttrSetObj(d,e,n);f.bind("$destroy",function(){g.deleteObject("transitLayers",n)})}}}])}(),function(){var b=/([:\-_]+(.))/g,c=/^moz([A-Z])/;a.module("ngMap").filter("camelCase",function(){return function(a){return a.replace(b,function(a,b,c,d){return d?c.toUpperCase():c}).replace(c,"Moz$1")}})}(),function(){a.module("ngMap").filter("escapeRegexp",
function(){return function(a){return a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}})}(),function(){a.module("ngMap").filter("jsonize",function(){return function(a){try{return JSON.parse(a),a}catch(c){return a.replace(/([\$\w]+)\s*:/g,function(a,b){return'"'+b+'":'}).replace(/'([^']+)'/g,function(a,b){return'"'+b+'"'}).replace(/''/g,'""')}}})}(),function(){var b=/^(\d{4}\-\d\d\-\d\d([tT][\d:\.]*)?)([zZ]|([+\-])(\d\d):?(\d\d))?$/,c=function(a,c,e,g,h,k,m,n,l){var d=g.startSymbol(),f=g.endSymbol(),q=function(a){return a.match(/^[\+\-]?[0-9\.]+,[ ]* ?[\+\-]?[0-9\.]+$/)&&
(a="["+a+"]"),JSON.parse(n(a))},t=function(a){var b=a;if(a[0].constructor==Array)if(a[0][0].constructor==Array&&2==a[0][0].length||a[0][0].constructor==Object){for(var c=[],d=0;d<a.length;d++)b=a[d].map(function(a){return new google.maps.LatLng(a[0],a[1])}),c.push(b);b=c}else b=a.map(function(a){return new google.maps.LatLng(a[0],a[1])});else!isNaN(parseFloat(a[0]))&&isFinite(a[0])&&(b=new google.maps.LatLng(b[0],b[1]));return b},v=function(a,c){try{var e=getNumber(a)}catch(E){try{e=q(a),e instanceof
Array?e=e[0].constructor==Object?e:e[0]instanceof Array?e[0][0].constructor==Object?e:t(e):t(e):e===Object(e)&&(c.doNotConverStringToNumber=!0,e=w(e,c))}catch(D){if(a.match(/^[A-Z][a-zA-Z0-9]+\(.*\)$/))try{e=eval("new google.maps."+a)}catch(F){e=a}else if(a.match(/^([A-Z][a-zA-Z0-9]+)\.([A-Z]+)$/))try{var g=a.match(/^([A-Z][a-zA-Z0-9]+)\.([A-Z]+)$/);e=google.maps[g[1]][g[2]]}catch(F){e=a}else if(a.match(/^[A-Z]+$/))try{var h=c.key.charAt(0).toUpperCase()+c.key.slice(1);c.key.match(/temperatureUnit|windSpeedUnit|labelColor/)?
(h=h.replace(/s$/,""),e=google.maps.weather[h][a]):e=google.maps[h][a]}catch(F){e=a}else if(a.match(b))try{e=new Date(a)}catch(F){e=a}else if(a.match(new RegExp("^"+l(d)))&&c.scope)try{var k=a.replace(new RegExp(l(d)),"").replace(new RegExp(l(f),"g"),"");e=c.scope.$eval(k)}catch(F){e=a}else e=a}}if(("center"==c.key||"position"==c.key)&&e instanceof Array&&(e=new google.maps.LatLng(e[0],e[1])),"bounds"==c.key&&e instanceof Array&&(e=new google.maps.LatLngBounds(e[0],e[1])),"icons"==c.key&&e instanceof
Array)for(g=0;g<e.length;g++)h=e[g],h.icon.path.match(/^[A-Z_]+$/)&&(h.icon.path=google.maps.SymbolPath[h.icon.path]);if("icon"==c.key&&e instanceof Object){(""+e.path).match(/^[A-Z_]+$/)&&(e.path=google.maps.SymbolPath[e.path]);for(var p in e)g=e[p],"anchor"==p||"origin"==p||"labelOrigin"==p?e[p]=new google.maps.Point(g[0],g[1]):("size"==p||"scaledSize"==p)&&(e[p]=new google.maps.Size(g[0],g[1]))}return e},w=function(a,b){b=b||{};var c={},d;for(d in a)!a[d]&&0!==a[d]||d.match(/^on[A-Z]/)||d.match(/ControlOptions$/)||
(c[d]="string"!=typeof a[d]?a[d]:b.doNotConverStringToNumber&&a[d].match(/^[0-9]+$/)?a[d]:v(a[d],{key:d,scope:b.scope}));return c};return{filter:function(a){var b={},c;for(c in a)c.match(/^\$/)||c.match(/^ng[A-Z]/)||(b[c]=a[c]);return b},getOptions:w,getEvents:function(b,d){var e={},f=function(a){return"_"+a.toLowerCase()},l=function(d){d=d.match(/([^\(]+)\(([^\)]*)\)/);var e=d[1];d=d[2].replace(/event[ ,]*/,"");var f=a("["+d+"]");return function(a){var d=f(b),l=e.split(".").reduce(function(a,b){return a[b]},
b);l&&l.apply(this,[a].concat(d));c(function(){b.$apply()})}},g;for(g in d)if(d[g]&&g.match(/^on[A-Z]/)){var h=g.replace(/^on/,"");h=h.charAt(0).toLowerCase()+h.slice(1);h=h.replace(/([A-Z])/g,f);e[h]=new l(d[g])}return e},getControlOptions:function(a){var b={};if("object"!=typeof a)return!1;for(var c in a)if(a[c]&&c.match(/(.*)ControlOptions$/)){var d=a[c].replace(/'/g,'"');d=d.replace(/([^"]+)|("[^"]+")/g,function(a,b,c){return b?b.replace(/([a-zA-Z0-9]+?):/g,'"$1":'):c});try{var e=JSON.parse(d),
f;for(f in e)if(e[f]){var l=e[f];if("string"==typeof l?l=l.toUpperCase():"mapTypeIds"===f&&(l=l.map(function(a){return a.match(/^[A-Z]+$/)?google.maps.MapTypeId[a.toUpperCase()]:a})),"style"===f){var g=(c.charAt(0).toUpperCase()+c.slice(1)).replace(/Options$/,"")+"Style";e[f]=google.maps[g][l]}else e[f]="position"===f?google.maps.ControlPosition[l]:l}b[c]=e}catch(D){}}return b},toOptionValue:v,getAttrsToObserve:function(a){var b=[],c=new RegExp(l(d)+".*"+l(f),"g");if(!a.noWatcher)for(var e in a){var g=
a[e];g&&g.match(c)&&b.push(m(e))}return b},orgAttributes:function(a){0<a.length&&(a=a[0]);for(var b={},c=0;c<a.attributes.length;c++){var d=a.attributes[c];b[d.name]=d.value}return b}}};c.$inject="$parse $timeout $log $interpolate NavigatorGeolocation GeoCoder camelCaseFilter jsonizeFilter escapeRegexpFilter".split(" ");a.module("ngMap").service("Attr2MapOptions",c)}(),function(){var b,c=function(a){var c=b.defer();return(new google.maps.Geocoder).geocode(a,function(a,b){b==google.maps.GeocoderStatus.OK?
c.resolve(a):c.reject(b)}),c.promise},d=function(a){return b=a,{geocode:c}};d.$inject=["$q"];a.module("ngMap").service("GeoCoder",d)}(),function(){var b,c,d=function(a,d){return b=a,c=d,{load:function(a){var d=b.defer();if(void 0===window.google||void 0===window.google.maps){window.lazyLoadCallback=function(){c(function(){d.resolve(window.google)},100)};var e=document.createElement("script");e.src=a+(-1<a.indexOf("?")?"&":"?")+"callback=lazyLoadCallback";document.querySelector('script[src="'+e.src+
'"]')||document.body.appendChild(e)}else d.resolve(window.google);return d.promise}}};d.$inject=["$q","$timeout"];a.module("ngMap").service("GoogleMapsApi",d)}(),function(){var b,c=function(a){var c=b.defer();return navigator.geolocation?(void 0===a?a={timeout:5E3}:void 0===a.timeout&&(a.timeout=5E3),navigator.geolocation.getCurrentPosition(function(a){c.resolve(a)},function(a){c.reject(a)},a)):c.reject("Browser Geolocation service failed."),c.promise},d=function(a){return b=a,{getCurrentPosition:c}};
d.$inject=["$q"];a.module("ngMap").service("NavigatorGeolocation",d)}(),function(){var b,c,d,f=[],e=function(a){var d=c.createElement("div");d.style.width="100%";d.style.height="100%";a.appendChild(d);a=new b.google.maps.Map(d,{});return f.push(a),a},g=function(a,b){for(var c,d=0;d<f.length;d++){var e=f[d];if(e.id==b&&!e.inUse){c=e.getDiv();a.appendChild(c);c=e;break}}return c},h=function(a){for(var b,c=0;c<f.length;c++){var d=f[c];if(!d.id&&!d.inUse){b=d.getDiv();a.appendChild(b);b=d;break}}return b},
k=function(a){var b=g(a,a.id)||h(a);return b?d(function(){google.maps.event.trigger(b,"idle")},100):b=e(a),b.inUse=!0,b},m=function(a){a.inUse=!1},n=function(){for(var a=0;a<f.length;a++)f[a]=null;f=[]},l=function(a){for(var b=0;b<f.length;b++)null!==f[b]&&f[b].id==a&&(f[b]=null,f.splice(b,1))},r=function(a,e,g){return c=a[0],b=e,d=g,{mapInstances:f,resetMapInstances:n,getMapInstance:k,returnMapInstance:m,deleteMapInstance:l}};r.$inject=["$document","$window","$timeout"];a.module("ngMap").factory("NgMapPool",
r)}(),function(){var b,c,d,f,e,g,h,k,m={},n=function(a,d){var e;return a.currentStyle?e=a.currentStyle[d]:b.getComputedStyle&&(e=c.defaultView.getComputedStyle(a,null).getPropertyValue(d)),e},l=function(a){a=m[a||0];return a.map instanceof google.maps.Map?void 0:(a.initializeMap(),a.map)},r=function(a,c){function e(c){var d=Object.keys(m);d=m[d[0]];a&&m[a]?f.resolve(m[a].map):!a&&d&&d.map?f.resolve(d.map):c>l?f.reject("could not find map"):b.setTimeout(function(){e(c+100)},100)}c=c||{};a="object"==
typeof a?a.id:a;var f=d.defer(),l=c.timeout||1E4;return e(0),f.promise},p=function(a){if(a.map){var b=Object.keys(m).length;m[a.map.id||b]=a}},q=function(a){var b=Object.keys(m).length-1;b=a.map.id||b;if(a.map){for(var c in a.eventListeners)google.maps.event.removeListener(a.eventListeners[c]);a.map.controls&&a.map.controls.forEach(function(a){a.clear()})}a.map.heatmapLayers&&Object.keys(a.map.heatmapLayers).forEach(function(b){a.deleteObject("heatmapLayers",a.map.heatmapLayers[b])});k.deleteMapInstance(b);
delete m[b]},t=function(a,b){var c=d.defer();return!a||a.match(/^current/i)?f.getCurrentPosition(b).then(function(a){a=new google.maps.LatLng(a.coords.latitude,a.coords.longitude);c.resolve(a)},function(a){c.reject(a)}):g.geocode({address:a}).then(function(a){c.resolve(a[0].geometry.location)},function(a){c.reject(a)}),c.promise},v=function(a,b){return function(c){if(c){var d=h("set-"+a);c=e.toOptionValue(c,{key:a});b[d]&&(a.match(/center|position/)&&"string"==typeof c?t(c).then(function(a){b[d](a)}):
b[d](c))}}},w=function(a){"true"==a.getAttribute("default-style")?(a.style.display="block",a.style.height="300px"):("block"!=n(a,"display")&&(a.style.display="block"),n(a,"height").match(/^(0|auto)/)&&(a.style.height="300px"))};a.module("ngMap").provider("NgMap",function(){var a={};this.setDefaultOptions=function(b){a=b};var m=function(m,n,u,x,z,E,D,F){return b=m,c=n[0],d=u,f=x,e=z,g=E,h=D,k=F,{defaultOptions:a,addMap:p,deleteMap:q,getMap:r,initMap:l,setStyle:w,getGeoLocation:t,observeAndSet:v}};
m.$inject="$window $document $q NavigatorGeolocation Attr2MapOptions GeoCoder camelCaseFilter NgMapPool".split(" ");this.$get=m})}(),function(){var b,c=function(a,c){c=c||a.getCenter();var d=b.defer();return(new google.maps.StreetViewService).getPanoramaByLocation(c||a.getCenter,100,function(a,b){b===google.maps.StreetViewStatus.OK?d.resolve(a.location.pano):d.resolve(!1)}),d.promise},d=function(a,b){(new google.maps.StreetViewPanorama(a.getDiv(),{enableCloseButton:!0})).setPano(b)},f=function(a){return b=
a,{getPanorama:c,setPanorama:d}};f.$inject=["$q"];a.module("ngMap").service("StreetView",f)}(),"ngMap"});angular.module("ui.bootstrap","ui.bootstrap.tpls ui.bootstrap.pager ui.bootstrap.paging ui.bootstrap.tabindex ui.bootstrap.pagination ui.bootstrap.modal ui.bootstrap.multiMap ui.bootstrap.stackedMap ui.bootstrap.position ui.bootstrap.progressbar".split(" "));angular.module("ui.bootstrap.tpls","uib/template/pager/pager.html uib/template/pagination/pagination.html uib/template/modal/window.html uib/template/progressbar/bar.html uib/template/progressbar/progress.html uib/template/progressbar/progressbar.html".split(" "));
angular.module("ui.bootstrap.pager",["ui.bootstrap.paging","ui.bootstrap.tabindex"]).controller("UibPagerController",["$scope","$attrs","uibPaging","uibPagerConfig",function(a,b,c,d){a.align=angular.isDefined(b.align)?a.$parent.$eval(b.align):d.align;c.create(this,a,b)}]).constant("uibPagerConfig",{itemsPerPage:10,previousText:"\u00ab Previous",nextText:"Next \u00bb",align:!0}).directive("uibPager",["uibPagerConfig",function(a){return{scope:{totalItems:"=",previousText:"@",nextText:"@",ngDisabled:"="},
require:["uibPager","?ngModel"],restrict:"A",controller:"UibPagerController",controllerAs:"pager",templateUrl:function(a,c){return c.templateUrl||"uib/template/pager/pager.html"},link:function(b,c,d,f){c.addClass("pager");b=f[0];(f=f[1])&&b.init(f,a)}}}]);
angular.module("ui.bootstrap.paging",[]).factory("uibPaging",["$parse",function(a){return{create:function(b,c,d){b.setNumPages=d.numPages?a(d.numPages).assign:angular.noop;b.ngModelCtrl={$setViewValue:angular.noop};b._watchers=[];b.init=function(a,e){b.ngModelCtrl=a;b.config=e;a.$render=function(){b.render()};d.itemsPerPage?b._watchers.push(c.$parent.$watch(d.itemsPerPage,function(a){b.itemsPerPage=parseInt(a,10);c.totalPages=b.calculateTotalPages();b.updatePage()})):b.itemsPerPage=e.itemsPerPage;
c.$watch("totalItems",function(a,d){(angular.isDefined(a)||a!==d)&&(c.totalPages=b.calculateTotalPages(),b.updatePage())})};b.calculateTotalPages=function(){return Math.max((1>b.itemsPerPage?1:Math.ceil(c.totalItems/b.itemsPerPage))||0,1)};b.render=function(){c.page=parseInt(b.ngModelCtrl.$viewValue,10)||1};c.selectPage=function(a,d){d&&d.preventDefault();!(c.ngDisabled&&d||c.page===a)&&0<a&&a<=c.totalPages&&(d&&d.target&&d.target.blur(),b.ngModelCtrl.$setViewValue(a),b.ngModelCtrl.$render())};c.getText=
function(a){return c[a+"Text"]||b.config[a+"Text"]};c.noPrevious=function(){return 1===c.page};c.noNext=function(){return c.page===c.totalPages};b.updatePage=function(){b.setNumPages(c.$parent,c.totalPages);c.page>c.totalPages?c.selectPage(c.totalPages):b.ngModelCtrl.$render()};c.$on("$destroy",function(){for(;b._watchers.length;)b._watchers.shift()()})}}}]);
angular.module("ui.bootstrap.tabindex",[]).directive("uibTabindexToggle",function(){return{restrict:"A",link:function(a,b,c){c.$observe("disabled",function(a){c.$set("tabindex",a?-1:null)})}}});
angular.module("ui.bootstrap.pagination",["ui.bootstrap.paging","ui.bootstrap.tabindex"]).controller("UibPaginationController",["$scope","$attrs","$parse","uibPaging","uibPaginationConfig",function(a,b,c,d,f){function e(a,b,c){return{number:a,text:b,active:c}}var g=this,h=angular.isDefined(b.maxSize)?a.$parent.$eval(b.maxSize):f.maxSize,k=angular.isDefined(b.rotate)?a.$parent.$eval(b.rotate):f.rotate,m=angular.isDefined(b.forceEllipses)?a.$parent.$eval(b.forceEllipses):f.forceEllipses,n=angular.isDefined(b.boundaryLinkNumbers)?
a.$parent.$eval(b.boundaryLinkNumbers):f.boundaryLinkNumbers,l=angular.isDefined(b.pageLabel)?function(c){return a.$parent.$eval(b.pageLabel,{$page:c})}:angular.identity;a.boundaryLinks=angular.isDefined(b.boundaryLinks)?a.$parent.$eval(b.boundaryLinks):f.boundaryLinks;a.directionLinks=angular.isDefined(b.directionLinks)?a.$parent.$eval(b.directionLinks):f.directionLinks;b.$set("role","menu");d.create(this,a,b);b.maxSize&&g._watchers.push(a.$parent.$watch(c(b.maxSize),function(a){h=parseInt(a,10);
g.render()}));var r=this.render;this.render=function(){r();if(0<a.page&&a.page<=a.totalPages){var b=a.page,c=a.totalPages,d=[],f=1,g=c,u=angular.isDefined(h)&&c>h;u&&(k?(f=Math.max(b-Math.floor(h/2),1),g=f+h-1,g>c&&(g=c,f=g-h+1)):(f=(Math.ceil(b/h)-1)*h+1,g=Math.min(f+h-1,c)));for(var x=f;g>=x;x++){var B=e(x,l(x),x===b);d.push(B)}if(u&&0<h&&(!k||m||n)){if(1<f){if(!n||3<f)b=e(f-1,"...",!1),d.unshift(b);n&&(3===f&&(f=e(2,"2",!1),d.unshift(f)),f=e(1,"1",!1),d.unshift(f))}if(c>g){if(!n||c-2>g)f=e(g+1,
"...",!1),d.push(f);n&&(g===c-2&&(g=e(c-1,c-1,!1),d.push(g)),c=e(c,c,!1),d.push(c))}}a.pages=d}}}]).constant("uibPaginationConfig",{itemsPerPage:10,boundaryLinks:!1,boundaryLinkNumbers:!1,directionLinks:!0,firstText:"First",previousText:"Previous",nextText:"Next",lastText:"Last",rotate:!0,forceEllipses:!1}).directive("uibPagination",["$parse","uibPaginationConfig",function(a,b){return{scope:{totalItems:"=",firstText:"@",previousText:"@",nextText:"@",lastText:"@",ngDisabled:"="},require:["uibPagination",
"?ngModel"],restrict:"A",controller:"UibPaginationController",controllerAs:"pagination",templateUrl:function(a,b){return b.templateUrl||"uib/template/pagination/pagination.html"},link:function(a,d,f,e){d.addClass("pagination");a=e[0];(e=e[1])&&a.init(e,b)}}}]);
angular.module("ui.bootstrap.modal",["ui.bootstrap.multiMap","ui.bootstrap.stackedMap","ui.bootstrap.position"]).provider("$uibResolve",function(){var a=this;this.resolver=null;this.setResolver=function(a){this.resolver=a};this.$get=["$injector","$q",function(b,c){var d=a.resolver?b.get(a.resolver):null;return{resolve:function(a,e,g,h){if(d)return d.resolve(a,e,g,h);var f=[];return angular.forEach(a,function(a){f.push(angular.isFunction(a)||angular.isArray(a)?c.resolve(b.invoke(a)):angular.isString(a)?
c.resolve(b.get(a)):c.resolve(a))}),c.all(f).then(function(b){var c={},d=0;return angular.forEach(a,function(a,e){c[e]=b[d++]}),c})}}}]}).directive("uibModalBackdrop",["$animate","$injector","$uibModalStack",function(a,b,c){function d(b,d,g){g.modalInClass&&(a.addClass(d,g.modalInClass),b.$on(c.NOW_CLOSING_EVENT,function(c,e){var f=e();b.modalOptions.animation?a.removeClass(d,g.modalInClass).then(f):f()}))}return{restrict:"A",compile:function(a,b){return a.addClass(b.backdropClass),d}}}]).directive("uibModalWindow",
["$uibModalStack","$q","$animateCss","$document",function(a,b,c,d){return{scope:{index:"@"},restrict:"A",transclude:!0,templateUrl:function(a,b){return b.templateUrl||"uib/template/modal/window.html"},link:function(f,e,g){e.addClass(g.windowTopClass||"");f.size=g.size;f.close=function(b){var c=a.getTop();c&&c.value.backdrop&&"static"!==c.value.backdrop&&b.target===b.currentTarget&&(b.preventDefault(),b.stopPropagation(),a.dismiss(c.key,"backdrop click"))};e.on("click",f.close);f.$isRendered=!0;var h=
b.defer();f.$$postDigest(function(){h.resolve()});h.promise.then(function(){var h=null;g.modalInClass&&(h=c(e,{addClass:g.modalInClass}).start(),f.$on(a.NOW_CLOSING_EVENT,function(a,b){var d=b();c(e,{removeClass:g.modalInClass}).start().then(d)}));b.when(h).then(function(){var b=a.getTop();(b&&a.modalRendered(b.key),d[0].activeElement&&e[0].contains(d[0].activeElement))||((b=e[0].querySelector("[autofocus]"))?b.focus():e[0].focus())})})}}}]).directive("uibModalAnimationClass",function(){return{compile:function(a,
b){b.modalAnimation&&a.addClass(b.uibModalAnimationClass)}}}).directive("uibModalTransclude",["$animate",function(a){return{link:function(b,c,d,f,e){e(b.$parent,function(b){c.empty();a.enter(b,c)})}}}]).factory("$uibModalStack",["$animate","$animateCss","$document","$compile","$rootScope","$q","$$multiMap","$$stackedMap","$uibPosition",function(a,b,c,d,f,e,g,h,k){function m(a){return a.replace(F,function(a,b){return(b?"-":"")+a.toLowerCase()})}function n(){for(var a=-1,b=A.keys(),c=0;c<b.length;c++)A.get(b[c]).value.backdrop&&
(a=c);return-1<a&&z>a&&(a=z),a}function l(a,b){var c=A.get(a).value,d=c.appendTo;A.remove(a);(E=A.top())&&(z=parseInt(E.value.modalDomEl.attr("index"),10));q(c.modalDomEl,c.modalScope,function(){var b=c.openedClass||B;C.remove(b,a);var e=C.hasKey(b);d.toggleClass(b,e);!e&&x&&x.heightOverflow&&x.scrollbarWidth&&(d.css(x.originalRight?{paddingRight:x.originalRight+"px"}:{paddingRight:""}),x=null);r(!0)},c.closedDeferred);p();b&&b.focus?b.focus():d.focus&&d.focus()}function r(a){var b;0<A.length()&&
(b=A.top().value,b.modalDomEl.toggleClass(b.windowTopClass||"",a))}function p(){w&&-1===n()&&(q(w,u,function(){}),u=w=void 0)}function q(b,c,d,f){function l(){l.done||(l.done=!0,a.leave(b).then(function(){d&&d();b.remove();f&&f.resolve()}),c.$destroy())}var g,h=null;return c.$broadcast(y.NOW_CLOSING_EVENT,function(){return g||(g=e.defer(),h=g.promise),function(){g.resolve()}}),e.when(h).then(l)}function t(a){if(a.isDefaultPrevented())return a;var b=A.top();if(b)switch(a.which){case 27:b.value.keyboard&&
(a.preventDefault(),f.$apply(function(){y.dismiss(b.key,"escape key press")}));break;case 9:var c=y.loadFocusElementList(b),d=!1;a.shiftKey?(y.isFocusInFirstItem(a,c)||y.isModalFocused(a,b))&&(d=y.focusLastFocusableElement(c)):y.isFocusInLastItem(a,c)&&(d=y.focusFirstFocusableElement(c));d&&(a.preventDefault(),a.stopPropagation())}}function v(){Array.prototype.forEach.call(document.querySelectorAll("["+D+"]"),function(a){var b=parseInt(a.getAttribute(D),10)-1;a.setAttribute(D,b);b||(a.removeAttribute(D),
a.removeAttribute("aria-hidden"))})}var w,u,x,B="modal-open",A=h.createNew(),C=g.createNew(),y={NOW_CLOSING_EVENT:"modal.stack.now-closing"},z=0,E=null,D="data-bootstrap-modal-aria-hidden-count",F=/[A-Z]/g;return f.$watch(n,function(a){u&&(u.index=a)}),c.on("keydown",t),f.$on("$destroy",function(){c.off("keydown",t)}),y.open=function(b,e){function l(a){function b(a){var b=a.parent()?a.parent().children():[];return Array.prototype.filter.call(b,function(b){return b!==a[0]})}if(a&&"BODY"!==a[0].tagName)return b(a).forEach(function(a){var b=
"true"===a.getAttribute("aria-hidden"),c=parseInt(a.getAttribute(D),10);c||(c=b?1:0);a.setAttribute(D,c+1);a.setAttribute("aria-hidden","true")}),l(a.parent())}var g=c[0].activeElement,h=e.openedClass||B;r(!1);E=A.top();A.add(b,{deferred:e.deferred,renderDeferred:e.renderDeferred,closedDeferred:e.closedDeferred,modalScope:e.scope,backdrop:e.backdrop,keyboard:e.keyboard,openedClass:e.openedClass,windowTopClass:e.windowTopClass,animation:e.animation,appendTo:e.appendTo});C.put(h,b);var q=e.appendTo,
p=n();0<=p&&!w&&(u=f.$new(!0),u.modalOptions=e,u.index=p,w=angular.element('<div uib-modal-backdrop="modal-backdrop"></div>'),w.attr({"class":"modal-backdrop","ng-style":"{'z-index': 1040 + (index && 1 || 0) + index*10}","uib-modal-animation-class":"fade","modal-in-class":"in"}),e.backdropClass&&w.addClass(e.backdropClass),e.animation&&w.attr("modal-animation","true"),d(w)(u),a.enter(w,q),k.isScrollable(q)&&(x=k.scrollbarPadding(q),x.heightOverflow&&x.scrollbarWidth&&q.css({paddingRight:x.right+"px"})));
var t;e.component?(t=document.createElement(m(e.component.name)),t=angular.element(t),t.attr({resolve:"$resolve","modal-instance":"$uibModalInstance",close:"$close($value)",dismiss:"$dismiss($value)"})):t=e.content;z=E?parseInt(E.value.modalDomEl.attr("index"),10)+1:0;p=angular.element('<div uib-modal-window="modal-window"></div>');p.attr({"class":"modal","template-url":e.windowTemplateUrl,"window-top-class":e.windowTopClass,role:"dialog","aria-labelledby":e.ariaLabelledBy,"aria-describedby":e.ariaDescribedBy,
size:e.size,index:z,animate:"animate","ng-style":"{'z-index': 1050 + $$topModalIndex*10, display: 'block'}",tabindex:-1,"uib-modal-animation-class":"fade","modal-in-class":"in"}).append(t);e.windowClass&&p.addClass(e.windowClass);e.animation&&p.attr("modal-animation","true");q.addClass(h);e.scope&&(e.scope.$$topModalIndex=z);a.enter(d(p)(e.scope),q);A.top().value.modalDomEl=p;A.top().value.modalOpener=g;l(p)},y.close=function(a,b){var c=A.get(a);return v(),c&&!c.value.modalScope.$broadcast("modal.closing",
b,!0).defaultPrevented?(c.value.modalScope.$$uibDestructionScheduled=!0,c.value.deferred.resolve(b),l(a,c.value.modalOpener),!0):!c},y.dismiss=function(a,b){var c=A.get(a);return v(),c&&!c.value.modalScope.$broadcast("modal.closing",b,!1).defaultPrevented?(c.value.modalScope.$$uibDestructionScheduled=!0,c.value.deferred.reject(b),l(a,c.value.modalOpener),!0):!c},y.dismissAll=function(a){for(var b=this.getTop();b&&this.dismiss(b.key,a);)b=this.getTop()},y.getTop=function(){return A.top()},y.modalRendered=
function(a){(a=A.get(a))&&a.value.renderDeferred.resolve()},y.focusFirstFocusableElement=function(a){return 0<a.length?(a[0].focus(),!0):!1},y.focusLastFocusableElement=function(a){return 0<a.length?(a[a.length-1].focus(),!0):!1},y.isModalFocused=function(a,b){if(a&&b){var c=b.value.modalDomEl;if(c&&c.length)return(a.target||a.srcElement)===c[0]}return!1},y.isFocusInFirstItem=function(a,b){return 0<b.length?(a.target||a.srcElement)===b[0]:!1},y.isFocusInLastItem=function(a,b){return 0<b.length?(a.target||
a.srcElement)===b[b.length-1]:!1},y.loadFocusElementList=function(a){if(a&&(a=a.value.modalDomEl)&&a.length)return(a=a[0].querySelectorAll("a[href], area[href], input:not([disabled]):not([tabindex='-1']), button:not([disabled]):not([tabindex='-1']),select:not([disabled]):not([tabindex='-1']), textarea:not([disabled]):not([tabindex='-1']), iframe, object, embed, *[tabindex]:not([tabindex='-1']), *[contenteditable=true]"))?Array.prototype.filter.call(a,function(a){return!!(a.offsetWidth||a.offsetHeight||
a.getClientRects().length)}):a},y}]).provider("$uibModal",function(){var a={options:{animation:!0,backdrop:!0,keyboard:!0},$get:["$rootScope","$q","$document","$templateRequest","$controller","$uibResolve","$uibModalStack",function(b,c,d,f,e,g,h){function k(a){return a.template?c.when(a.template):f(angular.isFunction(a.templateUrl)?a.templateUrl():a.templateUrl)}var m={},n=null;return m.getPromiseChain=function(){return n},m.open=function(f){function l(){return u}var p=c.defer(),q=c.defer(),m=c.defer(),
v=c.defer(),w={result:p.promise,opened:q.promise,closed:m.promise,rendered:v.promise,close:function(a){return h.close(w,a)},dismiss:function(a){return h.dismiss(w,a)}};if(f=angular.extend({},a.options,f),f.resolve=f.resolve||{},f.appendTo=f.appendTo||d.find("body").eq(0),!f.appendTo.length)throw Error("appendTo element not found. Make sure that the element passed is in DOM.");if(!f.component&&!f.template&&!f.templateUrl)throw Error("One of component or template or templateUrl options is required.");
var u=f.component?c.when(g.resolve(f.resolve,{},null,null)):c.all([k(f),g.resolve(f.resolve,{},null,null)]);var x;return x=n=c.all([n]).then(l,l).then(function(a){function c(b,c,d,e){b.$scope=g;b.$scope.$resolve={};d?b.$scope.$uibModalInstance=w:b.$uibModalInstance=w;angular.forEach(c?a[1]:a,function(a,c){e&&(b[c]=a);b.$scope.$resolve[c]=a})}var d=f.scope||b,g=d.$new();g.$close=w.close;g.$dismiss=w.dismiss;g.$on("$destroy",function(){g.$$uibDestructionScheduled||g.$dismiss("$uibUnscheduledDestruction")});
var l,k,r={scope:g,deferred:p,renderDeferred:v,closedDeferred:m,animation:f.animation,backdrop:f.backdrop,keyboard:f.keyboard,backdropClass:f.backdropClass,windowTopClass:f.windowTopClass,windowClass:f.windowClass,windowTemplateUrl:f.windowTemplateUrl,ariaLabelledBy:f.ariaLabelledBy,ariaDescribedBy:f.ariaDescribedBy,size:f.size,openedClass:f.openedClass,appendTo:f.appendTo},n={},t={};f.component?(c(n,!1,!0,!1),n.name=f.component,r.component=n):f.controller&&(c(t,!0,!1,!0),k=e(f.controller,t,!0,f.controllerAs),
f.controllerAs&&f.bindToController&&(l=k.instance,l.$close=g.$close,l.$dismiss=g.$dismiss,angular.extend(l,{$resolve:t.$scope.$resolve},d)),l=k(),angular.isFunction(l.$onInit)&&l.$onInit());f.component||(r.content=a[0]);h.open(w,r);q.resolve(!0)},function(a){q.reject(a);p.reject(a)})["finally"](function(){n===x&&(n=null)}),w},m}]};return a});
angular.module("ui.bootstrap.multiMap",[]).factory("$$multiMap",function(){return{createNew:function(){var a={};return{entries:function(){return Object.keys(a).map(function(b){return{key:b,value:a[b]}})},get:function(b){return a[b]},hasKey:function(b){return!!a[b]},keys:function(){return Object.keys(a)},put:function(b,c){a[b]||(a[b]=[]);a[b].push(c)},remove:function(b,c){var d=a[b];if(d){var f=d.indexOf(c);-1!==f&&d.splice(f,1);d.length||delete a[b]}}}}}});
angular.module("ui.bootstrap.stackedMap",[]).factory("$$stackedMap",function(){return{createNew:function(){var a=[];return{add:function(b,c){a.push({key:b,value:c})},get:function(b){for(var c=0;c<a.length;c++)if(b===a[c].key)return a[c]},keys:function(){for(var b=[],c=0;c<a.length;c++)b.push(a[c].key);return b},top:function(){return a[a.length-1]},remove:function(b){for(var c=-1,d=0;d<a.length;d++)if(b===a[d].key){c=d;break}return a.splice(c,1)[0]},removeTop:function(){return a.pop()},length:function(){return a.length}}}}});
angular.module("ui.bootstrap.position",[]).factory("$uibPosition",["$document","$window",function(a,b){var c,d,f=/(auto|scroll)/,e=/(auto|scroll|hidden)/,g=/\s?auto?\s?/i,h=/^(top|bottom|left|right)$/,k=/^(top|bottom|left|right|center)$/,m=/^(top|bottom)$/,n=/(HTML|BODY)/;return{getRawNode:function(a){return a.nodeName?a:a[0]||a},parseStyle:function(a){return a=parseFloat(a),isFinite(a)?a:0},offsetParent:function(c){c=this.getRawNode(c);for(c=c.offsetParent||a[0].documentElement;c&&c!==a[0].documentElement&&
"static"===(b.getComputedStyle(c).position||"static");)c=c.offsetParent;return c||a[0].documentElement},scrollbarWidth:function(e){if(e)return angular.isUndefined(d)&&(e=a.find("body"),e.addClass("uib-position-body-scrollbar-measure"),d=b.innerWidth-e[0].clientWidth,d=isFinite(d)?d:0,e.removeClass("uib-position-body-scrollbar-measure")),d;angular.isUndefined(c)&&(e=angular.element('<div class="uib-position-scrollbar-measure"></div>'),a.find("body").append(e),c=e[0].offsetWidth-e[0].clientWidth,c=
isFinite(c)?c:0,e.remove());return c},scrollbarPadding:function(a){a=this.getRawNode(a);var c=b.getComputedStyle(a),d=this.parseStyle(c.paddingRight);c=this.parseStyle(c.paddingBottom);a=this.scrollParent(a,!1,!0);var e=this.scrollbarWidth(n.test(a.tagName));return{scrollbarWidth:e,widthOverflow:a.scrollWidth>a.clientWidth,right:d+e,originalRight:d,heightOverflow:a.scrollHeight>a.clientHeight,bottom:c+e,originalBottom:c}},isScrollable:function(a,c){a=this.getRawNode(a);var d=c?e:f,g=b.getComputedStyle(a);
return d.test(g.overflow+g.overflowY+g.overflowX)},scrollParent:function(c,d,g){c=this.getRawNode(c);d=d?e:f;var h=a[0].documentElement,l=b.getComputedStyle(c);if(g&&d.test(l.overflow+l.overflowY+l.overflowX))return c;g="absolute"===l.position;c=c.parentElement||h;if(c===h||"fixed"===l.position)return h;for(;c.parentElement&&c!==h;){l=b.getComputedStyle(c);if(g&&"static"!==l.position&&(g=!1),!g&&d.test(l.overflow+l.overflowY+l.overflowX))break;c=c.parentElement}return c},position:function(c,d){c=
this.getRawNode(c);var e=this.offset(c);if(d){var f=b.getComputedStyle(c);e.top-=this.parseStyle(f.marginTop);e.left-=this.parseStyle(f.marginLeft)}f=this.offsetParent(c);var g={top:0,left:0};return f!==a[0].documentElement&&(g=this.offset(f),g.top+=f.clientTop-f.scrollTop,g.left+=f.clientLeft-f.scrollLeft),{width:Math.round(angular.isNumber(e.width)?e.width:c.offsetWidth),height:Math.round(angular.isNumber(e.height)?e.height:c.offsetHeight),top:Math.round(e.top-g.top),left:Math.round(e.left-g.left)}},
offset:function(c){c=this.getRawNode(c);var d=c.getBoundingClientRect();return{width:Math.round(angular.isNumber(d.width)?d.width:c.offsetWidth),height:Math.round(angular.isNumber(d.height)?d.height:c.offsetHeight),top:Math.round(d.top+(b.pageYOffset||a[0].documentElement.scrollTop)),left:Math.round(d.left+(b.pageXOffset||a[0].documentElement.scrollLeft))}},viewportOffset:function(c,d,e){c=this.getRawNode(c);e=!1!==e?!0:!1;var f=c.getBoundingClientRect(),g=0,h=0,l=d?a[0].documentElement:this.scrollParent(c);
c=l.getBoundingClientRect();if(g=c.top+l.clientTop,h=c.left+l.clientLeft,l===a[0].documentElement&&(g+=b.pageYOffset,h+=b.pageXOffset),c=g+l.clientHeight,d=h+l.clientWidth,e)e=b.getComputedStyle(l),g+=this.parseStyle(e.paddingTop),c-=this.parseStyle(e.paddingBottom),h+=this.parseStyle(e.paddingLeft),d-=this.parseStyle(e.paddingRight);return{top:Math.round(f.top-g),bottom:Math.round(c-f.bottom),left:Math.round(f.left-h),right:Math.round(d-f.right)}},parsePlacement:function(a){var b=g.test(a);return b&&
(a=a.replace(g,"")),a=a.split("-"),a[0]=a[0]||"top",h.test(a[0])||(a[0]="top"),a[1]=a[1]||"center",k.test(a[1])||(a[1]="center"),a[2]=b?!0:!1,a},positionElements:function(a,c,d,e){a=this.getRawNode(a);c=this.getRawNode(c);var f=angular.isDefined(c.offsetWidth)?c.offsetWidth:c.prop("offsetWidth"),g=angular.isDefined(c.offsetHeight)?c.offsetHeight:c.prop("offsetHeight");d=this.parsePlacement(d);var h=e?this.offset(a):this.position(a),k={top:0,left:0,placement:""};d[2]&&(a=this.viewportOffset(a,e),e=
b.getComputedStyle(c),c=f+Math.round(Math.abs(this.parseStyle(e.marginLeft)+this.parseStyle(e.marginRight))),e=g+Math.round(Math.abs(this.parseStyle(e.marginTop)+this.parseStyle(e.marginBottom))),d[0]="top"===d[0]&&e>a.top&&e<=a.bottom?"bottom":"bottom"===d[0]&&e>a.bottom&&e<=a.top?"top":"left"===d[0]&&c>a.left&&c<=a.right?"right":"right"===d[0]&&c>a.right&&c<=a.left?"left":d[0],d[1]="top"===d[1]&&e-h.height>a.bottom&&e-h.height<=a.top?"bottom":"bottom"===d[1]&&e-h.height>a.top&&e-h.height<=a.bottom?
"top":"left"===d[1]&&c-h.width>a.right&&c-h.width<=a.left?"right":"right"===d[1]&&c-h.width>a.left&&c-h.width<=a.right?"left":d[1],"center"===d[1])&&(m.test(d[0])?(e=h.width/2-f/2,0>a.left+e&&c-h.width<=a.right?d[1]="left":0>a.right+e&&c-h.width<=a.left&&(d[1]="right")):(c=h.height/2-e/2,0>a.top+c&&e-h.height<=a.bottom?d[1]="top":0>a.bottom+c&&e-h.height<=a.top&&(d[1]="bottom")));switch(d[0]){case "top":k.top=h.top-g;break;case "bottom":k.top=h.top+h.height;break;case "left":k.left=h.left-f;break;
case "right":k.left=h.left+h.width}switch(d[1]){case "top":k.top=h.top;break;case "bottom":k.top=h.top+h.height-g;break;case "left":k.left=h.left;break;case "right":k.left=h.left+h.width-f;break;case "center":m.test(d[0])?k.left=h.left+h.width/2-f/2:k.top=h.top+h.height/2-g/2}return k.top=Math.round(k.top),k.left=Math.round(k.left),k.placement="center"===d[1]?d[0]:d[0]+"-"+d[1],k},adjustTop:function(a,b,c,d){return-1!==a.indexOf("top")&&c!==d?{top:b.top-d+"px"}:void 0},positionArrow:function(a,c){a=
this.getRawNode(a);var d=a.querySelector(".tooltip-inner, .popover-inner");if(d){var e=angular.element(d).hasClass("tooltip-inner"),f=a.querySelector(e?".tooltip-arrow":".arrow");if(f){var g={top:"",bottom:"",left:"",right:""};if(c=this.parsePlacement(c),"center"===c[1])return void angular.element(f).css(g);var h="border-"+c[0]+"-width";h=b.getComputedStyle(f)[h];var k="border-"+(m.test(c[0])?c[0]+"-"+c[1]:c[1]+"-"+c[0]);k+="-radius";d=b.getComputedStyle(e?d:a)[k];switch(c[0]){case "top":g.bottom=
e?"0":"-"+h;break;case "bottom":g.top=e?"0":"-"+h;break;case "left":g.right=e?"0":"-"+h;break;case "right":g.left=e?"0":"-"+h}g[c[1]]=d;angular.element(f).css(g)}}}}}]);
angular.module("ui.bootstrap.progressbar",[]).constant("uibProgressConfig",{animate:!0,max:100}).controller("UibProgressController",["$scope","$attrs","uibProgressConfig",function(a,b,c){function d(){return angular.isDefined(a.maxParam)?a.maxParam:c.max}var f=this,e=angular.isDefined(b.animate)?a.$parent.$eval(b.animate):c.animate;this.bars=[];a.max=d();this.addBar=function(a,b,c){e||b.css({transition:"none"});this.bars.push(a);a.max=d();a.title=c&&angular.isDefined(c.title)?c.title:"progressbar";
a.$watch("value",function(){a.recalculatePercentage()});a.recalculatePercentage=function(){var b=f.bars.reduce(function(a,b){return b.percent=+(100*b.value/b.max).toFixed(2),a+b.percent},0);100<b&&(a.percent-=b-100)};a.$on("$destroy",function(){b=null;f.removeBar(a)})};this.removeBar=function(a){this.bars.splice(this.bars.indexOf(a),1);this.bars.forEach(function(a){a.recalculatePercentage()})};a.$watch("maxParam",function(){f.bars.forEach(function(a){a.max=d();a.recalculatePercentage()})})}]).directive("uibProgress",
function(){return{replace:!0,transclude:!0,controller:"UibProgressController",require:"uibProgress",scope:{maxParam:"=?max"},templateUrl:"uib/template/progressbar/progress.html"}}).directive("uibBar",function(){return{replace:!0,transclude:!0,require:"^uibProgress",scope:{value:"=",type:"@"},templateUrl:"uib/template/progressbar/bar.html",link:function(a,b,c,d){d.addBar(a,b,c)}}}).directive("uibProgressbar",function(){return{replace:!0,transclude:!0,controller:"UibProgressController",scope:{value:"=",
maxParam:"=?max",type:"@"},templateUrl:"uib/template/progressbar/progressbar.html",link:function(a,b,c,d){d.addBar(a,angular.element(b.children()[0]),{title:c.title})}}});angular.module("uib/template/pager/pager.html",[]).run(["$templateCache",function(a){a.put("uib/template/pager/pager.html",'<li ng-class="{disabled: noPrevious()||ngDisabled, previous: align}"><a href ng-click="selectPage(page - 1, $event)" ng-disabled="noPrevious()||ngDisabled" uib-tabindex-toggle>{{::getText(\'previous\')}}</a></li>\n<li ng-class="{disabled: noNext()||ngDisabled, next: align}"><a href ng-click="selectPage(page + 1, $event)" ng-disabled="noNext()||ngDisabled" uib-tabindex-toggle>{{::getText(\'next\')}}</a></li>\n')}]);
angular.module("uib/template/pagination/pagination.html",[]).run(["$templateCache",function(a){a.put("uib/template/pagination/pagination.html",'<li role="menuitem" ng-if="::boundaryLinks" ng-class="{disabled: noPrevious()||ngDisabled}" class="pagination-first"><a href ng-click="selectPage(1, $event)" ng-disabled="noPrevious()||ngDisabled" uib-tabindex-toggle>{{::getText(\'first\')}}</a></li>\n<li role="menuitem" ng-if="::directionLinks" ng-class="{disabled: noPrevious()||ngDisabled}" class="pagination-prev"><a href ng-click="selectPage(page - 1, $event)" ng-disabled="noPrevious()||ngDisabled" uib-tabindex-toggle>{{::getText(\'previous\')}}</a></li>\n<li role="menuitem" ng-repeat="page in pages track by $index" ng-class="{active: page.active,disabled: ngDisabled&&!page.active}" class="pagination-page"><a href ng-click="selectPage(page.number, $event)" ng-disabled="ngDisabled&&!page.active" uib-tabindex-toggle>{{page.text}}</a></li>\n<li role="menuitem" ng-if="::directionLinks" ng-class="{disabled: noNext()||ngDisabled}" class="pagination-next"><a href ng-click="selectPage(page + 1, $event)" ng-disabled="noNext()||ngDisabled" uib-tabindex-toggle>{{::getText(\'next\')}}</a></li>\n<li role="menuitem" ng-if="::boundaryLinks" ng-class="{disabled: noNext()||ngDisabled}" class="pagination-last"><a href ng-click="selectPage(totalPages, $event)" ng-disabled="noNext()||ngDisabled" uib-tabindex-toggle>{{::getText(\'last\')}}</a></li>\n')}]);
angular.module("uib/template/modal/window.html",[]).run(["$templateCache",function(a){a.put("uib/template/modal/window.html","<div class=\"modal-dialog {{size ? 'modal-' + size : ''}}\"><div class=\"modal-content\" uib-modal-transclude></div></div>\n")}]);angular.module("uib/template/progressbar/bar.html",[]).run(["$templateCache",function(a){a.put("uib/template/progressbar/bar.html",'<div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: (percent < 100 ? percent : 100) + \'%\'}" aria-valuetext="{{percent | number:0}}%" aria-labelledby="{{::title}}" ng-transclude></div>\n')}]);
angular.module("uib/template/progressbar/progress.html",[]).run(["$templateCache",function(a){a.put("uib/template/progressbar/progress.html",'<div class="progress" ng-transclude aria-labelledby="{{::title}}"></div>')}]);angular.module("uib/template/progressbar/progressbar.html",[]).run(["$templateCache",function(a){a.put("uib/template/progressbar/progressbar.html",'<div class="progress">\n  <div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: (percent < 100 ? percent : 100) + \'%\'}" aria-valuetext="{{percent | number:0}}%" aria-labelledby="{{::title}}" ng-transclude></div>\n</div>\n')}]);
angular.module("ui.bootstrap.position").run(function(){angular.$$csp().noInlineStyle||angular.$$uibPositionCss||angular.element(document).find("head").prepend('<style type="text/css">.uib-position-measure{display:block !important;visibility:hidden !important;position:absolute !important;top:-9999px !important;left:-9999px !important;}.uib-position-scrollbar-measure{position:absolute !important;top:-9999px !important;width:50px !important;height:50px !important;overflow:scroll !important;}.uib-position-body-scrollbar-measure{overflow:scroll !important;}</style>');
angular.$$uibPositionCss=!0});Array.prototype.chunk=function(a){for(var b=[],c=this.length/a,d=0,f=0;d<c;d++,f+=a)b[d]=this.slice(f,f+a);return b};Array.prototype.diff=function(a){return this.filter(function(b){return 0>a.indexOf(b)})};Array.prototype.shuffle=function(){for(var a=this.slice(0),b,c,d=this.length-1;0<d;--d)b=Math.floor(Math.random()*(d+1)),c=a[d],a[d]=a[b],a[b]=c;return a};Array.prototype.randomElement=function(){return this[Math.floor(Math.random()*this.length)]};
Array.prototype.remove=function(a){a=this.indexOf(a);-1<a&&this.splice(a,1)};String.prototype.chunk=function(a){return this.match(new RegExp(".{1,"+a+"}","g"))};String.prototype.localeCompareSmart=function(a){return this.localeCompare(a,"en",{sensitivity:"base",ignorePunctuation:!0,numeric:!0})};angular.module("fringeApp","ngAnimate ngRoute ui.bootstrap mgcrea.ngStrap.affix mgcrea.ngStrap.aside mgcrea.ngStrap.modal mgcrea.ngStrap.button mgcrea.ngStrap.dropdown mgcrea.ngStrap.select mgcrea.ngStrap.tab mgcrea.ngStrap.tooltip ngMap".split(" "));
angular.module("fringeApp").run(["$route","$rootScope","$location",function(a,b,c){var d=c.path;c.path=function(f,e){if(!1===e)var g=a.current,h=b.$on("$locationChangeSuccess",function(){a.current=g;h()});return d.apply(c,[f])}}]);
angular.module("fringeApp").value("Sorters",{performance:function(a,b){return a.start-b.start||a.stop-b.stop}}).value("Configuration",{googleAuthClientId:"728570220201-2tkhj9m3stsqgprscc77o256r0f441au.apps.googleusercontent.com",slotSize:3600,minimumArriveBeforeShowTime:600,adminUsers:["g112311867146833913606"],interestText:["Not Interested","Eh...maybe.","I wouldn't mind seeing this.","I'd love to see this!","I HAVE to see this!"],generatorMessages:"This may take a few seconds or several minutes.;You may see the lower progress bars fluctuate back and forth. This is normal.;It may not be possible to see all of the shows you want.;You can stop the generator at any time, but the longer you let this run, the better the schedule will be.;If the generator can't find a better schedule, it will stop automatically.;The Auto-Scheduler uses a lot of computing power. It will slow down if you do other things.".split(";"),
fringeLevels:[{min:0,name:"New Recruit"},{min:1,name:"Newbie"},{min:3,name:"Rookie"},{min:5,name:"Amateur"},{min:10,name:"Awesome"},{min:20,name:"Rockstar"},{min:30,name:"Hero"},{min:40,name:"Fanatic"},{min:50,name:"Legend"},{min:65,name:"BOSS"}]}).value("Plurals",{show:{0:"no shows",one:"one show",other:"{} shows"},showSome:{0:"no shows",one:"a show",other:"some shows"},showSomeMore:{0:"no more shows",one:"another show",other:"some more shows"},aShow:{0:"no shows",one:"a show",other:"{} shows"},
performance:{0:"no performances",one:"one performance",other:"{} performances"},Performance:{0:"No performances",one:"1 Performance",other:"{} Performances"}}).value("Menu",[{route:"",title:"Home"},{route:"my-fringe",title:"My Fringe"},{route:"shows",title:"Shows"},{route:"schedule",title:"Schedule"},{route:"venues",title:"Venues"},{route:"map",title:"Map"}]).value("MapConfig",{initialView:0,views:[{name:"Fringe Central",center:[28.572253,-81.367035],zoom:18,markerGroups:!0},{name:"Green Lawn of Fabulousness",
markerGroups:!0,center:[28.571914,-81.366537],zoom:19},{name:"All Venues",markerGroups:["venues","byov"]},{name:"Parking",markerGroups:["parking"]}],markerGroups:[{id:"venues",name:"Main Venues",markers:[]},{id:"byov",name:"BYOV",markers:[]},{id:"fringe",name:"Festival Locations",markers:[{position:[28.573538,-81.366723],title:"Box Office",icon:"information",host:1},{position:[28.572936,-81.365307],title:"Club Fringe Lounge",icon:"club-fringe",host:2,notes:"Club Fringe members only."},{position:[28.573403,
-81.367468],title:"Kids Fringe",icon:"kids",host:1},{position:[28.571664,-81.366011],title:"Information",icon:"information",location:"Green Lawn of Fabulousness"}]},{id:"foodAndDrink",name:"Food & Drink",markers:[{position:[28.572994,-81.367102],title:"Wine & Beer",icon:"beer-garden",host:1},{position:[28.571936,-81.366611],title:"McGrath Beer Tent",icon:"beer",location:"Green Lawn of Fabulousness"},{position:[28.572003,-81.366468],title:"Stonewall Bar Tent",icon:"bar",location:"Green Lawn of Fabulousness"},
{position:[28.572153,-81.366947],title:"Ice Cream",icon:"icecream",location:"Green Lawn of Fabulousness"},{position:[28.571776,-81.366104],title:"Cheese Curds",icon:"cheese",location:"Green Lawn of Fabulousness"}]},{id:"services",name:"Services",markers:[{position:[28.57298,-81.366786],title:"ATM",icon:"atm",host:1},{position:[28.572036,-81.366584],title:"ATM",icon:"atm",location:"Green Lawn of Fabulousness"},{position:[28.573535,-81.366921],title:"Restrooms",icon:"bathroom",host:1},{position:[28.573117,
-81.366799],title:"Restrooms",icon:"bathroom",host:1},{position:[28.572941,-81.364958],title:"Restrooms",icon:"bathroom",host:2},{position:[28.570965,-81.365557],title:"Restrooms",icon:"bathroom",host:3},{position:[28.571659,-81.366254],title:"Restrooms",icon:"bathroom",location:"Green Lawn of Fabulousness"}]},{id:"parking",name:"Parking",markers:[{position:[28.573059,-81.366112],title:"Free Parking",icon:"parking",host:1,notes:"The most convenient for all venues and the Fringe Lawn, but it fills up fast and is the most challenging for finding a spot \u2013 it can take as long as 45 minutes to 1 hour at busy times."},
{position:[28.571236,-81.366444],title:"Free Parking",icon:"parking",host:3,notes:"This lot fills up quickly and is occasionally closed to Fringe guests for special events."},{position:[28.573045,-81.37102],title:"Parking Garage",icon:"parking-garage",location:"Orlando Hospital",address:["2328 Alden Rd","Orlando, FL 32803"],notes:"Free on Saturday or if leaving after midnight."},{position:[28.568979,-81.363516],title:"Free Weekend Parking",icon:"parking",location:"Magruder Eye Institute",address:["1911 N Mills Ave",
"Orlando, FL 32803"],notes:"Available on Saturdays and Sundays all day during Fringe. Lots of spaces, the perfect location for a short walk to Silver and Green venues."},{position:[28.568475,-81.365177],title:"Free Weekend Parking",icon:"parking",location:"Florida Urology Associates",address:["1812 N Mills Ave","Orlando, FL 32803"],notes:"Available on Saturdays and Sundays all day during Fringe. Lots of spaces, the perfect location for a short walk to Silver and Green venues."}]}],lawnPolygon:[[28.5721511,
-81.3658485],[28.5722194,-81.3659477],[28.5722641,-81.3660309],[28.57229,-81.3660872],[28.5723065,-81.3661489],[28.5723112,-81.3661999],[28.5723042,-81.3662508],[28.5722665,-81.3663501],[28.5722359,-81.3664386],[28.5722147,-81.3665539],[28.5722194,-81.3667041],[28.5722759,-81.3668516],[28.5722806,-81.3669026],[28.5722735,-81.3669482],[28.572217,-81.3670394],[28.5721723,-81.3670917],[28.5721311,-81.3671668],[28.572081,-81.3672198],[28.5720404,-81.3672741],[28.5719944,-81.3673438],[28.5719555,-81.3673693],
[28.5719119,-81.3673747],[28.5718778,-81.3673452],[28.5718107,-81.3671829],[28.5717789,-81.3670447],[28.5716635,-81.3668329],[28.5716046,-81.3667417],[28.5715822,-81.3666947],[28.5715681,-81.3666545],[28.5715651,-81.3666036],[28.5715681,-81.3665566],[28.5715787,-81.3664708],[28.5716281,-81.3662776],[28.5716234,-81.3661489],[28.5716105,-81.3660725],[28.5715986,-81.3660175],[28.5715739,-81.3659652],[28.5715504,-81.36589],[28.5715174,-81.3658136],[28.5717082,-81.3657385],[28.5718048,-81.3657144],[28.5718778,
-81.365701],[28.5719803,-81.3657117],[28.572071,-81.3657546],[28.5721511,-81.3658485]]}).config(["$locationProvider","$routeProvider",function(a,b){a.hashPrefix("!");a.html5Mode(!0);b.when("/",{template:"<home></home>"}).when("/my-fringe/:subpage?",{template:"<my-fringe></my-fringe>"}).when("/shows",{template:"<shows></shows>"}).when("/shows/show/:show",{template:"<shows></shows>"}).when("/shows/venue/:venue",{template:"<shows></shows>"}).when("/schedule/:param1?/:param2?",{template:"<schedule></schedule>"}).when("/venues",
{template:"<venues></venues>"}).when("/map",{template:"<fringe-map></fringe-map>"}).when("/map/venue/:venue",{template:"<fringe-map></fringe-map>"}).when("/map/host/:host",{template:"<fringe-map></fringe-map>"}).when("/credits",{templateUrl:"pages/credits.html"}).when("/privacy",{templateUrl:"pages/privacy.html"}).when("/test",{template:"<test></test>"}).otherwise({redirectTo:"/"})}]);
angular.module("fringeApp").filter("highlight",["$sce",function(a){return function(b,c){return b?(c=c.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&").trim())&&""!==c?a.trustAsHtml(b.replace(new RegExp("("+c+")(?![^<]*>|[^<>]*<\\/)","gi"),"<mark>$1</mark>")):a.trustAsHtml(b):b}}]);angular.module("fringeApp").filter("price",function(){return function(a){return 0===a?"FREE":"$"+a}});angular.module("fringeApp").filter("startFrom",function(){return function(a,b){return a.slice(+b)}});
angular.module("fringeApp").directive("innerHeight",function(){return{restrict:"A",scope:{model:"=innerHeight"},controller:["$scope","$window","debounce",function(a,b,c){a.model=b.innerHeight;angular.element(b).on("resize",c(function(){a.$apply(function(){a.model=b.innerHeight})},100))}]}});
angular.module("fringeApp").directive("interest",function(){return{restrict:"E",replace:!0,scope:{showId:"=",desire:"="},template:function(a,b){var c=void 0!==b.showId,d="<span";d=(c?d+' ng-mouseleave="reset()"':d+' bs-tooltip="{title:interestText[get()]}"')+">";for(var f=0;4>f;f++)d+='<i class="rating-icon glyphicon" ng-class="icon('+f+')"',c&&(d+=' bs-tooltip="{title: interestText['+(f+1)+']}" ng-click="click('+(f+1)+')" ng-mouseenter="enter('+f+')"'),d+="></i>";return d+"</span>"},controller:["$scope",
"Schedule","Configuration",function(a,b,c){var d;a.interestText=c.interestText;a.get=function(){return a.desire||b.getShowDesire(a.showId)};a.icon=function(b){return b<(d||a.get())?"glyphicon-ok-sign":"glyphicon-ok-circle"};a.click=function(c){b.setShowDesire(a.showId,c===a.get()?0:c)};a.enter=function(a){d=a+1};a.reset=function(){d=void 0}}]}});
angular.module("fringeApp").directive("monthDayPicker",function(){return{restrict:"E",templateUrl:"app/core/directives/monthDayPicker.html",replace:!0,scope:{days:"=",model:"="},controller:["$scope",function(a){a.click=function(b){a.model=b};var b=[],c=[],d=angular.copy(a.days),f;for(f=0;f<d.length;f++){var e=moment(d[f],"X"),g=e.startOf("month").unix();e=e.startOf("year").unix();-1===b.indexOf(g)&&b.push(g);-1===c.indexOf(e)&&c.push(e)}a.months=b.map(function(b){b=moment(b,"X");var c=[],d=moment().startOf("day").unix();
for(f=0;f<b.day();f++)c.push({number:"",time:-1});for(f=1;f<=b.daysInMonth();f++){var e=b.date(f).unix();c.push({number:f,time:e,allowed:-1<a.days.indexOf(e),today:e===d})}for(f=0;f<b.day()%7;f++)c.push(0);return{header:b.format("MMMM YYYY"),weeks:c.chunk(7).map(function(a){return{days:a}})}})}]}});
angular.module("fringeApp").directive("scrollYModel",function(){return{restrict:"A",scope:{model:"=scrollYModel"},controller:["$scope","$document","$window",function(a,b,c){a.model=Math.min(c.scrollY,205);b.on("scroll",function(){var b=Math.min(c.scrollY,205);a.model!==b&&a.$apply(function(){a.model=b})})}]}});angular.module("fringeApp").directive("showRating",function(){return{restrict:"E",scope:{value:"="},template:'<span class="label label-info"><i class="glyphicon glyphicon-check"></i> {{value}}</span>'}});
angular.module("fringeApp").directive("staticMap",function(){return{scope:{center:"=",zoom:"=",size:"=",markers:"="},replace:!0,template:'<img ng-src="{{url}}" />',controller:["$scope",function(a){var b=["key=AIzaSyD0y40AVRhf_DDSsFCRT0mBXhjdkQZP4Ys"];a.center&&b.push("center="+a.center);a.zoom&&b.push("zoom="+a.zoom);a.size&&b.push("size="+a.size);a.markers&&b.push("markers="+a.markers);a.url="https://maps.googleapis.com/maps/api/staticmap?"+b.join("&")}]}});
angular.module("fringeApp").service("Availability",["UserData",function(a){this.isSlotAvailable=function(b){return-1===a.getUnavailability().indexOf(b)};this.setSlotAvaialble=function(b){var c=a.getUnavailability();c.remove(b);a.setUnavailability(c)};this.setSlotUnavailable=function(b){if(this.isSlotAvailable(b)){var c=a.getUnavailability();c.push(b);a.setUnavailability(c)}};this.isUserAvailable=function(b,c){for(var d=a.getUnavailability(),f=d.length;f--;){var e=d[f];if(!(c<e||b>e+1800))return!1}return!0}}]);
angular.module("fringeApp").service("Data",["$http","$q","Sorters",function(a,b,c){var d;this.load=function(){var c=b.defer();a.get("api/getData.php",{cache:!0}).then(function(a){d=a.data;console.log("Data loaded");c.resolve()},function(){c.reject()});return c.promise};var f=function(a){return function(){return d[a]}};this.getShows=f("shows");this.getPerformances=f("performances");this.getRatings=f("ratings");this.getVenues=f("venues");this.getVenueHosts=f("venueHosts");this.getVenueDistances=f("distances");
this.getAvailabilitySlots=f("availabilitySlots");this.getAvailabilitySlotsAll=f("availabilitySlotsAll");this.getSortedShows=function(){return Object.keys(d.shows).sort(function(a,b){return d.shows[a].name.localeCompareSmart(d.shows[b].name)})};this.getPrices=function(){var a={};angular.forEach(d.shows,function(b){a[b.price]=!0});return Object.keys(a).map(function(a){return parseInt(a)}).sort(function(a,b){return a>b})};this.getShow=function(a){return d.shows[a]};this.getPerformance=function(a){return d.performances[a]};
this.getSortedPerformances=function(){return Object.keys(d.performances).sort(function(a,b){return c.performance(d.performances[a],d.performances[b])})}}]);angular.module("fringeApp").service("Error",function(){var a=function(){};this.onError=function(b){a=b};this.error=function(b,c){a({title:b,more:c})}});
angular.module("fringeApp").service("Schedule",["$q","Configuration","UserData","Data","Availability","Sorters",function(a,b,c,d,f,e){var g=this;this.getSchedule=function(){return c.getSchedule()};this.getShowDesire=function(a){return c.getPreferences()[a]||0};this.setShowDesire=function(a,b){var d=c.getPreferences();0===b?delete d[a]:d[a]=b;c.setPreferences(d)};this.getDesiredShows=function(){return Object.keys(c.getPreferences()).filter(function(a){return 0<g.getShowDesire(a)})};this.add=function(a){var b=
c.getSchedule();-1===b.indexOf(a)&&(b.push(a),c.setSchedule(b));this.removeMaybe(a)};this.remove=function(a){this.removeMaybe(a);var b=c.getSchedule();b.remove(a);c.setSchedule(b)};this.addMaybe=function(a){this.remove(a);var b=c.getMaybes();-1===b.indexOf(a)&&(b.push(a),c.setMaybes(b))};this.removeMaybe=function(a){var b=c.getMaybes();b.remove(a);c.setMaybes(b)};this.getSortedSchedule=function(){var a=d.getPerformances();return c.getSchedule().sort(function(b,c){return e.performance(a[b],a[c])})};
this.isUserAttendingPerformance=function(a){return-1<c.getSchedule().indexOf(a)};this.isUserMaybeAttendingPerformance=function(a){return-1<c.getMaybes().indexOf(a)};this.getPerformanceScheduleState=function(a){return this.isUserMaybeAttendingPerformance(a)?"maybe":this.isUserAttendingPerformance(a)?"yes":"no"};this.getPerformancesAttending=function(){return c.getSchedule()};this.getShowsAttending=function(){for(var a=d.getPerformances(),b=[],c=g.getPerformancesAttending(),e=0;e<c.length;e++)b.push(a[c[e]].show);
return b};this.getPossiblePerformances=function(){var a=d.getPerformances(),e=d.getShows(),g=d.getVenueDistances(),n=[],l=c.getSchedule(),r=0,p=Date.now()/1E3;angular.forEach(a,function(c,d){if(-1<l.indexOf(d)||!f.isUserAvailable(c.start,c.stop)||c.start<=p)return!0;var h=e[c.show];for(r=0;r<h.performances.length;r++)if(-1<l.indexOf(h.performances[r]))return!0;var k=c.start,m=c.stop;for(r=l.length;r--;){var q=a[l[r]],t=g[h.venue][e[q.show].venue]+b.minimumArriveBeforeShowTime;if(!(m<q.start-t||k>
q.stop+t))return!0}n.push(d)});return n}}]);
angular.module("fringeApp").service("UserData",["$q","$http","debounce",function(a,b,c){var d=this,f,e,g=function(a){return function(){return e[a]}},h=function(a){return function(b){e[a]=b;d.save()}},k=function(){};this.load=function(c){var d=a.defer();(f=c)?b.get("api/getUserData.php?id="+c).then(function(a){e=a.data;d.resolve();console.log("User data loaded")},function(){d.reject()}):d.reject();return d.promise};this.save=c(function(){var c=a.defer();k(c.promise);void 0!==f?b.post("api/setUserData.php",
{id:f,data:e}).then(c.resolve,c.reject):c.resolve()},1E3);this.reset=function(){e={preferences:{},unavailability:[],schedule:[],maybe:[],settings:{scheduleMode:"full"}};f=void 0};this.reset();this.getPreferences=g("preferences");this.setPreferences=h("preferences");this.getUnavailability=g("unavailability");this.setUnavailability=h("unavailability");this.getSchedule=g("schedule");this.setSchedule=h("schedule");this.getMaybes=g("maybe");this.setMaybes=h("maybe");this.getSettings=g("settings");this.setSettings=
h("settings");this.isSignedIn=function(){return void 0!==f};this["export"]=function(){return JSON.stringify(e)};this["import"]=function(a){e=JSON.parse(a);this.save()};this.onSave=function(a){k=a}}]);
angular.module("fringeApp").controller("CoreCtrl",["$rootScope","$scope","$route","$location","$timeout","$window","$q","$aside","$uibModal","Data","Menu","UserData","Error","Configuration",function(a,b,c,d,f,e,g,h,k,m,n,l,r,p){l.onSave(function(a){a.then(function(){},function(){r.error("Unable to save data to the server.","Have you lost your internet connection?")})});r.onError(function(a){b.error=a});b.menu=n;var q=g.defer();a.$on("$routeChangeSuccess",function(){if(c.current.$$route){q.resolve();
var a=c.current.$$route.originalPath.split("/");b.currentRoute="/"+a[1];e.scroll(0,0)}});b.signIn=function(){k.open({templateUrl:"app/core/loginModal/loginModal.html",controller:"LoginModalCtrl",size:"md"}).result.then(function(a){b.signedIn=!0;b.signedInName=a.name;b.isUserAdmin=-1<p.adminUsers.indexOf(a.id);"/"===d.path()?d.path("/my-fringe"):c.reload()})};var t=g.defer();gapi.load("auth2",function(){gapi.auth2.init({client_id:p.googleAuthClientId}).then(function(){var a=gapi.auth2.getAuthInstance();
if(a.isSignedIn.get()){a=a.currentUser.get().getBasicProfile();var c="g"+a.getId();b.signedIn=!0;b.signedInName=a.getName();b.isUserAdmin=-1<p.adminUsers.indexOf(c);l.load(c).then(t.resolve)}else b.signedIn=!1,t.resolve()})});g.all([m.load(),q.promise,t.promise]).then(function(){b.loaded=!0},function(){r.error("Unable to retrieve data from server","Please wait a moment and try again.")});void 0!==Blob&&void 0!==Worker&&void 0!==window.URL&&void 0!==window.URL.createObjectURL||r.error("Unsupported Browser",
"Your browser does not support Web Workers. Please use a modern browser like Google Chrome.");b.signOut=function(){gapi.auth2.getAuthInstance().signOut().then(function(){b.$apply(function(){l.reset();b.isUserAdmin=!1;b.signedIn=!1;-1<d.path().indexOf("my-fringe")?d.path("/"):c.reload();c.reload()})})};b.openHelp=function(){h({templateUrl:"app/core/help/help.html",placement:"right",controller:"HelpCtrl"})}}]);
angular.module("fringeApp").controller("HelpCtrl",["$scope","$route","$routeParams",function(a,b,c){b=b.current.$$route.originalPath.split("/");a.currentRoute=b[1];"my-fringe"===b[1]&&c.subpage&&(a.currentRoute+="/"+c.subpage);c={"my-fringe":{title:"My Fringe",topics:[]},"my-fringe/availability":{title:"My Availability",topics:[]},"my-fringe/auto-scheduler":{title:"Auto-Scheduler",topics:[]},shows:{title:"Shows",topics:[]},schedule:{title:"Schedule",topics:[]},venues:{title:"Venues",topics:[]},map:{title:"Map",
topics:[]},about:{title:"About",topics:[]}};a.title=c[a.currentRoute].title;a.topics=c[a.currentRoute].topics}]);
angular.module("fringeApp").controller("LoginModalCtrl",["$uibModalInstance","$scope","$timeout","UserData","Error",function(a,b,c,d,f){b.signingIn=!1;c(function(){gapi.signin2.render("google-sign-in-button",{scope:"profile",width:200,height:36,longtitle:!0,theme:"dark",onsuccess:function(c){var e=c.getBasicProfile(),h="g"+e.getId();b.$apply(function(){b.signingIn=!0});d.load(h).then(function(){a.close({id:h,name:e.getName()})},function(){a.dismiss();f.error("Unable to retrieve data from server",
"Please wait a moment and try again.")})}})});b.close=a.dismiss}]);
angular.module("fringeApp").component("home",{templateUrl:"app/home/home.html",controller:["$scope","$timeout","$location",function(a,b,c){for(var d="#D5D6DB #337ab7 #C33C54 #731DD8 #59cd90 #fabc3c #337ab7 #C33C54 #731DD8 #59cd90 #fabc3c".split(" "),f=Array.from(document.querySelectorAll("#calendar-image .day")),e,g=function(){f.randomElement().style.fill=d.randomElement();e=b(g,1500)},h=0;15>h;h++)f.randomElement().style.fill=d.randomElement();g();a.$on("$destroy",function(){b.cancel(e)});a.getStarted=
function(){a.$parent.signedIn?c.path("/my-fringe"):a.$parent.signIn()}}]});
angular.module("fringeApp").component("myFringe",{templateUrl:"app/myFringe/myFringe.html",controller:["$scope","$route","$routeParams","Schedule","UserData","Configuration","Plurals",function(a,b,c,d,f,e,g){a.plurals=g;a.tabs={activeTab:"My Schedule"};"availability"===c.subpage?a.tabs.activeTab="My Availability":"auto-scheduler"===c.subpage&&(a.tabs.activeTab="Auto-Scheduler");a.statuses=e.fringeLevels;a.userData={schedule:f.getSchedule()};a.$watch("userData.schedule",function(){a.goingCount=d.getSchedule().length;
a.level=0;a.nextLevelCount=0;for(var b=a.nextLevelRemaining=0;b<a.statuses.length;b++)a.maxLevel=a.statuses[b].min,a.goingCount>=a.statuses[b].min&&(a.level=a.maxLevel,a.status=b,void 0!==a.statuses[b+1]&&(a.nextLevelCount=a.goingCount-a.statuses[b].min,a.nextLevelRemaining=Math.max(0,a.statuses[b+1].min-a.level-a.nextLevelCount)))});a.$watch("tabs.activeTab",function(){"My Schedule"===a.tabs.activeTab&&b.subpage?b.updateParams({subpage:""}):"My Availability"===a.tabs.activeTab&&"availability"!==
b.subpage?b.updateParams({subpage:"availability"}):"Auto-Scheduler"===a.tabs.activeTab&&"auto-scheduler"!==b.subpage&&b.updateParams({subpage:"auto-scheduler"})})}]});
angular.module("fringeApp").component("myFringeAvailability",{templateUrl:"app/myFringe/availability/availability.html",controller:["$scope","$uibModal","$timeout","Data","Schedule","Availability","Configuration",function(a,b,c,d,f,e,g){a.moment=moment;a.slotSize=g.slotSize;a.availability={};a.toggleAvailability=function(b){a.availability[b]?e.setSlotUnavailable(b):e.setSlotAvaialble(b);a.availability[b]=!a.availability[b]};var h;a.dragStart=function(b){a.toggleAvailability(b);h=a.availability[b];
a.dragging=!0};a.dragStop=function(){a.dragging=!1};a.dragOver=function(b){a.dragging&&a.availability[b]!==h&&a.toggleAvailability(b)};a.showPerformances=function(c,d,e){b.open({templateUrl:"app/myFringe/availability/slotPerformancesModal/slotPerformancesModal.html",controller:"slotPerformancesModalCtrl",size:"lg",scope:a,resolve:{slotStart:function(){return c},slotStop:function(){return d},slotPerformances:function(){return e}}})};var k=d.getPerformances();a.availabilitySlots=d.getAvailabilitySlots();
a.availabilitySlotsAll=d.getAvailabilitySlotsAll();angular.forEach(a.availabilitySlots,function(b){angular.forEach(b,function(b){a.availability[b]=e.isSlotAvailable(b)})});(function(){var b=f.getSchedule();a.slotPerformances={};angular.forEach(a.availabilitySlots,function(c){angular.forEach(c,function(c){a.slotPerformances[c]=[];for(var d=0;d<b.length;d++){var e=b[d],f=k[e];f.stop<=c||f.start>=c+g.slotSize||a.slotPerformances[c].push(e)}})})})()}]});
angular.module("fringeApp").controller("slotPerformancesModalCtrl",["$uibModalInstance","$scope","Data","Schedule","Sorters","slotStart","slotStop","slotPerformances",function(a,b,c,d,f,e,g,h){b.slotStart=e;b.slotStop=g;b.shows=c.getShows();b.performances=c.getPerformances();b.venues=c.getVenues();b.slotPerformances=h.sort(function(a,c){return f.performance(b.performances[a],b.performances[c])});b.ok=function(){a.close()};b.remove=function(a){d.remove(a);b.slotPerformances.remove(a);0===b.slotPerformances.length&&
b.ok()}}]);
angular.module("fringeApp").component("myFringeAutoScheduler",{templateUrl:"app/myFringe/autoScheduler/autoScheduler.html",controller:["$scope","$q","$timeout","$uibModal","$location","Data","Schedule","UserData","Availability","Configuration","Plurals",function(a,b,c,d,f,e,g,h,k,m,n){a.plurals=n;a.moment=moment;a.interestText=m.interestText;a.instantAddScreenCount=0;var l=!1,r=function(){var b=g.getDesiredShows(),c=g.getSchedule();if(!b.length)return"no-interests";a.progressByDesireMax={4:0,3:0,
2:0,1:0};a.progressByDesire={4:0,3:0,2:0,1:0};b.map(function(b){a.progressByDesireMax[g.getShowDesire(b)]++});var d=e.getPerformances(),h=e.getShows(),p=e.getVenues(),n=e.getVenueDistances(),r=g.getPossiblePerformances(),A=g.getShowsAttending(),C=b.diff(A);c.map(function(b){a.progressByDesire[g.getShowDesire(d[b].show)]++});a.availablePerformanceCount=0;angular.forEach(d,function(b){k.isUserAvailable(b.start,b.stop)&&a.availablePerformanceCount++});a.possiblePerformanceCount=r.length;a.allDesiredShowsOnSchedule=
0===C.length;if(!r.length)return l&&f.path("/my-fringe"),"schedule-full";if(0===C.length)return l&&f.path("/my-fringe"),"schedule-complete";var y=r.filter(function(a){return-1<b.indexOf(d[a].show)});if(!y.length)return l&&f.path("/my-fringe"),"no-possible-desired";var z=y.filter(function(a){var b=d[a],c=b.start,e=b.stop;b=h[b.show].venue;for(var f=0;f<y.length;f++){var g=y[f];if(a!==g){g=d[g];var k=n[b][h[g.show].venue]+m.minimumArriveBeforeShowTime;if(!(e<g.start-k||c>g.stop+k))return!1}}return!0}).map(function(a){return{id:a,
performance:d[a],showId:d[a].show,show:h[d[a].show],venueId:h[d[a].show].venue,venue:p[h[d[a].show].venue]}});z=z.filter(function(a){for(var b=0;b<z.length;b++)if(z[b].id!==a.id&&z[b].showId===a.showId)return!1;return!0});a.instantAddScreenCount++;if(z.length)return a.instantAddPerformances=z,"instant-add";a.showsOnScheduleCount=A.length;return l?"done":"generator"};a.getProgressType=function(a,b){return a===b?"success":a<b/2?"danger":"warning"};a.addInstantAdd=function(){angular.forEach(a.instantAddPerformances,
function(a){g.add(a.id)});p()};a.generate=function(){d.open({templateUrl:"app/myFringe/autoScheduler/autoSchedulerModal/autoSchedulerModal.html",controller:"AutoSchedulerModalCtrl",size:"lg",backdrop:"static",keyboard:!1}).result.then(function(){l=!0;p()},function(){a.screen="done"})};var p=function(){a.screen="";c(function(){a.screen=r()},500)};h.getSettings().autoScheduleIntroComplete?p():(a.screen="intro",a.completeIntro=function(){var a=h.getSettings();a.autoScheduleIntroComplete=!0;h.setSettings(a);
p()})}]});
angular.module("fringeApp").controller("AutoSchedulerModalCtrl",["$uibModalInstance","$scope","$timeout","Configuration","Data","Schedule","UserData","generatorFactory","Plurals",function(a,b,c,d,f,e,g,h,k){b.moment=moment;b.plurals=k;b.infoMessages=d.generatorMessages;b.isUserAttendingPerformance=e.isUserAttendingPerformance;b.userData={settings:g.getSettings(),preferences:g.getPreferences()};b.$watch("userData.settings",function(){g.setSettings(b.userData.settings)});var m=function(a,c){b.proposed=
[];b.unscheduled=[];b.accept={};for(var d={4:[],3:[],2:[],1:[]},f=a.length;f--;){b.accept[a[f]]=!1;var g=u.performances[a[f]].show;-1===c.indexOf(g)&&(b.proposed.push(a[f]),d[e.getShowDesire(g)].push(a[f]),b.accept[a[f]]=!0)}for(f=0;f<v.length;f++)-1<c.indexOf(v[f])&&b.unscheduled.push(v[f])},n,l,r=function(){b.currentMessage=0;var a=!0,e=function(){a&&(b.currentMessage=++b.currentMessage%d.generatorMessages.length,c(e,1E4))};c(e,1E4);return function(){a=!1}},p=function(){var a=Date.now(),d=0,e=[];
n=h.create();n.notification=function(f,g,h,k){var p=this.fitness(f.entity,!0);b.bestFitness=h.maximum;b.bestExtraPoints=p.extraPoints;b.worstFitness=h.minimum;b.currentGeneration=g;b.progressByDesire=p.groups;b.progressByDesire={1:p.groups[1]+b.progressByDesireBase[1],2:p.groups[2]+b.progressByDesireBase[2],3:p.groups[3]+b.progressByDesireBase[3],4:p.groups[4]+b.progressByDesireBase[4]};k?(b.progress=100,b.done=!0,c(function(){m(f.entity,p.conflicts)},750),l()):(b.progress=(f.fitness-p.extraPoints)/
b.idealFitness*90,b.progress+=g/b.generationCount*10,b.bestSchedule=f.entity,b.bestConflicts=p.conflicts,0<g&&(e.push((Date.now()-a)/(g-d)),5<e.length&&e.shift(),b.timeRemaining=e.reduce(function(a,b){return a+b})/e.length*(b.generationCount-g)),a=Date.now(),d=g);b.$apply()};c(function(){n.evolve(w,u);l=r()},100);return n};b.getProgressType=function(a,b){return a===b?"success":a<b/2?"danger":"warning"};b.start=function(){b.progress=0;b.currentGeneration=0;b.progressByDesire={1:0,2:0,3:0,4:0};b.proposed=
void 0;b.accept={};b.bestFitness=0;b.bestExtraPoints=0;b.worstFitness=0;b.done=!1;b.currentMessage=0;c(p,500)};b.stop=function(){l();n.stop();b.progress=100;c(function(){m(b.bestSchedule,b.bestConflicts)},1E3)};b.restart=function(){l();n.stop();b.start()};b.save=function(){angular.forEach(b.accept,function(a,b){!0===a&&e.add(b)});a.close()};b.close=function(){a.dismiss()};b.examplePowers=[{w:5,p:[{i:1,p:"6"},{i:2,p:"36"},{i:3,p:"216"},{i:4,p:"1,296"},{i:5,p:"7,776"},{i:6,p:"46,656"},{i:7,p:"279,936"},
{i:8,p:"1,679,616"},{i:9,p:"10,077,696"}]},{w:7,p:[{i:10,p:"60,466,176"},{i:15,p:"470,184,984,576"},{i:20,p:"3,656,158,440,062,976"},{i:25,p:"28,430,288,029,929,700,000"},{i:30,p:"221,073,919,720,733,357,899,776"},{i:35,p:"1,719,070,799,748,422,591,028,658,176"},{i:40,p:"13,367,494,538,843,734,067,838,845,976,576"},{i:45,p:"103,945,637,534,048,876,111,514,866,313,854,976"},{i:50,p:"808,281,277,464,764,060,643,139,600,456,536,293,376"}]}];var q=e.getPossiblePerformances(),t=e.getShowsAttending();b.shows=
f.getShows();b.performances=f.getPerformances();b.distances=f.getVenueDistances();var v=f.getSortedShows();b.sortedPerformances=f.getSortedPerformances();b.venues=f.getVenues();f=q.filter(function(a){return 0<e.getShowDesire(b.performances[a].show)});b.generationCount=Math.max(500,Math.min(1E3,2*f.length));b.populationSize=Math.floor(Math.max(500,Math.min(3E3,Math.pow(f.length,1.175))));b.crossoverRate=.9;b.mutationRate=.2;b.desireFitnessPoints=[0,3,7,15,31];b.arrivalThreshold=d.minimumArriveBeforeShowTime;
var w={iterations:b.generationCount,size:b.populationSize,crossover:b.crossoverRate,mutation:b.mutationRate,skip:Math.ceil((b.generationCount*b.populationSize-25E4)/92E4)+2,maxResults:1};var u={shows:{},showIds:[],performances:{},venueDistances:b.distances,desireToFitnessMap:b.desireFitnessPoints,extraPointsForAdjacentVenues:1,extraPointsForTimeOff:1,timeOffThreshold:7200,adjacentVenueThreshold:600,extraPointsForEmptyDays:1,idealFitness:0,iterations:b.generationCount,populationSize:b.populationSize,
arrivalThreshold:b.arrivalThreshold};b.progressByDesireMax={1:0,2:0,3:0,4:0};b.progressByDesireBase={1:0,2:0,3:0,4:0};angular.forEach(b.shows,function(a,c){var d=e.getShowDesire(c),f=a.performances.filter(function(a){return-1<q.indexOf(a)});-1<t.indexOf(c)&&(b.progressByDesireMax[d]++,b.progressByDesireBase[d]++);if(0===d||0===f.length||-1<t.indexOf(c))return!0;b.progressByDesireMax[d]++;u.showIds.push(c);u.shows[c]={name:a.name,desire:d,venue:a.venue,performances:[]};u.idealFitness+=u.desireToFitnessMap[d];
angular.forEach(f,function(d){var e=b.performances[d];u.performances[d]={start:e.start,stop:e.stop,show:c,offsetTimes:{}};u.shows[c].performances.push(d);angular.forEach(b.distances,function(c,f){u.performances[d].offsetTimes[f]={start:e.start-c[a.venue]-b.arrivalThreshold,stop:e.stop+c[a.venue]+b.arrivalThreshold}})})});u.performanceIds=Object.keys(u.performances).shuffle();f=Object.keys(u.performances).sort(function(a,b){var c=u.performances[a],d=u.performances[b];return d.start-c.start||d.stop-
c.stop});for(k=0;k<f.length;k++)u.performances[f[k]].sortOrder=k;b.idealFitness=u.idealFitness;console.log("Generator Config: ",u);b.start()}]);
angular.module("fringeApp").factory("generatorFactory",function(){return{create:function(){var a=Genetic.create();a.seed=function(){for(var a=[],c=this.userData.showIds.length;c--;){var d=this.userData.shows[this.userData.showIds[c]].performances;a.push(d[Math.floor(Math.random()*d.length)])}return a};a.mutate=function(a){for(var b=2;b--;){var d=Math.floor(Math.random()*a.length),f=this.userData.shows[this.userData.performances[a[d]].show].performances;a[d]=f[Math.floor(Math.random()*f.length)];b--}return a};
a.crossover=function(a,c){var b=this.userData.performances,f=a.length,e=Math.floor(Math.random()*f);f=Math.floor(Math.random()*f);var g=[a,c].map(function(a){return a.slice(0).sort(function(a,c){return b[a].show-b[c].show})});if(e>f){var h=f;f=e;e=h}return[g[0].slice(0,e).concat(g[1].slice(e,f)).concat(g[0].slice(f)),g[1].slice(0,e).concat(g[0].slice(e,f)).concat(g[1].slice(f))]};a.fitness=function(a,c){for(var b=this.userData.performances,f=this.userData.shows,e=a.slice().sort(function(a,c){return b[a].sortOrder-
b[c].sortOrder}),g=0,h=0,k=[0,0,0,0,0],m={},n=[],l=!1,r=e.length,p=r,q=0,t=0,v,w,u,x;p--;){v=e[p];u=b[v];w=f[u.show];l=!1;t=q=0;m[v]=[];var B=w.desire;for(q=1;q<r;q++){t=p-q;if(void 0===e[t])break;w=e[t];t=b[w];x=f[t.show];B<=x.desire&&t.start<u.offsetTimes[x.venue].stop&&(m[v].push(w),n.push(u.show),l=!0);if(t.start>u.stop+3600)break}for(q=1;q<r;q++){t=p+q;if(void 0===e[t])break;w=e[t];t=b[e[t]];x=f[t.show];B<=x.desire&&t.stop>u.offsetTimes[x.venue].start&&(m[v].push(w),n.push(u.show),l=!0);if(t.stop<
u.start-3600)break}l||(g+=this.userData.desireToFitnessMap[B],k[B]++)}if(n.length)for(l=[],r=5;--r;)a:for(p=0;p<this.userData.performanceIds.length;p++)if(v=this.userData.performanceIds[p],u=b[v],m[v]&&m[v].length&&f[u.show].desire===r){for(q=0;q<m[v].length;q++){w=m[v][q];if(-1<l.indexOf(w))continue a;if(!(void 0!==m[w]&&0<m[w].length))continue a}l.push(v);g+=this.userData.desireToFitnessMap[r];k[r]++;n.splice(n.indexOf(b[v].show),1)}for(p=e.length-1;p--;)u=b[e[p]],t=b[e[p+1]],this.userData.adjacentVenueThreshold>
this.userData.venueDistances[f[u.show].venue][f[t.show].venue]&&(h+=this.userData.extraPointsForAdjacentVenues),h+=Math.floor((u.start-t.stop)/this.userData.timeOffThreshold)*this.userData.extraPointsForTimeOff;g+=h;return c?{fitness:g,groups:k,extraPoints:h,conflicts:n}:g};a.generation=function c(a,c){return void 0===this.userData.genState||this.userData.genState.lastFitness<a[0].fitness?(this.userData.genState={lastFitness:a[0].fitness,sinceGeneration:c},!0):100>=c-this.userData.genState.sinceGeneration};
return a}}});
angular.module("fringeApp").component("myFringeSchedule",{templateUrl:"app/myFringe/schedule/schedule.html",controller:["$scope","Schedule","Data",function(a,b,c){var d,f;a.moment=moment;a.refresh=function(){a.amazingSchedule={};var c;a.hasPreferences=0<b.getDesiredShows().length;a.hasSchedule=0<b.getSchedule().length;var k=b.getSortedSchedule();angular.forEach(k,function(b){var h=e[b],k=moment(h.start,"X").startOf("day").format("X");void 0===a.amazingSchedule[k]&&(c=void 0,a.amazingSchedule[k]=[]);
if(c){var m=d[h.show].venue,p=15>g[d[c.show].venue][m]/60?"Walk":"Travel";3600<h.start-c.stop?(m=moment(c.stop,"X").hour(),m=15<m&&19>m?"Dinner time!":10<m&&14>m?"Lunch time!":["Snack time!","Drinks on the Great Green Lawn of Fabulousness!","Eat some cheese curds.","See what's happening in the ourdoor tent."].randomElement(),a.amazingSchedule[k].push({as:"break",text:m})):a.amazingSchedule[k].push({as:"travel",text:p+" to "+f[m].name})}a.amazingSchedule[k].push({as:"performance",id:b,start:h.start,
stop:h.stop,show:h.show});c=h})};a.removeFromSchedule=function(c){b.remove(c);a.refresh()};a.shows=d=c.getShows();var e=c.getPerformances();a.venues=f=c.getVenues();var g=c.getVenueDistances();a.refresh()}]});
angular.module("fringeApp").component("fringeMap",{templateUrl:"app/map/map.html",controller:["$scope","$routeParams","NgMap","$window","$timeout","$q","debounce","Data","MapConfig",function(a,b,c,d,f,e,g,h,k){a.lawnPolygon=k.lawnPolygon;a.isGroupVisible={};a.venueHosts=h.getVenueHosts();var m=h.getVenues();a.markerGroups=k.markerGroups.slice(0);a.views=k.views.slice(0);a.venueViews={};e=Object.keys(m).map(function(a){var b=m[a];return{byov:b.byov,position:b.mapPos,title:b.name,icon:b.mapIcon,venue:a,
host:b.host}});a.markerGroups[0].markers=e.filter(function(a){return a.byov});a.markerGroups[1].markers=e.filter(function(a){return!a.byov});a.toggleGroup=function(b){a.isGroupVisible[b]=!a.isGroupVisible[b]};var n=function(a,b){for(var d=new google.maps.LatLngBounds,e=0;e<a.length;e++)d.extend(new google.maps.LatLng(a[e][0],a[e][1]));r();c.getMap().then(function(a){a.setCenter(d.getCenter());a.fitBounds(d);a.getZoom()>b&&a.setZoom(b)})};a.gotoView=function(b){var d=[];angular.forEach(a.markerGroups,
function(c){a.isGroupVisible[c.id]=!1;if(!0===b.markerGroups||-1<b.markerGroups.indexOf(c.id))a.isGroupVisible[c.id]=!0,angular.forEach(c.markers,function(a){if(("venues"===c.id||"byov"===c.id)&&b.venueHosts&&-1===b.venueHosts.indexOf(a.venueHost))return!0;d.push(a.position)})});b.center&&b.zoom?c.getMap().then(function(a){a.setCenter(new google.maps.LatLng(b.center[0],b.center[1]));a.setZoom(b.zoom)}):n(d)};var l=function(){a.innerHeight=d.innerHeight;f(function(){c.getMap().then(function(a){google.maps.event.trigger(a,
"resize")})})};angular.element(d).on("resize",g(function(){a.$apply(l)},100));l();var r=function(){a.markerWindow&&c.getMap().then(function(b){b.hideInfoWindow("marker-info");a.markerWindow=void 0})};a.markerClick=function(b,d,e,f){r();c.getMap().then(function(b){a.markerWindow={title:d.title,location:d.location||d.host&&a.venueHosts[d.host].name,address:d.address||d.host&&a.venueHosts[d.host].address,venue:"venues"===e||"byov"===e?d.venue:!1,id:e+"-"+f,notes:d.notes};b.setCenter(new google.maps.LatLng(d.position[0],
d.position[1]));b.showInfoWindow("marker-info",a.markerWindow.id)})};c.getMap().then(function(){if(b.venue){var d=m[b.venue].mapPos;angular.forEach(a.markerGroups,function(b){a.isGroupVisible[b.id]=!0});c.getMap().then(function(a){a.setCenter(new google.maps.LatLng(d[0],d[1]));a.setZoom(21)})}else if(b.host){var e=[];angular.forEach(a.markerGroups,function(c){a.isGroupVisible[c.id]=!0;angular.forEach(c.markers,function(a){a.host===b.host&&e.push(a.position)})});n(e,19)}else a.gotoView(a.views[k.initialView]);
a.mapLoaded=!0})}]});
angular.module("fringeApp").component("schedule",{templateUrl:"app/schedule/schedule.html",controller:["$scope","$timeout","$location","$routeParams","UserData","Data","Schedule","Availability","Plurals",function(a,b,c,d,f,e,g,h,k){a.signedIn=f.isSignedIn();a.moment=moment;a.plurals=k;a.settings={scheduleMode:f.getSettings().scheduleMode};a.preferences=f.getPreferences();if(d.param1)if(-1<["full","smart"].indexOf(d.param1)){if(a.settings.scheduleMode=d.param1,d.param2)var m=d.param2}else m=d.param1;
a.signedIn||(a.settings.scheduleMode="full");d=e.getSortedPerformances();var n=e.getPerformances(),l=e.getShows(),r=e.getVenues(),p=e.getRatings(),q=d.map(function(a){var b=n[a],c=l[b.show];return{id:a,performance:b,showId:b.show,show:c,venueId:c.venue,venue:r[c.venue],rating:p[c.rating],isAttending:!1,canAttend:!1,canBeScheduled:!1,attendState:"no"}});e=a.days=Object.keys(e.getAvailabilitySlots()).map(function(a){return+a});var t=function(){q&&(a.dataLoaded=!1,b(function(){var c=g.getPossiblePerformances(),
d=g.getShowsAttending(),e=g.getSchedule(),f=Date.now()/1E3;a.schedule=q.filter(function(b){return!(b.performance.start<a.filter.currentDay||b.performance.start>a.filter.currentDay+86400)}).map(function(a){a.isAttending=-1<e.indexOf(a.id);a.canAttend=h.isUserAvailable(a.performance.start,a.performance.stop);a.canBeScheduled=-1<c.indexOf(a.id);a.attendState=g.getPerformanceScheduleState(a.id);a.inPast=a.performance.start<f;return a}).filter(function(b){return"full"===a.settings.scheduleMode||"yes"===
b.attendState?!0:!b.inPast&&b.canBeScheduled&&-1===d.indexOf(b.showId)});b(function(){a.dataLoaded=!0})}))},v=function(){void 0!==a.days&&-1!==a.days.indexOf(a.filter.currentDay)&&c.path("/schedule/"+a.settings.scheduleMode+"/"+moment(a.filter.currentDay,"X").format("Y-MM-DD"),!1)};a.$watch("settings",function(){var b=f.getSettings();b.scheduleMode=a.settings.scheduleMode;f.setSettings(b);v();t()},!0);a.$watch("userData.preferences",t,!0);a.filter={currentDay:0,dayId:0};-1<e.indexOf(moment(m).unix())?
a.filter.currentDay=moment(m).unix():-1<e.indexOf(moment().startOf("day").unix())?a.filter.currentDay=moment().startOf("day").unix():a.filter.currentDay=e[0];a.$watch("filter.currentDay",function(){a.filter.dayId=a.days.indexOf(a.filter.currentDay)+1;v();t();setTimeout(function(){window.scroll(0,196)})});a.addToSchedule=function(a){g.add(a);t()};a.removeFromSchedule=function(a){g.remove(a);t()};a.addMaybe=function(a){g.addMaybe(a);t()};b(function(){a.loaded=!0})}]});
angular.module("fringeApp").component("shows",{templateUrl:"app/shows/shows.html",controller:["$scope","$window","$timeout","$filter","$routeParams","debounce","Data","UserData","Plurals","Schedule",function(a,b,c,d,f,e,g,h,k,m){a.isSignedIn=h.isSignedIn();a.moment=moment;a.plurals=k;a.allShowPerformances={};a.currentPage=1;a.perPage=10;a.isUserAttendingPerformance=m.isUserAttendingPerformance;a.userData={preferences:h.getPreferences()};a.otherOptions=[{value:"*",label:"All Shows"},{value:"interested",
label:"Interested Only"},{value:"attending",label:"Attending Only"}];a.shows=g.getShows();a.venues=g.getVenues();a.ratings=g.getRatings();a.prices=g.getPrices();a.sortedShows=g.getSortedShows();a.performances=g.getPerformances();a.venueOptions=Object.keys(a.venues).map(function(b){return{value:b,label:a.venues[b].name}}).sort(function(a,b){return a.label.localeCompareSmart(b.label)});a.venueOptions.unshift({value:"*",label:"All Venues"});a.ratingOptions=a.ratings.map(function(a,b){return{value:b,
label:a}});a.ratingOptions.unshift({value:"*",label:"All Ratings"});a.priceOptions=a.prices.map(function(a){return{value:a,label:d("price")(a)}});a.priceOptions.unshift({value:"*",label:"All Prices"});a.showAllPerformances=function(b){a.allShowPerformances[b]=!0};a.scroll=function(){c(function(){b.scroll(0,210)})};a.resetFilters=function(){a.selectedVenue="*";a.selectedRating="*";a.selectedPrice="*";a.selectedOther="*";a.search="";a.searchText=""};a.refresh=function(){a.buildData();a.scroll()};a.buildData=
function(){var b=m.getShowsAttending();a.searchText=a.search.toLowerCase().replace(/[^\s\d\w'!?"&-:,\(\)#]/g,"").trim()||"";var c=a.searchText.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),d=new RegExp("("+c+")(?![^<]*>|[^<>]*<\\/)","i");a.allShows=a.sortedShows.filter(function(c){var e=a.shows[c];if("*"!==a.selectedVenue&&e.venue!==a.selectedVenue||"*"!==a.selectedRating&&e.rating!==a.selectedRating||"*"!==a.selectedPrice&&e.price!==a.selectedPrice||"interested"===a.selectedOther&&0===m.getShowDesire(c)||
"attending"===a.selectedOther&&-1===b.indexOf(c))return!1;c=e.name+" "+e.description+" "+e.artist;c=c.replace(/&amp;/g,"&").replace(/&quot;/g,'"');return a.searchText&&!d.exec(c)?!1:!0})};a.searchTextEntered=e(function(){a.$apply(a.buildData)},50);a.clearSearch=function(){a.search="";a.buildData()};a.$watch("userData.preferences",a.buildData,!0);a.resetFilters();void 0!==f.venue?a.selectedVenue=f.venue:void 0!==f.show&&(a.search=a.shows[f.show].name);a.buildData()}]});
angular.module("fringeApp").component("venues",{templateUrl:"app/venues/venues.html",controller:["$scope","Data",function(a,b){a.distanceCalc={from:0,to:void 0,driving:""};a.getHostVenues=function(b){return Object.keys(a.venues).filter(function(c){return a.venues[c].host===b}).sort(function(b,c){return a.venues[b].name.localeCompareSmart(a.venues[c].name)})};var c=function(){if(a.distanceCalc.from&&a.distanceCalc.to){var b=[a.venueHosts[a.venues[a.distanceCalc.from.value].host].driving,a.venueHosts[a.venues[a.distanceCalc.to.value].host].driving],
c=["assumed","recommended","possible"];a.distanceCalc.driving="";for(var e=0;e<c.length;e++)if(-1<b.indexOf(c[e])){a.distanceCalc.driving=c[e];break}}};a.$watch("distanceCalc.from",c);a.$watch("distanceCalc.to",c);a.venues=b.getVenues();a.venueHosts=b.getVenueHosts();a.distances=b.getVenueDistances();a.venueOptions=Object.keys(a.venues).map(function(b){return{value:b,label:a.venues[b].name}}).sort(function(a,b){return a.label.localeCompareSmart(b.label)});for(a.distanceCalc.from=a.venueOptions.randomElement();void 0===
a.distanceCalc.to||a.distanceCalc.to===a.distanceCalc.from;)a.distanceCalc.to=a.venueOptions.randomElement()}]});
angular.module("fringeApp").component("test",{templateUrl:"app/test/test.html",controller:["$scope","UserData",function(a,b){function c(){this.workers={}}a.userData=b["export"]();a["import"]=function(c){c=angular.extend({},{preferences:[],unavailability:[],schedule:[],maybe:[],settings:{scheduleMode:"full",displaySchedulerStats:!0}},c);b["import"](JSON.stringify(c));a.userData=b["export"]()};a.testData={"New User":{settings:{scheduleMode:"full"}},"Preferences (all 1s)":{preferences:{1:1,2:1,4:1,5:1,
6:1,7:1,8:1,9:1,10:1,11:1,12:1,13:1,14:1,15:1,16:1,17:1,18:1,19:1,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:1,28:1,29:1,30:1,31:1,32:1,33:1,34:1,35:1,36:1,37:1,38:1,39:1,40:1,41:1,42:1,43:1,44:1,45:1,46:1,47:1,48:1,49:1,50:1,51:1,52:1,53:1,54:1,55:1,56:1,57:1,58:1,59:1,60:1,61:1,62:1,63:1,64:1,65:1,66:1,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:1,75:1,76:1,77:1,78:1,79:1,80:1,81:1,82:1,83:1,84:1,85:1,86:1,87:1,88:1,89:1,90:1,91:1,92:1,93:1,94:1,95:1,96:1,97:1,98:1,99:1,100:1,101:1,102:1,103:1,104:1,105:1,
106:1,107:1,108:1,109:1,110:1,111:1,112:1,113:1,114:1,115:1,116:1,117:1,118:1,119:1,120:1,121:1,122:1,123:1,124:1,125:1,126:1,127:1,128:1,129:1,130:1,131:1,132:1,133:1,134:1,135:1,136:1,137:1,138:1,139:1,140:1,141:1,142:1,143:1,144:1,145:1,146:1,147:1,148:1,149:1,150:1,151:1,152:1,153:1,154:1,155:1,156:1,157:1,158:1,159:1,160:1,161:1,162:1,163:1,186:1},settings:{autoScheduleIntroComplete:!0,scheduleMode:"full",displaySchedulerStats:!0}},Preferences:{preferences:{1:1,2:4,4:2,6:3,7:4,8:4,9:2,10:3,12:4,
15:4,22:3,27:1,28:2,29:3,32:3,33:2,34:1,35:2,41:2,46:4,47:3,50:4,51:3,54:3,63:2,68:2,70:3,71:1,72:1,73:4,74:4,77:2,80:1,82:2,83:3,84:4,86:4,87:3,90:4,98:1,99:3,100:2,102:2,103:3,104:2,105:3,106:4,107:1,111:2,112:4,114:2,117:4,119:4,122:4,123:1,126:3,127:2,128:4,129:3,130:4,131:3,138:3,140:1,142:1,146:2,149:1,151:1,153:2,155:4,159:1,186:4},settings:{autoScheduleIntroComplete:!0,scheduleMode:"full",displaySchedulerStats:!0}},Availability:{},Schedule:{schedule:"715 549 515 817 923 531 451 932".split(" "),
settings:{autoScheduleIntroComplete:!0,scheduleMode:"full",displaySchedulerStats:!0}},"Preferences and Schedule":{preferences:{1:1,2:4,4:2,6:3,7:4,8:4,9:2,10:3,12:4,15:4,22:3,27:1,28:2,29:3,32:3,33:2,34:1,35:2,41:2,46:4,47:3,50:4,51:3,54:3,63:2,68:2,70:3,71:1,72:1,73:4,74:4,77:2,80:1,82:2,83:3,84:4,86:4,87:3,90:4,98:1,99:3,100:2,102:2,103:3,104:2,105:3,106:4,107:1,111:2,112:4,114:2,117:4,119:4,122:4,123:1,126:3,127:2,128:4,129:3,130:4,131:3,138:3,140:1,142:1,146:2,149:1,151:1,153:2,155:4,159:1,186:4},
schedule:"715 549 515 817 923 531 451 932".split(" "),settings:{autoScheduleIntroComplete:!0,scheduleMode:"full",displaySchedulerStats:!0}},"Preferences and Schedule (Full)":{preferences:{1:1,2:4,4:2,6:3,7:4,8:4,9:2,10:3,12:4,15:4,22:3,27:1,28:2,29:3,32:3,33:2,34:1,35:2,41:2,46:4,47:3,50:4,51:3,54:3,63:2,68:2,70:3,71:1,72:1,73:4,74:4,77:2,80:1,82:2,83:3,84:4,86:4,87:3,90:4,98:1,99:3,100:2,102:2,103:3,104:2,105:3,106:4,107:1,111:2,112:4,114:2,117:4,119:4,122:4,123:1,126:3,127:2,128:4,129:3,130:4,131:3,
138:3,140:1,142:1,146:2,149:1,151:1,153:2,155:4,159:1,186:4},schedule:"1 2 3 55 187 211 245 291 438 465 549 594 705 745 811 419 795 265 883 378 901 824 817 31 260 489 898 639 727 756 664 113 808 534 916 183 43 501 156 657 19 195 923 508 74 683 785 515 852 864 875 778 288 715 40 635 678 672 235 927 316 165 531 28 653 430 145 412 330 437 805 451 932".split(" "),settings:{autoScheduleIntroComplete:!0,scheduleMode:"full",displaySchedulerStats:!0}}};c.prototype.add=function(a,b){var c=this;(this.workers[a]=
new Worker(b)).onmessage=function(b){c._onmessage(a,b)};return this};c.prototype.send=function(a,b,c,d){this.workers[a].postMessage([d,b,null===c||"string"===typeof c?c:JSON.stringify(c)]);return this};c.prototype._onmessage=function(a,b){var c=b.data[0];if("send"===c)this.send(b.data[1],b.data[2],b.data[3]||null,a);else if("respond"===c)this.onmessage(b.data[1]&&JSON.parse(b.data[1])||null)};c.prototype.terminate=function(){for(var a in this.workers)this.workers.hasOwnProperty(a)&&this.workers[a].terminate()};
var d=new c;d.onmessage=function(a){console.log(a);d.terminate()};d.add("core","/app/test/autoScheduler/core.js");d.add("fitness1","/app/test/autoScheduler/fitness.js");d.add("fitness2","/app/test/autoScheduler/fitness.js");for(var f={a:123,b:!0,c:"test",d:[1,2]},e=0;1E4>e;e++)f.d.push(e);d.send("core","start",f)}]});
