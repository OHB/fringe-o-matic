var Genetic=function(){function a(){this.crossover=this.mutate=this.seed=this.fitness=null;this.select1=function(a){this.internalGenState.rlr=this.internalGenState.rlr||0;return a[Math.floor(Math.random()*Math.min(a.length,this.internalGenState.rlr++))].entity};this.select2=function(a){return[this.select1(a),this.select1(a)]};this.optimize=function(a,b){return a>=b};this.notification=this.generation=null;this.configuration={size:250,crossover:.9,mutation:.2,iterations:100,fittestAlwaysSurvives:!0,
maxResults:1,skip:0};this.userData={};this.internalGenState={};this.entities=[];this.start=function(){function a(a){return Math.random()<=g.configuration.mutation&&g.mutate?g.mutate(a):a}var b,g=this;for(b=0;b<this.configuration.size;++b)this.entities.push(this.seed());for(b=0;b<this.configuration.iterations;++b){this.internalGenState={};var d=this.entities.map(function(a){return{fitness:g.fitness(a),entity:a}}).sort(function(a,b){return g.optimize(a.fitness,b.fitness)?-1:1}),h={maximum:d[0].fitness,
minimum:d[d.length-1].fitness},l=this.generation?this.generation(d.slice(0,this.configuration.maxResults),b,h):!0;l="undefined"!==typeof l&&!l||b===this.configuration.iterations-1;this.notification&&(l||0===this.configuration.skip||0==b%this.configuration.skip)&&this.sendNotification(d.slice(0,this.configuration.maxResults),b,h,l);if(l)break;h=[];for(this.configuration.fittestAlwaysSurvives&&h.push(d[0].entity);h.length<g.configuration.size;)this.crossover&&Math.random()<=this.configuration.crossover&&
h.length+1<g.configuration.size?(l=this.select2(d),l=this.crossover(l[0],l[1]).map(a),h.push(l[0],l[1])):h.push(a(g.select1(d)));this.entities=h}};this.sendNotification=function(a,b,d,e){postMessage({best:a[0],generation:b,stats:d,isFinished:e})}}var b={stringify:function(a){return JSON.stringify(a,function(a,b){return b instanceof Function||"function"===typeof b?"__func__:"+b.toString():b instanceof RegExp?"__regex__:"+b:b})},parse:function(a){return JSON.parse(a,function(a,b){return"string"!==typeof b?
b:0===b.lastIndexOf("__func__:",0)?eval("("+b.slice(9)+")"):0===b.lastIndexOf("__regex__:",0)?eval("("+b.slice(10)+")"):b})}},d=function(a){return null===a||"object"!==typeof a?a:JSON.parse(JSON.stringify(a))};a.prototype.evolve=function(a,f){for(var c in a)this.configuration[c]=a[c];for(c in f)this.userData[c]=f[c];c="var Serialization = {'stringify': "+b.stringify.toString()+", 'parse': "+b.parse.toString()+"};\n";c+="var Clone = "+d.toString()+";\n";c+='var genetic = Serialization.parse("'+b.stringify(this).replace(/[\\"']/g,
"\\$&").replace(/\u0000/g,"\\0")+'");\n';var e=this;c=new Blob([c+"onmessage = function(e) { genetic.start(); }\n"]);this.worker=new Worker(window.URL.createObjectURL(c));this.worker.onmessage=function(a){a=a.data;e.notification(a.best,a.generation,a.stats,a.isFinished)};this.worker.postMessage("")};a.prototype.stop=function(){this.worker.terminate()};return{create:function(){return new a},Clone:d}}();
!function(a,b){"object"==typeof exports?module.exports=b(require("angular")):"function"==typeof define&&define.amd?define(["angular"],b):b(a.angular)}(this,function(a){return a.module("ngMap",[]),function(){var b,d=function(d,f,g,e,h,l,m,n,k){b=l;var c=this,p=h.startSymbol(),t=h.endSymbol();c.mapOptions;c.mapEvents;c.eventListeners;c.addObject=function(a,b){if(c.map){c.map[a]=c.map[a]||{};var k=Object.keys(c.map[a]).length;c.map[a][b.id||k]=b;c.map instanceof google.maps.Map&&("infoWindows"!=a&&b.setMap&&
b.setMap&&b.setMap(c.map),b.centered&&b.position&&c.map.setCenter(b.position),"markers"==a&&c.objectChanged("markers"),"customMarkers"==a&&c.objectChanged("customMarkers"))}};c.deleteObject=function(a,b){if(b.map){var k=b.map[a],d;for(d in k)k[d]===b&&(google.maps.event.clearInstanceListeners(b),delete k[d]);b.map&&b.setMap&&b.setMap(null);"markers"==a&&c.objectChanged("markers");"customMarkers"==a&&c.objectChanged("customMarkers")}};c.observeAttrSetObj=function(a,c,k){if(c.noWatcher)return!1;a=b.getAttrsToObserve(a);
for(var d=0;d<a.length;d++){var f=a[d];c.$observe(f,m.observeAndSet(f,k))}};c.zoomToIncludeMarkers=function(){if(null!=c.map.markers&&0<Object.keys(c.map.markers).length||null!=c.map.customMarkers&&0<Object.keys(c.map.customMarkers).length){var a=new google.maps.LatLngBounds,b;for(b in c.map.markers)a.extend(c.map.markers[b].getPosition());for(var k in c.map.customMarkers)a.extend(c.map.customMarkers[k].getPosition());c.mapOptions.maximumZoom&&(c.enableMaximumZoomCheck=!0);c.map.fitBounds(a)}};c.objectChanged=
function(a){!c.map||"markers"!=a&&"customMarkers"!=a||"auto"!=c.map.zoomToIncludeMarkers||c.zoomToIncludeMarkers()};c.initializeMap=function(){var h=c.mapOptions,l=c.mapEvents,r=c.map;if(c.map=n.getMapInstance(f[0]),m.setStyle(f[0]),r){var v=b.filter(g),y=b.getOptions(v);v=b.getControlOptions(v);h=a.extend(y,v);for(var C in r)if(y=r[C],"object"==typeof y)for(var z in y)c.addObject(C,y[z]);c.map.showInfoWindow=c.showInfoWindow;c.map.hideInfoWindow=c.hideInfoWindow}h.zoom=h.zoom&&!isNaN(h.zoom)?+h.zoom:
15;r=h.center;C=new RegExp(k(p)+".*"+k(t));!h.center||"string"==typeof r&&r.match(C)?h.center=new google.maps.LatLng(0,0):"string"==typeof r&&r.match(/^[0-9.-]*,[0-9.-]*$/)?(C=parseFloat(r.split(",")[0]),r=parseFloat(r.split(",")[1]),h.center=new google.maps.LatLng(C,r)):r instanceof google.maps.LatLng||(r=h.center,delete h.center,m.getGeoLocation(r,h.geoLocationOptions).then(function(a){c.map.setCenter(a);(a=h.geoCallback)&&e(a)(d)},function(){h.geoFallbackCenter&&c.map.setCenter(h.geoFallbackCenter)}));
c.map.setOptions(h);for(var A in l)r=google.maps.event.addListener(c.map,A,l[A]),c.eventListeners[A]=r;c.observeAttrSetObj(q,g,c.map);c.singleInfoWindow=h.singleInfoWindow;google.maps.event.trigger(c.map,"resize");google.maps.event.addListenerOnce(c.map,"idle",function(){m.addMap(c);h.zoomToIncludeMarkers&&c.zoomToIncludeMarkers();d.map=c.map;d.$emit("mapInitialized",c.map);g.mapInitialized&&e(g.mapInitialized)(d,{map:c.map})});h.zoomToIncludeMarkers&&h.maximumZoom&&google.maps.event.addListener(c.map,
"zoom_changed",function(){1==c.enableMaximumZoomCheck&&(c.enableMaximumZoomCheck=!1,google.maps.event.addListenerOnce(c.map,"bounds_changed",function(){c.map.setZoom(Math.min(h.maximumZoom,c.map.getZoom()))}))})};d.google=google;var q=b.orgAttributes(f);l=b.filter(g);h=b.getOptions(l,{scope:d});var v=b.getControlOptions(l);v=a.extend(h,v);l=b.getEvents(d,l);(Object.keys(l).length&&void 0,c.mapOptions=v,c.mapEvents=l,c.eventListeners={},h.lazyInit)?(g.id&&0===g.id.indexOf(p,0)&&-1!==g.id.indexOf(t,
g.id.length-t.length)?(l=g.id.slice(2,-2),l=e(l)(d)):l=g.id,c.map={id:l},m.addMap(c)):c.initializeMap();h.triggerResize&&google.maps.event.trigger(c.map,"resize");f.bind("$destroy",function(){n.returnMapInstance(c.map);m.deleteMap(c)})};d.$inject="$scope $element $attrs $parse $interpolate Attr2MapOptions NgMap NgMapPool escapeRegexpFilter".split(" ");a.module("ngMap").controller("__MapController",d)}(),function(){var b,d=function(a,d,f,l){l=l[0]||l[1];var e=b.orgAttributes(d),g=b.filter(f),k=b.getOptions(g,
{scope:a});a=b.getEvents(a,g);var h=c(k,a);l.addObject("bicyclingLayers",h);l.observeAttrSetObj(e,f,h);d.bind("$destroy",function(){l.deleteObject("bicyclingLayers",h)})},c=function(a,b){var c=new google.maps.BicyclingLayer(a),d;for(d in b)google.maps.event.addListener(c,d,b[d]);return c},f=function(a){return b=a,{restrict:"E",require:["?^map","?^ngMap"],link:d}};f.$inject=["Attr2MapOptions"];a.module("ngMap").directive("bicyclingLayer",f)}(),function(){var b,d=function(a,c,d,h,l){h=h[0]||h[1];var f=
b.filter(d);d=b.getOptions(f,{scope:a});f=b.getEvents(a,f);var e=a.$new(),k=c[0].parentElement.removeChild(c[0]);l(e,function(a){c.empty();c.append(a);c.on("$destroy",function(){e.$destroy()})});for(var g in f)google.maps.event.addDomListener(k,g,f[g]);h.addObject("customControls",k);h.map.controls[google.maps.ControlPosition[d.position]].push(k);c.bind("$destroy",function(){h.deleteObject("customControls",k)})},c=function(a,c){return b=a,{restrict:"E",require:["?^map","?^ngMap"],link:d,transclude:!0}};
c.$inject=["Attr2MapOptions","NgMap"];a.module("ngMap").directive("customControl",c)}(),function(){var b,d,c,f,g=function(){for(var a=["transform","WebkitTransform","MozTransform","OTransform","msTransform"],b=document.createElement("div"),c=0;c<a.length;c++)if(b&&void 0!==b.style[a[c]])return a[c];return!1}(),e=function(a){a=a||{};this.el=document.createElement("div");this.el.style.display="block";this.el.style.visibility="hidden";this.visible=!0;for(var b in a)this[b]=a[b]},h=function(){e.prototype=
new google.maps.OverlayView;e.prototype.setContent=function(b,d){this.el.innerHTML=b;this.el.style.position="absolute";this.el.style.top=0;this.el.style.left=0;d&&c(a.element(this.el).contents())(d)};e.prototype.getDraggable=function(){return this.draggable};e.prototype.setDraggable=function(a){this.draggable=a};e.prototype.getPosition=function(){return this.position};e.prototype.setPosition=function(a){a&&(this.position=a);var b=this;this.getProjection()&&"function"==typeof this.position.lng&&(a=
function(){if(b.getProjection()){var a=b.getProjection().fromLatLngToDivPixel(b.position),c=Math.round(a.x-b.el.offsetWidth/2);a=Math.round(a.y-b.el.offsetHeight-10);g?b.el.style[g]="translate("+c+"px, "+a+"px)":(b.el.style.left=c+"px",b.el.style.top=a+"px");b.el.style.visibility="visible"}},b.el.offsetWidth&&b.el.offsetHeight?a():d(a,300))};e.prototype.setZIndex=function(a){void 0!==a&&(this.zIndex!==a&&(this.zIndex=a),this.el.style.zIndex!==this.zIndex&&(this.el.style.zIndex=this.zIndex))};e.prototype.getVisible=
function(){return this.visible};e.prototype.setVisible=function(a){"none"===this.el.style.display&&a?this.el.style.display="block":"none"===this.el.style.display||a||(this.el.style.display="none");this.visible=a};e.prototype.addClass=function(a){var b=this.el.className.trim().split(" ");-1==b.indexOf(a)&&b.push(a);this.el.className=b.join(" ")};e.prototype.removeClass=function(a){var b=this.el.className.split(" ");a=b.indexOf(a);-1<a&&b.splice(a,1);this.el.className=b.join(" ")};e.prototype.onAdd=
function(){this.getPanes().overlayMouseTarget.appendChild(this.el)};e.prototype.draw=function(){this.setPosition();this.setZIndex(this.zIndex);this.setVisible(this.visible)};e.prototype.onRemove=function(){this.el.parentNode.removeChild(this.el)}},l=function(a,c){return function(d,k,g,h){h=h[0]||h[1];var m=b.orgAttributes(k),l=b.filter(g),p=b.getOptions(l,{scope:d});l=b.getEvents(d,l);k[0].style.display="none";var n=new e(p);setTimeout(function(){d.$watch("["+c.join(",")+"]",function(){n.setContent(a,
d)},!0);n.setContent(k[0].innerHTML,d);var b=k[0].firstElementChild&&(k[0].firstElementChild.className||"");n["class"]&&(b+=" "+n["class"]);n.addClass("custom-marker");b&&n.addClass(b);p.position instanceof google.maps.LatLng||f.getGeoLocation(p.position).then(function(a){n.setPosition(a)})});for(var t in l)google.maps.event.addDomListener(n.el,t,l[t]);h.addObject("customMarkers",n);h.observeAttrSetObj(m,g,n);k.bind("$destroy",function(){h.deleteObject("customMarkers",n)})}},m=function(a,k,e,g,m,
q){b=g;d=a;c=k;f=m;var n=e.startSymbol(),p=e.endSymbol(),t=new RegExp(q(n)+"([^"+p.substring(0,1)+"]+)"+q(p),"g");return{restrict:"E",require:["?^map","?^ngMap"],compile:function(a){h();a[0].style.display="none";a=a.html();var b=[];return(a.match(t)||[]).forEach(function(a){var c=a.replace(n,"").replace(p,"");-1==a.indexOf("::")&&-1==a.indexOf("this.")&&-1==b.indexOf(c)&&b.push(a.replace(n,"").replace(p,""))}),l(a,b)}}};m.$inject="$timeout $compile $interpolate Attr2MapOptions NgMap escapeRegexpFilter".split(" ");
a.module("ngMap").directive("customMarker",m)}(),function(){var b,d,c,f,g,e=function(a,b){a.panel&&(a.panel=document.getElementById(a.panel)||document.querySelector(a.panel));var c=new google.maps.DirectionsRenderer(a),d;for(d in b)google.maps.event.addListener(c,d,b[d]);return c},h=function(a,b){var k=new google.maps.DirectionsService;b.travelMode=b.travelMode||"DRIVING";var e="origin destination travelMode transitOptions unitSystem durationInTraffic waypoints optimizeWaypoints provideRouteAlternatives avoidHighways avoidTolls region".split(" ");
if(b)for(var h in b)b.hasOwnProperty(h)&&-1===e.indexOf(h)&&delete b[h];b.waypoints&&(Array.isArray(b.waypoints)||delete b.waypoints);var m=function(b){if(f&&b)if(g)for(var c in b)b.hasOwnProperty(c)&&(g[c]=b[c]);else g=b;else f=d(function(){g||(g=b);k.route(g,function(b,c){c==google.maps.DirectionsStatus.OK&&(a.setDirections(b),g=void 0)});d.cancel(f);f=void 0},20)};b&&b.origin&&b.destination&&("current-location"==b.origin?c.getCurrentPosition().then(function(a){b.origin=new google.maps.LatLng(a.coords.latitude,
a.coords.longitude);m(b)}):"current-location"==b.destination?c.getCurrentPosition().then(function(a){b.destination=new google.maps.LatLng(a.coords.latitude,a.coords.longitude);m(b)}):m(b))},l=function(a,f,k,g){b=g;d=f;c=k;return{restrict:"E",require:["?^map","?^ngMap"],link:function(c,k,f,g){g=g[0]||g[1];var m=a.orgAttributes(k),l=a.filter(f),p=a.getOptions(l,{scope:c});c=a.getEvents(c,l);var n=a.getAttrsToObserve(m);n=[];l.noWatcher||(n=a.getAttrsToObserve(m));var t=e(p,c);g.addObject("directionsRenderers",
t);n.forEach(function(b){!function(b){f.$observe(b,function(c){if("panel"==b)d(function(){var a=document.getElementById(c)||document.querySelector(c);a&&t.setPanel(a)});else if(p[b]!==c){var k=a.toOptionValue(c,{key:b});p[b]=k;h(t,p)}})}(b)});b.getMap().then(function(){h(t,p)});k.bind("$destroy",function(){g.deleteObject("directionsRenderers",t)})}}};l.$inject=["Attr2MapOptions","$timeout","NavigatorGeolocation","NgMap"];a.module("ngMap").directive("directions",l)}(),function(){a.module("ngMap").directive("drawingManager",
["Attr2MapOptions",function(a){return{restrict:"E",require:["?^map","?^ngMap"],link:function(b,c,f,g){g=g[0]||g[1];var d=a.filter(f),h=a.getOptions(d,{scope:b}),l=a.getControlOptions(d);b=a.getEvents(b,d);var m=new google.maps.drawing.DrawingManager({drawingMode:h.drawingmode,drawingControl:h.drawingcontrol,drawingControlOptions:l.drawingControlOptions,circleOptions:h.circleoptions,markerOptions:h.markeroptions,polygonOptions:h.polygonoptions,polylineOptions:h.polylineoptions,rectangleOptions:h.rectangleoptions});
f.$observe("drawingControlOptions",function(b){m.drawingControlOptions=a.getControlOptions({drawingControlOptions:b}).drawingControlOptions;m.setDrawingMode(null);m.setMap(g.map)});for(var n in b)google.maps.event.addListener(m,n,b[n]);g.addObject("mapDrawingManager",m);c.bind("$destroy",function(){g.deleteObject("mapDrawingManager",m)})}}}])}(),function(){a.module("ngMap").directive("dynamicMapsEngineLayer",["Attr2MapOptions",function(a){return{restrict:"E",require:["?^map","?^ngMap"],link:function(b,
c,f,g){g=g[0]||g[1];f=a.filter(f);c=a.getOptions(f,{scope:b});var d=a.getEvents(b,f,d);b=d;d=new google.maps.visualization.DynamicMapsEngineLayer(c);for(var h in b)google.maps.event.addListener(d,h,b[h]);g.addObject("mapsEngineLayers",d)}}}])}(),function(){a.module("ngMap").directive("fusionTablesLayer",["Attr2MapOptions",function(a){var b=function(a,b){var c=new google.maps.FusionTablesLayer(a),d;for(d in b)google.maps.event.addListener(c,d,b[d]);return c};return{restrict:"E",require:["?^map","?^ngMap"],
link:function(c,d,g,e){e=e[0]||e[1];g=a.filter(g);var f=a.getOptions(g,{scope:c}),l=a.getEvents(c,g,l),m=b(f,l);e.addObject("fusionTablesLayers",m);d.bind("$destroy",function(){e.deleteObject("fusionTablesLayers",m)})}}}])}(),function(){a.module("ngMap").directive("heatmapLayer",["Attr2MapOptions","$window",function(a,d){return{restrict:"E",require:["?^map","?^ngMap"],link:function(b,f,g,e){function c(a,b){return a.split(".").reduce(function(a,b){return a[b]},b||this)}e=e[0]||e[1];f=a.filter(g);var l=
a.getOptions(f,{scope:b});if(l.data=d[g.data]||c(g.data,b),!(l.data instanceof Array))throw"invalid heatmap data";l.data=new google.maps.MVCArray(l.data);g=new google.maps.visualization.HeatmapLayer(l);a.getEvents(b,f);e.addObject("heatmapLayers",g)}}}])}(),function(){var b=function(b,c,f,g,e,h,l){var d=function(b,d,h){!b.position||b.position instanceof google.maps.LatLng||delete b.position;var k=new google.maps.InfoWindow(b);for(var m in d)m&&google.maps.event.addListener(k,m,d[m]);var l=f(function(b){a.isString(h)?
g(h).then(function(c){b(a.element(c).wrap("<div>").parent())},function(a){throw"info-window template request failed: "+a;}):b(h)}).then(function(b){b=b.html().trim();if(1!=a.element(b).length)throw"info-window working as a template must have a container";k.__template=b.replace(/\s?ng-non-bindable[='"]+/,"")});return k.__open=function(a,b,d){l.then(function(){e(function(){d&&(b.anchor=d);var f=c(k.__template)(b);k.setContent(f[0]);b.$apply();d&&d.getPosition?k.open(a,d):d&&d instanceof google.maps.LatLng?
(k.open(a),k.setPosition(d)):k.open(a);k.content.parentElement.parentElement.parentElement.className="ng-map-info-window"})})},k};return{restrict:"E",require:["?^map","?^ngMap"],link:function(a,c,f,e){e=e[0]||e[1];c.css("display","none");var k,g=b.orgAttributes(c),m=b.filter(f),n=b.getOptions(m,{scope:a});m=b.getEvents(a,m);var p=d(n,m,n.template||c);!n.position||n.position instanceof google.maps.LatLng||(k=n.position);k&&l.getGeoLocation(k).then(function(b){p.setPosition(b);p.__open(e.map,a,b);(b=
f.geoCallback)&&h(b)(a)});e.addObject("infoWindows",p);e.observeAttrSetObj(g,f,p);e.showInfoWindow=e.map.showInfoWindow=e.showInfoWindow||function(b,c,d){var k="string"==typeof b?b:c;b="string"==typeof b?c:d;if("string"==typeof b)if("undefined"!=typeof e.map.markers&&"undefined"!=typeof e.map.markers[b])b=e.map.markers[b];else{if("undefined"==typeof e.map.customMarkers||"undefined"==typeof e.map.customMarkers[b])throw Error("Cant open info window for id "+b+". Marker or CustomMarker is not defined");
b=e.map.customMarkers[b]}e.map.infoWindows[k].__open(e.map,a,b?b:this.getPosition?this:null);e.singleInfoWindow&&(e.lastInfoWindow&&a.hideInfoWindow(e.lastInfoWindow),e.lastInfoWindow=k)};e.hideInfoWindow=e.map.hideInfoWindow=e.hideInfoWindow||function(a,b){e.map.infoWindows["string"==typeof a?a:b].close()};a.showInfoWindow=e.map.showInfoWindow;a.hideInfoWindow=e.map.hideInfoWindow;l.getMap(p.mapId?{id:p.mapId}:0).then(function(b){(p.visible&&p.__open(b,a),p.visibleOnMarker)&&p.__open(b,a,b.markers[p.visibleOnMarker])})}}};
b.$inject="Attr2MapOptions $compile $q $templateRequest $timeout $parse NgMap".split(" ");a.module("ngMap").directive("infoWindow",b)}(),function(){a.module("ngMap").directive("kmlLayer",["Attr2MapOptions",function(a){var b=function(a,b){var c=new google.maps.KmlLayer(a),d;for(d in b)google.maps.event.addListener(c,d,b[d]);return c};return{restrict:"E",require:["?^map","?^ngMap"],link:function(c,d,g,e){e=e[0]||e[1];var f=a.orgAttributes(d),l=a.filter(g),m=a.getOptions(l,{scope:c});c=a.getEvents(c,
l);var n=b(m,c);e.addObject("kmlLayers",n);e.observeAttrSetObj(f,g,n);d.bind("$destroy",function(){e.deleteObject("kmlLayers",n)})}}}])}(),function(){a.module("ngMap").directive("mapData",["Attr2MapOptions","NgMap",function(a,d){return{restrict:"E",require:["?^map","?^ngMap"],link:function(b,f,g,e){e=e[0]||e[1];f=a.filter(g);var c=a.getOptions(f,{scope:b}),l=a.getEvents(b,f,l);d.getMap(e.map.id).then(function(a){for(var d in c){var k=c[d];"function"==typeof b[k]?a.data[d](b[k]):a.data[d](k)}for(var f in l)a.data.addListener(f,
l[f])})}}}])}(),function(){var b,d,c=[],f=[],g=function(a,e,g){g=g.mapLazyLoadParams||g.mapLazyLoad;void 0===window.google||void 0===window.google.maps?(f.push({scope:a,element:e,savedHtml:c[f.length]}),window.lazyLoadCallback=function(){b(function(){f.forEach(function(a){a.element.html(a.savedHtml);d(a.element.contents())(a.scope)})},100)},a=document.createElement("script"),a.src=g+(-1<g.indexOf("?")?"&":"?")+"callback=lazyLoadCallback",document.querySelector('script[src="'+a.src+'"]')||document.body.appendChild(a)):
(e.html(c),d(e.contents())(a))},e=function(a,b){return!b.mapLazyLoad&&void 0,c.push(a.html()),void 0!==window.google&&void 0!==window.google.maps?!1:(a.html(""),{pre:g})},h=function(a,c){return d=a,b=c,{compile:e}};h.$inject=["$compile","$timeout"];a.module("ngMap").directive("mapLazyLoad",h)}(),function(){a.module("ngMap").directive("mapType",["$parse","NgMap",function(a,d){return{restrict:"E",require:["?^map","?^ngMap"],link:function(b,f,g,e){e=e[0]||e[1];var c,l=g.name;if(!l)throw"invalid map-type name";
if(c=a(g.object)(b),!c)throw"invalid map-type object";d.getMap().then(function(a){a.mapTypes.set(l,c)});e.addObject("mapTypes",c)}}}])}(),function(){var b=function(){return{restrict:"AE",controller:"__MapController",controllerAs:"ngmap"}};a.module("ngMap").directive("map",[b]);a.module("ngMap").directive("ngMap",[b])}(),function(){a.module("ngMap").directive("mapsEngineLayer",["Attr2MapOptions",function(a){return{restrict:"E",require:["?^map","?^ngMap"],link:function(b,c,f,g){g=g[0]||g[1];f=a.filter(f);
c=a.getOptions(f,{scope:b});var d=a.getEvents(b,f,d);b=d;d=new google.maps.visualization.MapsEngineLayer(c);for(var h in b)google.maps.event.addListener(d,h,b[h]);g.addObject("mapsEngineLayers",d)}}}])}(),function(){var b,d,c,f=function(a,b){if(c.defaultOptions.marker)for(d in c.defaultOptions.marker)"undefined"==typeof a[d]&&(a[d]=c.defaultOptions.marker[d]);a.position instanceof google.maps.LatLng||(a.position=new google.maps.LatLng(0,0));var d=new google.maps.Marker(a);0<Object.keys(b).length;
for(var f in b)f&&google.maps.event.addListener(d,f,b[f]);return d},g=function(a,e,g,n){n=n[0]||n[1];var k,h=b.orgAttributes(e),m=b.filter(g),l=b.getOptions(m,a,{scope:a});m=b.getEvents(a,m);l.position instanceof google.maps.LatLng||(k=l.position);var q=f(l,m);n.addObject("markers",q);k&&c.getGeoLocation(k).then(function(b){q.setPosition(b);l.centered&&q.map.setCenter(b);(b=g.geoCallback)&&d(b)(a)});n.observeAttrSetObj(h,g,q);e.bind("$destroy",function(){n.deleteObject("markers",q)})},e=function(a,
f,e){return b=a,d=f,c=e,{restrict:"E",require:["^?map","?^ngMap"],link:g}};e.$inject=["Attr2MapOptions","$parse","NgMap"];a.module("ngMap").directive("marker",e)}(),function(){a.module("ngMap").directive("overlayMapType",["NgMap",function(a){return{restrict:"E",require:["?^map","?^ngMap"],link:function(b,c,f,g){g=g[0]||g[1];var d=f.initMethod||"insertAt",h=b[f.object];a.getMap().then(function(a){if("insertAt"==d){var b=parseInt(f.index,10);a.overlayMapTypes.insertAt(b,h)}else"push"==d&&a.overlayMapTypes.push(h)});
g.addObject("overlayMapTypes",h)}}}])}(),function(){var b=function(a,b){return{restrict:"A",require:"?ngModel",link:function(c,d,e,h){if("false"===e.placesAutoComplete)return!1;var f=a.filter(e),g=a.getOptions(f,{scope:c});f=a.getEvents(c,f);var n=new google.maps.places.Autocomplete(d[0],g);n.setOptions({strictBounds:!0===g.strictBounds});for(var k in f)google.maps.event.addListener(n,k,f[k]);g=function(){b(function(){h&&h.$setViewValue(d.val())},100)};google.maps.event.addListener(n,"place_changed",
g);d[0].addEventListener("change",g);e.$observe("rectBounds",function(b){b&&(b=a.toOptionValue(b,{key:"rectBounds"}),n.setBounds(new google.maps.LatLngBounds(new google.maps.LatLng(b.south_west.lat,b.south_west.lng),new google.maps.LatLng(b.north_east.lat,b.north_east.lng))))});e.$observe("circleBounds",function(b){b&&(b=a.toOptionValue(b,{key:"circleBounds"}),b=new google.maps.Circle(b),n.setBounds(b.getBounds()))});e.$observe("types",function(b){b&&(b=a.toOptionValue(b,{key:"types"}),n.setTypes(b))});
e.$observe("componentRestrictions",function(a){a&&n.setComponentRestrictions(c.$eval(a))})}}};b.$inject=["Attr2MapOptions","$timeout"];a.module("ngMap").directive("placesAutoComplete",b)}(),function(){var b=function(a,b){var c=a.name;switch(delete a.name,c){case "circle":a.center instanceof google.maps.LatLng||(a.center=new google.maps.LatLng(0,0));var d=new google.maps.Circle(a);break;case "polygon":d=new google.maps.Polygon(a);break;case "polyline":d=new google.maps.Polyline(a);break;case "rectangle":d=
new google.maps.Rectangle(a);break;case "groundOverlay":case "image":d=new google.maps.GroundOverlay(a.url,a.bounds,{opacity:a.opacity,clickable:a.clickable,id:a.id})}for(var f in b)b[f]&&google.maps.event.addListener(d,f,b[f]);return d},d=function(a,d,g){return{restrict:"E",require:["?^map","?^ngMap"],link:function(c,f,l,m){m=m[0]||m[1];var e,k=a.orgAttributes(f);var h=a.filter(l);var p=a.getOptions(h,{scope:c}),t=a.getEvents(c,h);h=p.name;p.center instanceof google.maps.LatLng||(e=p.center);var q=
b(p,t);m.addObject("shapes",q);e&&"circle"==h&&g.getGeoLocation(e).then(function(a){q.setCenter(a);q.centered&&q.map.setCenter(a);(a=l.geoCallback)&&d(a)(c)});m.observeAttrSetObj(k,l,q);f.bind("$destroy",function(){m.deleteObject("shapes",q)})}}};d.$inject=["Attr2MapOptions","$parse","NgMap"];a.module("ngMap").directive("shape",d)}(),function(){var b=function(b,c){var d=function(a,b,c){var d,f;b.container&&(f=document.getElementById(b.container),f=f||document.querySelector(b.container));f?d=new google.maps.StreetViewPanorama(f,
b):(d=a.getStreetView(),d.setOptions(b));for(var e in c)e&&google.maps.event.addListener(d,e,c[e]);return d};return{restrict:"E",require:["?^map","?^ngMap"],link:function(f,e,h){e=b.filter(h);h=b.getOptions(e,{scope:f});var g=b.getControlOptions(e),m=a.extend(h,g),n=b.getEvents(f,e);c.getMap().then(function(a){var b=d(a,m,n);a.setStreetView(b);!b.getPosition()&&b.setPosition(a.getCenter());google.maps.event.addListener(b,"position_changed",function(){b.getPosition()!==a.getCenter()&&a.setCenter(b.getPosition())});
var c=google.maps.event.addListener(a,"center_changed",function(){b.setPosition(a.getCenter());google.maps.event.removeListener(c)})})}}};b.$inject=["Attr2MapOptions","NgMap"];a.module("ngMap").directive("streetViewPanorama",b)}(),function(){a.module("ngMap").directive("trafficLayer",["Attr2MapOptions",function(a){var b=function(a,b){var c=new google.maps.TrafficLayer(a),d;for(d in b)google.maps.event.addListener(c,d,b[d]);return c};return{restrict:"E",require:["?^map","?^ngMap"],link:function(c,
d,g,e){e=e[0]||e[1];var f=a.orgAttributes(d),l=a.filter(g),m=a.getOptions(l,{scope:c});c=a.getEvents(c,l);var n=b(m,c);e.addObject("trafficLayers",n);e.observeAttrSetObj(f,g,n);d.bind("$destroy",function(){e.deleteObject("trafficLayers",n)})}}}])}(),function(){a.module("ngMap").directive("transitLayer",["Attr2MapOptions",function(a){var b=function(a,b){var c=new google.maps.TransitLayer(a),d;for(d in b)google.maps.event.addListener(c,d,b[d]);return c};return{restrict:"E",require:["?^map","?^ngMap"],
link:function(c,d,g,e){e=e[0]||e[1];var f=a.orgAttributes(d),l=a.filter(g),m=a.getOptions(l,{scope:c});c=a.getEvents(c,l);var n=b(m,c);e.addObject("transitLayers",n);e.observeAttrSetObj(f,g,n);d.bind("$destroy",function(){e.deleteObject("transitLayers",n)})}}}])}(),function(){var b=/([:\-_]+(.))/g,d=/^moz([A-Z])/;a.module("ngMap").filter("camelCase",function(){return function(a){return a.replace(b,function(a,b,c,d){return d?c.toUpperCase():c}).replace(d,"Moz$1")}})}(),function(){a.module("ngMap").filter("escapeRegexp",
function(){return function(a){return a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}})}(),function(){a.module("ngMap").filter("jsonize",function(){return function(a){try{return JSON.parse(a),a}catch(d){return a.replace(/([\$\w]+)\s*:/g,function(a,b){return'"'+b+'":'}).replace(/'([^']+)'/g,function(a,b){return'"'+b+'"'}).replace(/''/g,'""')}}})}(),function(){var b=/^(\d{4}\-\d\d\-\d\d([tT][\d:\.]*)?)([zZ]|([+\-])(\d\d):?(\d\d))?$/,d=function(a,d,g,e,h,l,m,n,k){var c=e.startSymbol(),f=e.endSymbol(),t=function(a){return a.match(/^[\+\-]?[0-9\.]+,[ ]* ?[\+\-]?[0-9\.]+$/)&&
(a="["+a+"]"),JSON.parse(n(a))},q=function(a){var b=a;if(a[0].constructor==Array)if(a[0][0].constructor==Array&&2==a[0][0].length||a[0][0].constructor==Object){for(var c=[],d=0;d<a.length;d++)b=a[d].map(function(a){return new google.maps.LatLng(a[0],a[1])}),c.push(b);b=c}else b=a.map(function(a){return new google.maps.LatLng(a[0],a[1])});else!isNaN(parseFloat(a[0]))&&isFinite(a[0])&&(b=new google.maps.LatLng(b[0],b[1]));return b},v=function(a,d){try{var e=getNumber(a)}catch(B){try{e=t(a),e instanceof
Array?e=e[0].constructor==Object?e:e[0]instanceof Array?e[0][0].constructor==Object?e:q(e):q(e):e===Object(e)&&(d.doNotConverStringToNumber=!0,e=w(e,d))}catch(D){if(a.match(/^[A-Z][a-zA-Z0-9]+\(.*\)$/))try{e=eval("new google.maps."+a)}catch(F){e=a}else if(a.match(/^([A-Z][a-zA-Z0-9]+)\.([A-Z]+)$/))try{var g=a.match(/^([A-Z][a-zA-Z0-9]+)\.([A-Z]+)$/);e=google.maps[g[1]][g[2]]}catch(F){e=a}else if(a.match(/^[A-Z]+$/))try{var h=d.key.charAt(0).toUpperCase()+d.key.slice(1);d.key.match(/temperatureUnit|windSpeedUnit|labelColor/)?
(h=h.replace(/s$/,""),e=google.maps.weather[h][a]):e=google.maps[h][a]}catch(F){e=a}else if(a.match(b))try{e=new Date(a)}catch(F){e=a}else if(a.match(new RegExp("^"+k(c)))&&d.scope)try{var m=a.replace(new RegExp(k(c)),"").replace(new RegExp(k(f),"g"),"");e=d.scope.$eval(m)}catch(F){e=a}else e=a}}if(("center"==d.key||"position"==d.key)&&e instanceof Array&&(e=new google.maps.LatLng(e[0],e[1])),"bounds"==d.key&&e instanceof Array&&(e=new google.maps.LatLngBounds(e[0],e[1])),"icons"==d.key&&e instanceof
Array)for(g=0;g<e.length;g++)h=e[g],h.icon.path.match(/^[A-Z_]+$/)&&(h.icon.path=google.maps.SymbolPath[h.icon.path]);if("icon"==d.key&&e instanceof Object){(""+e.path).match(/^[A-Z_]+$/)&&(e.path=google.maps.SymbolPath[e.path]);for(var l in e)g=e[l],"anchor"==l||"origin"==l||"labelOrigin"==l?e[l]=new google.maps.Point(g[0],g[1]):("size"==l||"scaledSize"==l)&&(e[l]=new google.maps.Size(g[0],g[1]))}return e},w=function(a,b){b=b||{};var c={},d;for(d in a)!a[d]&&0!==a[d]||d.match(/^on[A-Z]/)||d.match(/ControlOptions$/)||
(c[d]="string"!=typeof a[d]?a[d]:b.doNotConverStringToNumber&&a[d].match(/^[0-9]+$/)?a[d]:v(a[d],{key:d,scope:b.scope}));return c};return{filter:function(a){var b={},c;for(c in a)c.match(/^\$/)||c.match(/^ng[A-Z]/)||(b[c]=a[c]);return b},getOptions:w,getEvents:function(b,c){var e={},k=function(a){return"_"+a.toLowerCase()},f=function(c){c=c.match(/([^\(]+)\(([^\)]*)\)/);var e=c[1];c=c[2].replace(/event[ ,]*/,"");var k=a("["+c+"]");return function(a){var c=k(b),f=e.split(".").reduce(function(a,b){return a[b]},
b);f&&f.apply(this,[a].concat(c));d(function(){b.$apply()})}},g;for(g in c)if(c[g]&&g.match(/^on[A-Z]/)){var h=g.replace(/^on/,"");h=h.charAt(0).toLowerCase()+h.slice(1);h=h.replace(/([A-Z])/g,k);e[h]=new f(c[g])}return e},getControlOptions:function(a){var b={};if("object"!=typeof a)return!1;for(var c in a)if(a[c]&&c.match(/(.*)ControlOptions$/)){var d=a[c].replace(/'/g,'"');d=d.replace(/([^"]+)|("[^"]+")/g,function(a,b,c){return b?b.replace(/([a-zA-Z0-9]+?):/g,'"$1":'):c});try{var e=JSON.parse(d),
k;for(k in e)if(e[k]){var f=e[k];if("string"==typeof f?f=f.toUpperCase():"mapTypeIds"===k&&(f=f.map(function(a){return a.match(/^[A-Z]+$/)?google.maps.MapTypeId[a.toUpperCase()]:a})),"style"===k){var g=(c.charAt(0).toUpperCase()+c.slice(1)).replace(/Options$/,"")+"Style";e[k]=google.maps[g][f]}else e[k]="position"===k?google.maps.ControlPosition[f]:f}b[c]=e}catch(D){}}return b},toOptionValue:v,getAttrsToObserve:function(a){var b=[],d=new RegExp(k(c)+".*"+k(f),"g");if(!a.noWatcher)for(var e in a){var g=
a[e];g&&g.match(d)&&b.push(m(e))}return b},orgAttributes:function(a){0<a.length&&(a=a[0]);for(var b={},c=0;c<a.attributes.length;c++){var d=a.attributes[c];b[d.name]=d.value}return b}}};d.$inject="$parse $timeout $log $interpolate NavigatorGeolocation GeoCoder camelCaseFilter jsonizeFilter escapeRegexpFilter".split(" ");a.module("ngMap").service("Attr2MapOptions",d)}(),function(){var b,d=function(a){var c=b.defer();return(new google.maps.Geocoder).geocode(a,function(a,b){b==google.maps.GeocoderStatus.OK?
c.resolve(a):c.reject(b)}),c.promise},c=function(a){return b=a,{geocode:d}};c.$inject=["$q"];a.module("ngMap").service("GeoCoder",c)}(),function(){var b,d,c=function(a,c){return b=a,d=c,{load:function(a){var c=b.defer();if(void 0===window.google||void 0===window.google.maps){window.lazyLoadCallback=function(){d(function(){c.resolve(window.google)},100)};var e=document.createElement("script");e.src=a+(-1<a.indexOf("?")?"&":"?")+"callback=lazyLoadCallback";document.querySelector('script[src="'+e.src+
'"]')||document.body.appendChild(e)}else c.resolve(window.google);return c.promise}}};c.$inject=["$q","$timeout"];a.module("ngMap").service("GoogleMapsApi",c)}(),function(){var b,d=function(a){var c=b.defer();return navigator.geolocation?(void 0===a?a={timeout:5E3}:void 0===a.timeout&&(a.timeout=5E3),navigator.geolocation.getCurrentPosition(function(a){c.resolve(a)},function(a){c.reject(a)},a)):c.reject("Browser Geolocation service failed."),c.promise},c=function(a){return b=a,{getCurrentPosition:d}};
c.$inject=["$q"];a.module("ngMap").service("NavigatorGeolocation",c)}(),function(){var b,d,c,f=[],g=function(a){var c=d.createElement("div");c.style.width="100%";c.style.height="100%";a.appendChild(c);a=new b.google.maps.Map(c,{});return f.push(a),a},e=function(a,b){for(var c,d=0;d<f.length;d++){var e=f[d];if(e.id==b&&!e.inUse){c=e.getDiv();a.appendChild(c);c=e;break}}return c},h=function(a){for(var b,c=0;c<f.length;c++){var d=f[c];if(!d.id&&!d.inUse){b=d.getDiv();a.appendChild(b);b=d;break}}return b},
l=function(a){var b=e(a,a.id)||h(a);return b?c(function(){google.maps.event.trigger(b,"idle")},100):b=g(a),b.inUse=!0,b},m=function(a){a.inUse=!1},n=function(){for(var a=0;a<f.length;a++)f[a]=null;f=[]},k=function(a){for(var b=0;b<f.length;b++)null!==f[b]&&f[b].id==a&&(f[b]=null,f.splice(b,1))},r=function(a,e,g){return d=a[0],b=e,c=g,{mapInstances:f,resetMapInstances:n,getMapInstance:l,returnMapInstance:m,deleteMapInstance:k}};r.$inject=["$document","$window","$timeout"];a.module("ngMap").factory("NgMapPool",
r)}(),function(){var b,d,c,f,g,e,h,l,m={},n=function(a,c){var e;return a.currentStyle?e=a.currentStyle[c]:b.getComputedStyle&&(e=d.defaultView.getComputedStyle(a,null).getPropertyValue(c)),e},k=function(a){a=m[a||0];return a.map instanceof google.maps.Map?void 0:(a.initializeMap(),a.map)},r=function(a,d){function e(c){var d=Object.keys(m);d=m[d[0]];a&&m[a]?k.resolve(m[a].map):!a&&d&&d.map?k.resolve(d.map):c>f?k.reject("could not find map"):b.setTimeout(function(){e(c+100)},100)}d=d||{};a="object"==
typeof a?a.id:a;var k=c.defer(),f=d.timeout||1E4;return e(0),k.promise},p=function(a){if(a.map){var b=Object.keys(m).length;m[a.map.id||b]=a}},t=function(a){var b=Object.keys(m).length-1;b=a.map.id||b;if(a.map){for(var c in a.eventListeners)google.maps.event.removeListener(a.eventListeners[c]);a.map.controls&&a.map.controls.forEach(function(a){a.clear()})}a.map.heatmapLayers&&Object.keys(a.map.heatmapLayers).forEach(function(b){a.deleteObject("heatmapLayers",a.map.heatmapLayers[b])});l.deleteMapInstance(b);
delete m[b]},q=function(a,b){var d=c.defer();return!a||a.match(/^current/i)?f.getCurrentPosition(b).then(function(a){a=new google.maps.LatLng(a.coords.latitude,a.coords.longitude);d.resolve(a)},function(a){d.reject(a)}):e.geocode({address:a}).then(function(a){d.resolve(a[0].geometry.location)},function(a){d.reject(a)}),d.promise},v=function(a,b){return function(c){if(c){var d=h("set-"+a);c=g.toOptionValue(c,{key:a});b[d]&&(a.match(/center|position/)&&"string"==typeof c?q(c).then(function(a){b[d](a)}):
b[d](c))}}},w=function(a){"true"==a.getAttribute("default-style")?(a.style.display="block",a.style.height="300px"):("block"!=n(a,"display")&&(a.style.display="block"),n(a,"height").match(/^(0|auto)/)&&(a.style.height="300px"))};a.module("ngMap").provider("NgMap",function(){var a={};this.setDefaultOptions=function(b){a=b};var m=function(m,n,u,x,A,B,D,F){return b=m,d=n[0],c=u,f=x,g=A,e=B,h=D,l=F,{defaultOptions:a,addMap:p,deleteMap:t,getMap:r,initMap:k,setStyle:w,getGeoLocation:q,observeAndSet:v}};
m.$inject="$window $document $q NavigatorGeolocation Attr2MapOptions GeoCoder camelCaseFilter NgMapPool".split(" ");this.$get=m})}(),function(){var b,d=function(a,c){c=c||a.getCenter();var d=b.defer();return(new google.maps.StreetViewService).getPanoramaByLocation(c||a.getCenter,100,function(a,b){b===google.maps.StreetViewStatus.OK?d.resolve(a.location.pano):d.resolve(!1)}),d.promise},c=function(a,b){(new google.maps.StreetViewPanorama(a.getDiv(),{enableCloseButton:!0})).setPano(b)},f=function(a){return b=
a,{getPanorama:d,setPanorama:c}};f.$inject=["$q"];a.module("ngMap").service("StreetView",f)}(),"ngMap"});
angular.module("qImproved",[]).config(["$provide",function(a){a.decorator("$q",["$delegate",function(a){a.serial=function(b){var c,d=Error();angular.forEach(b,function(b,e){var f=b.success||b,g=b.fail,m=b.notify;if(c)m=c.then(function(a){if(!f)return a;a=f(a);if(!a||!angular.isFunction(a.then))throw d.message="Task "+e+" did not return a promise.",d;return a},function(b){if(!g)return a.reject(b);b=g(b);if(!b||!angular.isFunction(b.then))throw d.message="Fail for task "+e+" did not return a promise.",
d;return b},m);else if(m=f(),!m||!angular.isFunction(m.then))throw d.message="Task "+e+" did not return a promise.",d;c=m});return c||a.when()};return a}])}]);angular.module("ui.bootstrap","ui.bootstrap.tpls ui.bootstrap.pager ui.bootstrap.paging ui.bootstrap.tabindex ui.bootstrap.pagination ui.bootstrap.modal ui.bootstrap.multiMap ui.bootstrap.stackedMap ui.bootstrap.position ui.bootstrap.progressbar".split(" "));angular.module("ui.bootstrap.tpls","uib/template/pager/pager.html uib/template/pagination/pagination.html uib/template/modal/window.html uib/template/progressbar/bar.html uib/template/progressbar/progress.html uib/template/progressbar/progressbar.html".split(" "));
angular.module("ui.bootstrap.pager",["ui.bootstrap.paging","ui.bootstrap.tabindex"]).controller("UibPagerController",["$scope","$attrs","uibPaging","uibPagerConfig",function(a,b,d,c){a.align=angular.isDefined(b.align)?a.$parent.$eval(b.align):c.align;d.create(this,a,b)}]).constant("uibPagerConfig",{itemsPerPage:10,previousText:"\u00ab Previous",nextText:"Next \u00bb",align:!0}).directive("uibPager",["uibPagerConfig",function(a){return{scope:{totalItems:"=",previousText:"@",nextText:"@",ngDisabled:"="},
require:["uibPager","?ngModel"],restrict:"A",controller:"UibPagerController",controllerAs:"pager",templateUrl:function(a,d){return d.templateUrl||"uib/template/pager/pager.html"},link:function(b,d,c,f){d.addClass("pager");b=f[0];(f=f[1])&&b.init(f,a)}}}]);
angular.module("ui.bootstrap.paging",[]).factory("uibPaging",["$parse",function(a){return{create:function(b,d,c){b.setNumPages=c.numPages?a(c.numPages).assign:angular.noop;b.ngModelCtrl={$setViewValue:angular.noop};b._watchers=[];b.init=function(a,g){b.ngModelCtrl=a;b.config=g;a.$render=function(){b.render()};c.itemsPerPage?b._watchers.push(d.$parent.$watch(c.itemsPerPage,function(a){b.itemsPerPage=parseInt(a,10);d.totalPages=b.calculateTotalPages();b.updatePage()})):b.itemsPerPage=g.itemsPerPage;
d.$watch("totalItems",function(a,c){(angular.isDefined(a)||a!==c)&&(d.totalPages=b.calculateTotalPages(),b.updatePage())})};b.calculateTotalPages=function(){return Math.max((1>b.itemsPerPage?1:Math.ceil(d.totalItems/b.itemsPerPage))||0,1)};b.render=function(){d.page=parseInt(b.ngModelCtrl.$viewValue,10)||1};d.selectPage=function(a,c){c&&c.preventDefault();!(d.ngDisabled&&c||d.page===a)&&0<a&&a<=d.totalPages&&(c&&c.target&&c.target.blur(),b.ngModelCtrl.$setViewValue(a),b.ngModelCtrl.$render())};d.getText=
function(a){return d[a+"Text"]||b.config[a+"Text"]};d.noPrevious=function(){return 1===d.page};d.noNext=function(){return d.page===d.totalPages};b.updatePage=function(){b.setNumPages(d.$parent,d.totalPages);d.page>d.totalPages?d.selectPage(d.totalPages):b.ngModelCtrl.$render()};d.$on("$destroy",function(){for(;b._watchers.length;)b._watchers.shift()()})}}}]);
angular.module("ui.bootstrap.tabindex",[]).directive("uibTabindexToggle",function(){return{restrict:"A",link:function(a,b,d){d.$observe("disabled",function(a){d.$set("tabindex",a?-1:null)})}}});
angular.module("ui.bootstrap.pagination",["ui.bootstrap.paging","ui.bootstrap.tabindex"]).controller("UibPaginationController",["$scope","$attrs","$parse","uibPaging","uibPaginationConfig",function(a,b,d,c,f){function g(a,b,c){return{number:a,text:b,active:c}}var e=this,h=angular.isDefined(b.maxSize)?a.$parent.$eval(b.maxSize):f.maxSize,l=angular.isDefined(b.rotate)?a.$parent.$eval(b.rotate):f.rotate,m=angular.isDefined(b.forceEllipses)?a.$parent.$eval(b.forceEllipses):f.forceEllipses,n=angular.isDefined(b.boundaryLinkNumbers)?
a.$parent.$eval(b.boundaryLinkNumbers):f.boundaryLinkNumbers,k=angular.isDefined(b.pageLabel)?function(c){return a.$parent.$eval(b.pageLabel,{$page:c})}:angular.identity;a.boundaryLinks=angular.isDefined(b.boundaryLinks)?a.$parent.$eval(b.boundaryLinks):f.boundaryLinks;a.directionLinks=angular.isDefined(b.directionLinks)?a.$parent.$eval(b.directionLinks):f.directionLinks;b.$set("role","menu");c.create(this,a,b);b.maxSize&&e._watchers.push(a.$parent.$watch(d(b.maxSize),function(a){h=parseInt(a,10);
e.render()}));var r=this.render;this.render=function(){r();if(0<a.page&&a.page<=a.totalPages){var b=a.page,c=a.totalPages,d=[],e=1,f=c,u=angular.isDefined(h)&&c>h;u&&(l?(e=Math.max(b-Math.floor(h/2),1),f=e+h-1,f>c&&(f=c,e=f-h+1)):(e=(Math.ceil(b/h)-1)*h+1,f=Math.min(e+h-1,c)));for(var x=e;f>=x;x++){var E=g(x,k(x),x===b);d.push(E)}if(u&&0<h&&(!l||m||n)){if(1<e){if(!n||3<e)b=g(e-1,"...",!1),d.unshift(b);n&&(3===e&&(e=g(2,"2",!1),d.unshift(e)),e=g(1,"1",!1),d.unshift(e))}if(c>f){if(!n||c-2>f)e=g(f+1,
"...",!1),d.push(e);n&&(f===c-2&&(f=g(c-1,c-1,!1),d.push(f)),c=g(c,c,!1),d.push(c))}}a.pages=d}}}]).constant("uibPaginationConfig",{itemsPerPage:10,boundaryLinks:!1,boundaryLinkNumbers:!1,directionLinks:!0,firstText:"First",previousText:"Previous",nextText:"Next",lastText:"Last",rotate:!0,forceEllipses:!1}).directive("uibPagination",["$parse","uibPaginationConfig",function(a,b){return{scope:{totalItems:"=",firstText:"@",previousText:"@",nextText:"@",lastText:"@",ngDisabled:"="},require:["uibPagination",
"?ngModel"],restrict:"A",controller:"UibPaginationController",controllerAs:"pagination",templateUrl:function(a,b){return b.templateUrl||"uib/template/pagination/pagination.html"},link:function(a,c,f,g){c.addClass("pagination");a=g[0];(g=g[1])&&a.init(g,b)}}}]);
angular.module("ui.bootstrap.modal",["ui.bootstrap.multiMap","ui.bootstrap.stackedMap","ui.bootstrap.position"]).provider("$uibResolve",function(){var a=this;this.resolver=null;this.setResolver=function(a){this.resolver=a};this.$get=["$injector","$q",function(b,d){var c=a.resolver?b.get(a.resolver):null;return{resolve:function(a,g,e,h){if(c)return c.resolve(a,g,e,h);var f=[];return angular.forEach(a,function(a){f.push(angular.isFunction(a)||angular.isArray(a)?d.resolve(b.invoke(a)):angular.isString(a)?
d.resolve(b.get(a)):d.resolve(a))}),d.all(f).then(function(b){var c={},d=0;return angular.forEach(a,function(a,e){c[e]=b[d++]}),c})}}}]}).directive("uibModalBackdrop",["$animate","$injector","$uibModalStack",function(a,b,d){function c(b,c,e){e.modalInClass&&(a.addClass(c,e.modalInClass),b.$on(d.NOW_CLOSING_EVENT,function(d,f){var g=f();b.modalOptions.animation?a.removeClass(c,e.modalInClass).then(g):g()}))}return{restrict:"A",compile:function(a,b){return a.addClass(b.backdropClass),c}}}]).directive("uibModalWindow",
["$uibModalStack","$q","$animateCss","$document",function(a,b,d,c){return{scope:{index:"@"},restrict:"A",transclude:!0,templateUrl:function(a,b){return b.templateUrl||"uib/template/modal/window.html"},link:function(f,g,e){g.addClass(e.windowTopClass||"");f.size=e.size;f.close=function(b){var c=a.getTop();c&&c.value.backdrop&&"static"!==c.value.backdrop&&b.target===b.currentTarget&&(b.preventDefault(),b.stopPropagation(),a.dismiss(c.key,"backdrop click"))};g.on("click",f.close);f.$isRendered=!0;var h=
b.defer();f.$$postDigest(function(){h.resolve()});h.promise.then(function(){var h=null;e.modalInClass&&(h=d(g,{addClass:e.modalInClass}).start(),f.$on(a.NOW_CLOSING_EVENT,function(a,b){var c=b();d(g,{removeClass:e.modalInClass}).start().then(c)}));b.when(h).then(function(){var b=a.getTop();(b&&a.modalRendered(b.key),c[0].activeElement&&g[0].contains(c[0].activeElement))||((b=g[0].querySelector("[autofocus]"))?b.focus():g[0].focus())})})}}}]).directive("uibModalAnimationClass",function(){return{compile:function(a,
b){b.modalAnimation&&a.addClass(b.uibModalAnimationClass)}}}).directive("uibModalTransclude",["$animate",function(a){return{link:function(b,d,c,f,g){g(b.$parent,function(b){d.empty();a.enter(b,d)})}}}]).factory("$uibModalStack",["$animate","$animateCss","$document","$compile","$rootScope","$q","$$multiMap","$$stackedMap","$uibPosition",function(a,b,d,c,f,g,e,h,l){function m(a){return a.replace(F,function(a,b){return(b?"-":"")+a.toLowerCase()})}function n(){for(var a=-1,b=y.keys(),c=0;c<b.length;c++)y.get(b[c]).value.backdrop&&
(a=c);return-1<a&&A>a&&(a=A),a}function k(a,b){var c=y.get(a).value,d=c.appendTo;y.remove(a);(B=y.top())&&(A=parseInt(B.value.modalDomEl.attr("index"),10));t(c.modalDomEl,c.modalScope,function(){var b=c.openedClass||E;C.remove(b,a);var e=C.hasKey(b);d.toggleClass(b,e);!e&&x&&x.heightOverflow&&x.scrollbarWidth&&(d.css(x.originalRight?{paddingRight:x.originalRight+"px"}:{paddingRight:""}),x=null);r(!0)},c.closedDeferred);p();b&&b.focus?b.focus():d.focus&&d.focus()}function r(a){var b;0<y.length()&&
(b=y.top().value,b.modalDomEl.toggleClass(b.windowTopClass||"",a))}function p(){w&&-1===n()&&(t(w,u,function(){}),u=w=void 0)}function t(b,c,d,e){function k(){k.done||(k.done=!0,a.leave(b).then(function(){d&&d();b.remove();e&&e.resolve()}),c.$destroy())}var f,h=null;return c.$broadcast(z.NOW_CLOSING_EVENT,function(){return f||(f=g.defer(),h=f.promise),function(){f.resolve()}}),g.when(h).then(k)}function q(a){if(a.isDefaultPrevented())return a;var b=y.top();if(b)switch(a.which){case 27:b.value.keyboard&&
(a.preventDefault(),f.$apply(function(){z.dismiss(b.key,"escape key press")}));break;case 9:var c=z.loadFocusElementList(b),d=!1;a.shiftKey?(z.isFocusInFirstItem(a,c)||z.isModalFocused(a,b))&&(d=z.focusLastFocusableElement(c)):z.isFocusInLastItem(a,c)&&(d=z.focusFirstFocusableElement(c));d&&(a.preventDefault(),a.stopPropagation())}}function v(){Array.prototype.forEach.call(document.querySelectorAll("["+D+"]"),function(a){var b=parseInt(a.getAttribute(D),10)-1;a.setAttribute(D,b);b||(a.removeAttribute(D),
a.removeAttribute("aria-hidden"))})}var w,u,x,E="modal-open",y=h.createNew(),C=e.createNew(),z={NOW_CLOSING_EVENT:"modal.stack.now-closing"},A=0,B=null,D="data-bootstrap-modal-aria-hidden-count",F=/[A-Z]/g;return f.$watch(n,function(a){u&&(u.index=a)}),d.on("keydown",q),f.$on("$destroy",function(){d.off("keydown",q)}),z.open=function(b,e){function k(a){function b(a){var b=a.parent()?a.parent().children():[];return Array.prototype.filter.call(b,function(b){return b!==a[0]})}if(a&&"BODY"!==a[0].tagName)return b(a).forEach(function(a){var b=
"true"===a.getAttribute("aria-hidden"),c=parseInt(a.getAttribute(D),10);c||(c=b?1:0);a.setAttribute(D,c+1);a.setAttribute("aria-hidden","true")}),k(a.parent())}var g=d[0].activeElement,h=e.openedClass||E;r(!1);B=y.top();y.add(b,{deferred:e.deferred,renderDeferred:e.renderDeferred,closedDeferred:e.closedDeferred,modalScope:e.scope,backdrop:e.backdrop,keyboard:e.keyboard,openedClass:e.openedClass,windowTopClass:e.windowTopClass,animation:e.animation,appendTo:e.appendTo});C.put(h,b);var p=e.appendTo,
t=n();0<=t&&!w&&(u=f.$new(!0),u.modalOptions=e,u.index=t,w=angular.element('<div uib-modal-backdrop="modal-backdrop"></div>'),w.attr({"class":"modal-backdrop","ng-style":"{'z-index': 1040 + (index && 1 || 0) + index*10}","uib-modal-animation-class":"fade","modal-in-class":"in"}),e.backdropClass&&w.addClass(e.backdropClass),e.animation&&w.attr("modal-animation","true"),c(w)(u),a.enter(w,p),l.isScrollable(p)&&(x=l.scrollbarPadding(p),x.heightOverflow&&x.scrollbarWidth&&p.css({paddingRight:x.right+"px"})));
var q;e.component?(q=document.createElement(m(e.component.name)),q=angular.element(q),q.attr({resolve:"$resolve","modal-instance":"$uibModalInstance",close:"$close($value)",dismiss:"$dismiss($value)"})):q=e.content;A=B?parseInt(B.value.modalDomEl.attr("index"),10)+1:0;t=angular.element('<div uib-modal-window="modal-window"></div>');t.attr({"class":"modal","template-url":e.windowTemplateUrl,"window-top-class":e.windowTopClass,role:"dialog","aria-labelledby":e.ariaLabelledBy,"aria-describedby":e.ariaDescribedBy,
size:e.size,index:A,animate:"animate","ng-style":"{'z-index': 1050 + $$topModalIndex*10, display: 'block'}",tabindex:-1,"uib-modal-animation-class":"fade","modal-in-class":"in"}).append(q);e.windowClass&&t.addClass(e.windowClass);e.animation&&t.attr("modal-animation","true");p.addClass(h);e.scope&&(e.scope.$$topModalIndex=A);a.enter(c(t)(e.scope),p);y.top().value.modalDomEl=t;y.top().value.modalOpener=g;k(t)},z.close=function(a,b){var c=y.get(a);return v(),c&&!c.value.modalScope.$broadcast("modal.closing",
b,!0).defaultPrevented?(c.value.modalScope.$$uibDestructionScheduled=!0,c.value.deferred.resolve(b),k(a,c.value.modalOpener),!0):!c},z.dismiss=function(a,b){var c=y.get(a);return v(),c&&!c.value.modalScope.$broadcast("modal.closing",b,!1).defaultPrevented?(c.value.modalScope.$$uibDestructionScheduled=!0,c.value.deferred.reject(b),k(a,c.value.modalOpener),!0):!c},z.dismissAll=function(a){for(var b=this.getTop();b&&this.dismiss(b.key,a);)b=this.getTop()},z.getTop=function(){return y.top()},z.modalRendered=
function(a){(a=y.get(a))&&a.value.renderDeferred.resolve()},z.focusFirstFocusableElement=function(a){return 0<a.length?(a[0].focus(),!0):!1},z.focusLastFocusableElement=function(a){return 0<a.length?(a[a.length-1].focus(),!0):!1},z.isModalFocused=function(a,b){if(a&&b){var c=b.value.modalDomEl;if(c&&c.length)return(a.target||a.srcElement)===c[0]}return!1},z.isFocusInFirstItem=function(a,b){return 0<b.length?(a.target||a.srcElement)===b[0]:!1},z.isFocusInLastItem=function(a,b){return 0<b.length?(a.target||
a.srcElement)===b[b.length-1]:!1},z.loadFocusElementList=function(a){if(a&&(a=a.value.modalDomEl)&&a.length)return(a=a[0].querySelectorAll("a[href], area[href], input:not([disabled]):not([tabindex='-1']), button:not([disabled]):not([tabindex='-1']),select:not([disabled]):not([tabindex='-1']), textarea:not([disabled]):not([tabindex='-1']), iframe, object, embed, *[tabindex]:not([tabindex='-1']), *[contenteditable=true]"))?Array.prototype.filter.call(a,function(a){return!!(a.offsetWidth||a.offsetHeight||
a.getClientRects().length)}):a},z}]).provider("$uibModal",function(){var a={options:{animation:!0,backdrop:!0,keyboard:!0},$get:["$rootScope","$q","$document","$templateRequest","$controller","$uibResolve","$uibModalStack",function(b,d,c,f,g,e,h){function l(a){return a.template?d.when(a.template):f(angular.isFunction(a.templateUrl)?a.templateUrl():a.templateUrl)}var m={},n=null;return m.getPromiseChain=function(){return n},m.open=function(k){function f(){return u}var m=d.defer(),t=d.defer(),q=d.defer(),
v=d.defer(),w={result:m.promise,opened:t.promise,closed:q.promise,rendered:v.promise,close:function(a){return h.close(w,a)},dismiss:function(a){return h.dismiss(w,a)}};if(k=angular.extend({},a.options,k),k.resolve=k.resolve||{},k.appendTo=k.appendTo||c.find("body").eq(0),!k.appendTo.length)throw Error("appendTo element not found. Make sure that the element passed is in DOM.");if(!k.component&&!k.template&&!k.templateUrl)throw Error("One of component or template or templateUrl options is required.");
var u=k.component?d.when(e.resolve(k.resolve,{},null,null)):d.all([l(k),e.resolve(k.resolve,{},null,null)]);var x;return x=n=d.all([n]).then(f,f).then(function(a){function c(b,c,d,k){b.$scope=e;b.$scope.$resolve={};d?b.$scope.$uibModalInstance=w:b.$uibModalInstance=w;angular.forEach(c?a[1]:a,function(a,c){k&&(b[c]=a);b.$scope.$resolve[c]=a})}var d=k.scope||b,e=d.$new();e.$close=w.close;e.$dismiss=w.dismiss;e.$on("$destroy",function(){e.$$uibDestructionScheduled||e.$dismiss("$uibUnscheduledDestruction")});
var f,l,n={scope:e,deferred:m,renderDeferred:v,closedDeferred:q,animation:k.animation,backdrop:k.backdrop,keyboard:k.keyboard,backdropClass:k.backdropClass,windowTopClass:k.windowTopClass,windowClass:k.windowClass,windowTemplateUrl:k.windowTemplateUrl,ariaLabelledBy:k.ariaLabelledBy,ariaDescribedBy:k.ariaDescribedBy,size:k.size,openedClass:k.openedClass,appendTo:k.appendTo},p={},r={};k.component?(c(p,!1,!0,!1),p.name=k.component,n.component=p):k.controller&&(c(r,!0,!1,!0),l=g(k.controller,r,!0,k.controllerAs),
k.controllerAs&&k.bindToController&&(f=l.instance,f.$close=e.$close,f.$dismiss=e.$dismiss,angular.extend(f,{$resolve:r.$scope.$resolve},d)),f=l(),angular.isFunction(f.$onInit)&&f.$onInit());k.component||(n.content=a[0]);h.open(w,n);t.resolve(!0)},function(a){t.reject(a);m.reject(a)})["finally"](function(){n===x&&(n=null)}),w},m}]};return a});
angular.module("ui.bootstrap.multiMap",[]).factory("$$multiMap",function(){return{createNew:function(){var a={};return{entries:function(){return Object.keys(a).map(function(b){return{key:b,value:a[b]}})},get:function(b){return a[b]},hasKey:function(b){return!!a[b]},keys:function(){return Object.keys(a)},put:function(b,d){a[b]||(a[b]=[]);a[b].push(d)},remove:function(b,d){var c=a[b];if(c){var f=c.indexOf(d);-1!==f&&c.splice(f,1);c.length||delete a[b]}}}}}});
angular.module("ui.bootstrap.stackedMap",[]).factory("$$stackedMap",function(){return{createNew:function(){var a=[];return{add:function(b,d){a.push({key:b,value:d})},get:function(b){for(var d=0;d<a.length;d++)if(b===a[d].key)return a[d]},keys:function(){for(var b=[],d=0;d<a.length;d++)b.push(a[d].key);return b},top:function(){return a[a.length-1]},remove:function(b){for(var d=-1,c=0;c<a.length;c++)if(b===a[c].key){d=c;break}return a.splice(d,1)[0]},removeTop:function(){return a.pop()},length:function(){return a.length}}}}});
angular.module("ui.bootstrap.position",[]).factory("$uibPosition",["$document","$window",function(a,b){var d,c,f=/(auto|scroll)/,g=/(auto|scroll|hidden)/,e=/\s?auto?\s?/i,h=/^(top|bottom|left|right)$/,l=/^(top|bottom|left|right|center)$/,m=/^(top|bottom)$/,n=/(HTML|BODY)/;return{getRawNode:function(a){return a.nodeName?a:a[0]||a},parseStyle:function(a){return a=parseFloat(a),isFinite(a)?a:0},offsetParent:function(c){c=this.getRawNode(c);for(c=c.offsetParent||a[0].documentElement;c&&c!==a[0].documentElement&&
"static"===(b.getComputedStyle(c).position||"static");)c=c.offsetParent;return c||a[0].documentElement},scrollbarWidth:function(e){if(e)return angular.isUndefined(c)&&(e=a.find("body"),e.addClass("uib-position-body-scrollbar-measure"),c=b.innerWidth-e[0].clientWidth,c=isFinite(c)?c:0,e.removeClass("uib-position-body-scrollbar-measure")),c;angular.isUndefined(d)&&(e=angular.element('<div class="uib-position-scrollbar-measure"></div>'),a.find("body").append(e),d=e[0].offsetWidth-e[0].clientWidth,d=
isFinite(d)?d:0,e.remove());return d},scrollbarPadding:function(a){a=this.getRawNode(a);var c=b.getComputedStyle(a),d=this.parseStyle(c.paddingRight);c=this.parseStyle(c.paddingBottom);a=this.scrollParent(a,!1,!0);var e=this.scrollbarWidth(n.test(a.tagName));return{scrollbarWidth:e,widthOverflow:a.scrollWidth>a.clientWidth,right:d+e,originalRight:d,heightOverflow:a.scrollHeight>a.clientHeight,bottom:c+e,originalBottom:c}},isScrollable:function(a,c){a=this.getRawNode(a);var d=c?g:f,e=b.getComputedStyle(a);
return d.test(e.overflow+e.overflowY+e.overflowX)},scrollParent:function(c,d,e){c=this.getRawNode(c);d=d?g:f;var k=a[0].documentElement,h=b.getComputedStyle(c);if(e&&d.test(h.overflow+h.overflowY+h.overflowX))return c;e="absolute"===h.position;c=c.parentElement||k;if(c===k||"fixed"===h.position)return k;for(;c.parentElement&&c!==k;){h=b.getComputedStyle(c);if(e&&"static"!==h.position&&(e=!1),!e&&d.test(h.overflow+h.overflowY+h.overflowX))break;c=c.parentElement}return c},position:function(c,d){c=
this.getRawNode(c);var e=this.offset(c);if(d){var f=b.getComputedStyle(c);e.top-=this.parseStyle(f.marginTop);e.left-=this.parseStyle(f.marginLeft)}f=this.offsetParent(c);var k={top:0,left:0};return f!==a[0].documentElement&&(k=this.offset(f),k.top+=f.clientTop-f.scrollTop,k.left+=f.clientLeft-f.scrollLeft),{width:Math.round(angular.isNumber(e.width)?e.width:c.offsetWidth),height:Math.round(angular.isNumber(e.height)?e.height:c.offsetHeight),top:Math.round(e.top-k.top),left:Math.round(e.left-k.left)}},
offset:function(c){c=this.getRawNode(c);var d=c.getBoundingClientRect();return{width:Math.round(angular.isNumber(d.width)?d.width:c.offsetWidth),height:Math.round(angular.isNumber(d.height)?d.height:c.offsetHeight),top:Math.round(d.top+(b.pageYOffset||a[0].documentElement.scrollTop)),left:Math.round(d.left+(b.pageXOffset||a[0].documentElement.scrollLeft))}},viewportOffset:function(c,d,e){c=this.getRawNode(c);e=!1!==e?!0:!1;var f=c.getBoundingClientRect(),g=0,k=0,h=d?a[0].documentElement:this.scrollParent(c);
c=h.getBoundingClientRect();if(g=c.top+h.clientTop,k=c.left+h.clientLeft,h===a[0].documentElement&&(g+=b.pageYOffset,k+=b.pageXOffset),c=g+h.clientHeight,d=k+h.clientWidth,e)e=b.getComputedStyle(h),g+=this.parseStyle(e.paddingTop),c-=this.parseStyle(e.paddingBottom),k+=this.parseStyle(e.paddingLeft),d-=this.parseStyle(e.paddingRight);return{top:Math.round(f.top-g),bottom:Math.round(c-f.bottom),left:Math.round(f.left-k),right:Math.round(d-f.right)}},parsePlacement:function(a){var b=e.test(a);return b&&
(a=a.replace(e,"")),a=a.split("-"),a[0]=a[0]||"top",h.test(a[0])||(a[0]="top"),a[1]=a[1]||"center",l.test(a[1])||(a[1]="center"),a[2]=b?!0:!1,a},positionElements:function(a,c,d,e){a=this.getRawNode(a);c=this.getRawNode(c);var f=angular.isDefined(c.offsetWidth)?c.offsetWidth:c.prop("offsetWidth"),g=angular.isDefined(c.offsetHeight)?c.offsetHeight:c.prop("offsetHeight");d=this.parsePlacement(d);var h=e?this.offset(a):this.position(a),k={top:0,left:0,placement:""};d[2]&&(a=this.viewportOffset(a,e),e=
b.getComputedStyle(c),c=f+Math.round(Math.abs(this.parseStyle(e.marginLeft)+this.parseStyle(e.marginRight))),e=g+Math.round(Math.abs(this.parseStyle(e.marginTop)+this.parseStyle(e.marginBottom))),d[0]="top"===d[0]&&e>a.top&&e<=a.bottom?"bottom":"bottom"===d[0]&&e>a.bottom&&e<=a.top?"top":"left"===d[0]&&c>a.left&&c<=a.right?"right":"right"===d[0]&&c>a.right&&c<=a.left?"left":d[0],d[1]="top"===d[1]&&e-h.height>a.bottom&&e-h.height<=a.top?"bottom":"bottom"===d[1]&&e-h.height>a.top&&e-h.height<=a.bottom?
"top":"left"===d[1]&&c-h.width>a.right&&c-h.width<=a.left?"right":"right"===d[1]&&c-h.width>a.left&&c-h.width<=a.right?"left":d[1],"center"===d[1])&&(m.test(d[0])?(e=h.width/2-f/2,0>a.left+e&&c-h.width<=a.right?d[1]="left":0>a.right+e&&c-h.width<=a.left&&(d[1]="right")):(c=h.height/2-e/2,0>a.top+c&&e-h.height<=a.bottom?d[1]="top":0>a.bottom+c&&e-h.height<=a.top&&(d[1]="bottom")));switch(d[0]){case "top":k.top=h.top-g;break;case "bottom":k.top=h.top+h.height;break;case "left":k.left=h.left-f;break;
case "right":k.left=h.left+h.width}switch(d[1]){case "top":k.top=h.top;break;case "bottom":k.top=h.top+h.height-g;break;case "left":k.left=h.left;break;case "right":k.left=h.left+h.width-f;break;case "center":m.test(d[0])?k.left=h.left+h.width/2-f/2:k.top=h.top+h.height/2-g/2}return k.top=Math.round(k.top),k.left=Math.round(k.left),k.placement="center"===d[1]?d[0]:d[0]+"-"+d[1],k},adjustTop:function(a,b,c,d){return-1!==a.indexOf("top")&&c!==d?{top:b.top-d+"px"}:void 0},positionArrow:function(a,c){a=
this.getRawNode(a);var d=a.querySelector(".tooltip-inner, .popover-inner");if(d){var e=angular.element(d).hasClass("tooltip-inner"),f=a.querySelector(e?".tooltip-arrow":".arrow");if(f){var h={top:"",bottom:"",left:"",right:""};if(c=this.parsePlacement(c),"center"===c[1])return void angular.element(f).css(h);var g="border-"+c[0]+"-width";g=b.getComputedStyle(f)[g];var k="border-"+(m.test(c[0])?c[0]+"-"+c[1]:c[1]+"-"+c[0]);k+="-radius";d=b.getComputedStyle(e?d:a)[k];switch(c[0]){case "top":h.bottom=
e?"0":"-"+g;break;case "bottom":h.top=e?"0":"-"+g;break;case "left":h.right=e?"0":"-"+g;break;case "right":h.left=e?"0":"-"+g}h[c[1]]=d;angular.element(f).css(h)}}}}}]);
angular.module("ui.bootstrap.progressbar",[]).constant("uibProgressConfig",{animate:!0,max:100}).controller("UibProgressController",["$scope","$attrs","uibProgressConfig",function(a,b,d){function c(){return angular.isDefined(a.maxParam)?a.maxParam:d.max}var f=this,g=angular.isDefined(b.animate)?a.$parent.$eval(b.animate):d.animate;this.bars=[];a.max=c();this.addBar=function(a,b,d){g||b.css({transition:"none"});this.bars.push(a);a.max=c();a.title=d&&angular.isDefined(d.title)?d.title:"progressbar";
a.$watch("value",function(){a.recalculatePercentage()});a.recalculatePercentage=function(){var b=f.bars.reduce(function(a,b){return b.percent=+(100*b.value/b.max).toFixed(2),a+b.percent},0);100<b&&(a.percent-=b-100)};a.$on("$destroy",function(){b=null;f.removeBar(a)})};this.removeBar=function(a){this.bars.splice(this.bars.indexOf(a),1);this.bars.forEach(function(a){a.recalculatePercentage()})};a.$watch("maxParam",function(){f.bars.forEach(function(a){a.max=c();a.recalculatePercentage()})})}]).directive("uibProgress",
function(){return{replace:!0,transclude:!0,controller:"UibProgressController",require:"uibProgress",scope:{maxParam:"=?max"},templateUrl:"uib/template/progressbar/progress.html"}}).directive("uibBar",function(){return{replace:!0,transclude:!0,require:"^uibProgress",scope:{value:"=",type:"@"},templateUrl:"uib/template/progressbar/bar.html",link:function(a,b,d,c){c.addBar(a,b,d)}}}).directive("uibProgressbar",function(){return{replace:!0,transclude:!0,controller:"UibProgressController",scope:{value:"=",
maxParam:"=?max",type:"@"},templateUrl:"uib/template/progressbar/progressbar.html",link:function(a,b,d,c){c.addBar(a,angular.element(b.children()[0]),{title:d.title})}}});angular.module("uib/template/pager/pager.html",[]).run(["$templateCache",function(a){a.put("uib/template/pager/pager.html",'<li ng-class="{disabled: noPrevious()||ngDisabled, previous: align}"><a href ng-click="selectPage(page - 1, $event)" ng-disabled="noPrevious()||ngDisabled" uib-tabindex-toggle>{{::getText(\'previous\')}}</a></li>\n<li ng-class="{disabled: noNext()||ngDisabled, next: align}"><a href ng-click="selectPage(page + 1, $event)" ng-disabled="noNext()||ngDisabled" uib-tabindex-toggle>{{::getText(\'next\')}}</a></li>\n')}]);
angular.module("uib/template/pagination/pagination.html",[]).run(["$templateCache",function(a){a.put("uib/template/pagination/pagination.html",'<li role="menuitem" ng-if="::boundaryLinks" ng-class="{disabled: noPrevious()||ngDisabled}" class="pagination-first"><a href ng-click="selectPage(1, $event)" ng-disabled="noPrevious()||ngDisabled" uib-tabindex-toggle>{{::getText(\'first\')}}</a></li>\n<li role="menuitem" ng-if="::directionLinks" ng-class="{disabled: noPrevious()||ngDisabled}" class="pagination-prev"><a href ng-click="selectPage(page - 1, $event)" ng-disabled="noPrevious()||ngDisabled" uib-tabindex-toggle>{{::getText(\'previous\')}}</a></li>\n<li role="menuitem" ng-repeat="page in pages track by $index" ng-class="{active: page.active,disabled: ngDisabled&&!page.active}" class="pagination-page"><a href ng-click="selectPage(page.number, $event)" ng-disabled="ngDisabled&&!page.active" uib-tabindex-toggle>{{page.text}}</a></li>\n<li role="menuitem" ng-if="::directionLinks" ng-class="{disabled: noNext()||ngDisabled}" class="pagination-next"><a href ng-click="selectPage(page + 1, $event)" ng-disabled="noNext()||ngDisabled" uib-tabindex-toggle>{{::getText(\'next\')}}</a></li>\n<li role="menuitem" ng-if="::boundaryLinks" ng-class="{disabled: noNext()||ngDisabled}" class="pagination-last"><a href ng-click="selectPage(totalPages, $event)" ng-disabled="noNext()||ngDisabled" uib-tabindex-toggle>{{::getText(\'last\')}}</a></li>\n')}]);
angular.module("uib/template/modal/window.html",[]).run(["$templateCache",function(a){a.put("uib/template/modal/window.html","<div class=\"modal-dialog {{size ? 'modal-' + size : ''}}\"><div class=\"modal-content\" uib-modal-transclude></div></div>\n")}]);angular.module("uib/template/progressbar/bar.html",[]).run(["$templateCache",function(a){a.put("uib/template/progressbar/bar.html",'<div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: (percent < 100 ? percent : 100) + \'%\'}" aria-valuetext="{{percent | number:0}}%" aria-labelledby="{{::title}}" ng-transclude></div>\n')}]);
angular.module("uib/template/progressbar/progress.html",[]).run(["$templateCache",function(a){a.put("uib/template/progressbar/progress.html",'<div class="progress" ng-transclude aria-labelledby="{{::title}}"></div>')}]);angular.module("uib/template/progressbar/progressbar.html",[]).run(["$templateCache",function(a){a.put("uib/template/progressbar/progressbar.html",'<div class="progress">\n  <div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: (percent < 100 ? percent : 100) + \'%\'}" aria-valuetext="{{percent | number:0}}%" aria-labelledby="{{::title}}" ng-transclude></div>\n</div>\n')}]);
angular.module("ui.bootstrap.position").run(function(){angular.$$csp().noInlineStyle||angular.$$uibPositionCss||angular.element(document).find("head").prepend('<style type="text/css">.uib-position-measure{display:block !important;visibility:hidden !important;position:absolute !important;top:-9999px !important;left:-9999px !important;}.uib-position-scrollbar-measure{position:absolute !important;top:-9999px !important;width:50px !important;height:50px !important;overflow:scroll !important;}.uib-position-body-scrollbar-measure{overflow:scroll !important;}</style>');
angular.$$uibPositionCss=!0});Array.prototype.chunk=function(a){for(var b=[],d=this.length/a,c=0,f=0;c<d;c++,f+=a)b[c]=this.slice(f,f+a);return b};Array.prototype.diff=function(a){return this.filter(function(b){return 0>a.indexOf(b)})};Array.prototype.shuffle=function(){for(var a=this.slice(0),b,d,c=this.length-1;0<c;--c)b=Math.floor(Math.random()*(c+1)),d=a[c],a[c]=a[b],a[b]=d;return a};Array.prototype.randomElement=function(){return this[Math.floor(Math.random()*this.length)]};
Array.prototype.remove=function(a){a=this.indexOf(a);-1<a&&this.splice(a,1)};String.prototype.chunk=function(a){return this.match(new RegExp(".{1,"+a+"}","g"))};String.prototype.localeCompareSmart=function(a){return this.localeCompare(a,"en",{sensitivity:"base",ignorePunctuation:!0,numeric:!0})};angular.module("fringeApp","ngAnimate ngRoute ui.bootstrap mgcrea.ngStrap.affix mgcrea.ngStrap.aside mgcrea.ngStrap.modal mgcrea.ngStrap.button mgcrea.ngStrap.dropdown mgcrea.ngStrap.popover mgcrea.ngStrap.select mgcrea.ngStrap.tab mgcrea.ngStrap.tooltip ngMap qImproved".split(" "));
angular.module("fringeApp").run(["$route","$rootScope","$location",function(a,b,d){var c=d.path;d.path=function(f,g){if(!1===g)var e=a.current,h=b.$on("$locationChangeSuccess",function(){a.current=e;h()});return c.apply(d,[f])}}]);
angular.module("fringeApp").value("Sorters",{performance:function(a,b){return a.start-b.start||a.stop-b.stop}}).value("Configuration",{googleAuthClientId:"728570220201-2tkhj9m3stsqgprscc77o256r0f441au.apps.googleusercontent.com",googleApiKey:"AIzaSyD0y40AVRhf_DDSsFCRT0mBXhjdkQZP4Ys",slotSize:3600,minimumArriveBeforeShowTime:600,adminUsers:["g112311867146833913606"],interestText:["Not Interested","Eh...maybe.","This looks good.","I'd love to see this!","I HAVE to see this!"],generatorMessages:"This may take a few seconds or several minutes.;You may see the lower progress bars fluctuate back and forth. This is normal.;It may not be possible to see all of the shows you want.;You can stop the generator at any time, but the longer you let this run, the better the schedule will be.;If the generator can't find a better schedule, it will stop automatically.;The Auto-Scheduler uses a lot of computing power. It will slow down if you do other things.".split(";"),
fringeLevels:[{min:0,name:"New Recruit"},{min:1,name:"Newbie"},{min:3,name:"Rookie"},{min:5,name:"Amateur"},{min:10,name:"Awesome"},{min:20,name:"Rockstar"},{min:30,name:"Hero"},{min:40,name:"Fanatic"},{min:50,name:"Legend"},{min:65,name:"BOSS"}]}).value("Plurals",{show:{0:"no shows",one:"one show",other:"{} shows"},showMore:{0:"no more shows",one:"one more show",other:"{} more shows"},showSome:{0:"no shows",one:"a show",other:"some shows"},showSomeMore:{0:"no more shows",one:"another show",other:"some more shows"},
aShow:{0:"no shows",one:"a show",other:"{} shows"},performance:{0:"no performances",one:"one performance",other:"{} performances"},performanceMore:{0:"no more performances",one:"one more performance",other:"{} more performances"},Performance:{0:"No performances",one:"1 Performance",other:"{} Performances"}}).value("Menu",[{route:"",title:"Home"},{route:"my-fringe",title:"My Fringe"},{route:"shows",title:"Shows"},{route:"schedule",title:"Schedule"},{route:"venues",title:"Venues"},{route:"map",title:"Map"}]).value("MapConfig",
{initialView:0,views:[{name:"Fringe Central",center:[28.572253,-81.367035],zoom:18,markerGroups:!0},{name:"Green Lawn of Fabulousness",markerGroups:!0,center:[28.571914,-81.366537],zoom:19},{name:"All Venues",markerGroups:["venues","byov"]},{name:"Parking",markerGroups:["parking"]}],markerGroups:[{id:"venues",name:"Main Venues",markers:[]},{id:"byov",name:"BYOV",markers:[]},{id:"fringe",name:"Festival Locations",markers:[{position:[28.573538,-81.366723],title:"Box Office",icon:"information",host:1},
{position:[28.572936,-81.365307],title:"Club Fringe Lounge",icon:"club-fringe",host:2,notes:"Club Fringe members only."},{position:[28.573403,-81.367468],title:"Kids Fringe",icon:"kids",host:1},{position:[28.571664,-81.366011],title:"Information",icon:"information",location:"Green Lawn of Fabulousness"}]},{id:"foodAndDrink",name:"Food & Drink",markers:[{position:[28.572994,-81.367102],title:"Wine & Beer",icon:"beer-garden",host:1},{position:[28.571936,-81.366611],title:"McGrath Beer Tent",icon:"beer",
location:"Green Lawn of Fabulousness"},{position:[28.572003,-81.366468],title:"Stonewall Bar Tent",icon:"bar",location:"Green Lawn of Fabulousness"},{position:[28.572153,-81.366947],title:"Ice Cream",icon:"icecream",location:"Green Lawn of Fabulousness"},{position:[28.571776,-81.366104],title:"Cheese Curds",icon:"cheese",location:"Green Lawn of Fabulousness"}]},{id:"services",name:"Services",markers:[{position:[28.57298,-81.366786],title:"ATM",icon:"atm",host:1},{position:[28.572036,-81.366584],title:"ATM",
icon:"atm",location:"Green Lawn of Fabulousness"},{position:[28.573535,-81.366921],title:"Restrooms",icon:"bathroom",host:1},{position:[28.573117,-81.366799],title:"Restrooms",icon:"bathroom",host:1},{position:[28.572941,-81.364958],title:"Restrooms",icon:"bathroom",host:2},{position:[28.570965,-81.365557],title:"Restrooms",icon:"bathroom",host:3},{position:[28.571659,-81.366254],title:"Restrooms",icon:"bathroom",location:"Green Lawn of Fabulousness"}]},{id:"parking",name:"Parking",markers:[{position:[28.573059,
-81.366112],title:"Free Parking",icon:"parking",host:1,notes:"The most convenient for all venues and the Fringe Lawn, but it fills up fast and is the most challenging for finding a spot \u2013 it can take as long as 45 minutes to 1 hour at busy times."},{position:[28.571236,-81.366444],title:"Free Parking",icon:"parking",host:3,notes:"This lot fills up quickly and is occasionally closed to Fringe guests for special events."},{position:[28.573045,-81.37102],title:"Parking Garage",icon:"parking-garage",
location:"Orlando Hospital",address:["2328 Alden Rd","Orlando, FL 32803"],notes:"Free on Saturday or if leaving after midnight."},{position:[28.568979,-81.363516],title:"Free Weekend Parking",icon:"parking",location:"Magruder Eye Institute",address:["1911 N Mills Ave","Orlando, FL 32803"],notes:"Available on Saturdays and Sundays all day during Fringe. Lots of spaces, the perfect location for a short walk to Silver and Green venues."},{position:[28.568475,-81.365177],title:"Free Weekend Parking",
icon:"parking",location:"Florida Urology Associates",address:["1812 N Mills Ave","Orlando, FL 32803"],notes:"Available on Saturdays and Sundays all day during Fringe. Lots of spaces, the perfect location for a short walk to Silver and Green venues."}]}],lawnPolygon:[[28.5721511,-81.3658485],[28.5722194,-81.3659477],[28.5722641,-81.3660309],[28.57229,-81.3660872],[28.5723065,-81.3661489],[28.5723112,-81.3661999],[28.5723042,-81.3662508],[28.5722665,-81.3663501],[28.5722359,-81.3664386],[28.5722147,
-81.3665539],[28.5722194,-81.3667041],[28.5722759,-81.3668516],[28.5722806,-81.3669026],[28.5722735,-81.3669482],[28.572217,-81.3670394],[28.5721723,-81.3670917],[28.5721311,-81.3671668],[28.572081,-81.3672198],[28.5720404,-81.3672741],[28.5719944,-81.3673438],[28.5719555,-81.3673693],[28.5719119,-81.3673747],[28.5718778,-81.3673452],[28.5718107,-81.3671829],[28.5717789,-81.3670447],[28.5716635,-81.3668329],[28.5716046,-81.3667417],[28.5715822,-81.3666947],[28.5715681,-81.3666545],[28.5715651,-81.3666036],
[28.5715681,-81.3665566],[28.5715787,-81.3664708],[28.5716281,-81.3662776],[28.5716234,-81.3661489],[28.5716105,-81.3660725],[28.5715986,-81.3660175],[28.5715739,-81.3659652],[28.5715504,-81.36589],[28.5715174,-81.3658136],[28.5717082,-81.3657385],[28.5718048,-81.3657144],[28.5718778,-81.365701],[28.5719803,-81.3657117],[28.572071,-81.3657546],[28.5721511,-81.3658485]]}).config(["$locationProvider","$routeProvider",function(a,b){a.hashPrefix("!");a.html5Mode(!0);b.when("/",{template:"<home></home>"}).when("/my-fringe/:subpage?",
{template:"<my-fringe></my-fringe>"}).when("/shows-old",{template:"<shows-old></shows-old>"}).when("/shows-old/show/:show",{template:"<shows-old></shows-old>"}).when("/shows-old/venue/:venue",{template:"<shows-old></shows-old>"}).when("/shows",{template:"<shows></shows>"}).when("/shows/venue/:venue",{template:"<shows></shows>"}).when("/show/:show",{template:"<show></show>"}).when("/schedule/:param1?/:param2?",{template:"<schedule></schedule>"}).when("/venues",{template:"<venues></venues>"}).when("/map",
{template:"<fringe-map></fringe-map>"}).when("/map/venue/:venue",{template:"<fringe-map></fringe-map>"}).when("/map/host/:host",{template:"<fringe-map></fringe-map>"}).when("/credits",{templateUrl:"pages/credits.html"}).when("/privacy",{templateUrl:"pages/privacy.html"}).when("/test",{template:"<test></test>"}).otherwise({redirectTo:"/"})}]);
angular.module("fringeApp").filter("highlight",["$sce",function(a){return function(b,d){return b?(d=d.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&").trim())&&""!==d?a.trustAsHtml(b.replace(new RegExp("("+d+")(?![^<]*>|[^<>]*<\\/)","gi"),"<mark>$1</mark>")):a.trustAsHtml(b):b}}]);angular.module("fringeApp").filter("price",function(){return function(a){return 0===a?"FREE":"$"+a}});angular.module("fringeApp").filter("startFrom",function(){return function(a,b){return a.slice(+b)}});
angular.module("fringeApp").directive("innerHeight",function(){return{restrict:"A",scope:{model:"=innerHeight"},controller:["$scope","$window","debounce",function(a,b,d){a.model=b.innerHeight;angular.element(b).on("resize",d(function(){a.$apply(function(){a.model=b.innerHeight})},100))}]}});
angular.module("fringeApp").directive("interest",function(){return{restrict:"E",scope:{showId:"=",desire:"="},template:function(a,b){var d=void 0!==b.showId,c="<span";c=(d?c+' ng-mouseleave="reset()"':c+' bs-tooltip="{title:interestText[get()]}"')+">";for(var f=0;4>f;f++)c+='<i class="rating-icon glyphicon" ng-class="icon('+f+')"',d&&(c+=' bs-tooltip="{title: interestText['+(f+1)+']}" ng-click="click('+(f+1)+')" ng-mouseenter="enter('+f+')"'),c+="></i>";return c+"</span>"},controller:["$scope","Schedule",
"Configuration",function(a,b,d){var c;a.interestText=d.interestText;a.get=function(){return a.desire||b.getShowDesire(a.showId)};a.icon=function(b){return b<(c||a.get())?"glyphicon-ok-sign":"glyphicon-ok-circle"};a.click=function(c){b.setShowDesire(a.showId,c===a.get()?0:c)};a.enter=function(a){c=a+1};a.reset=function(){c=void 0}}]}});
angular.module("fringeApp").directive("monthDayPicker",function(){return{restrict:"E",template:'<div class="month-day-picker"><div ng-repeat="month in ::months"><h4>{{::month.header}}</h4><table class="table table-condensed table-bordered"><thead><tr><th>S</th><th>M</th><th>T</th><th>W</th><th>T</th><th>F</th><th>S</th></tr></thead><tbody><tr ng-repeat="week in ::month.weeks"><td ng-repeat="day in ::week.days track by $index" ng-bind="::day.number" ng-class="{allowed: day.allowed, active: model == day.time, today: day.today}" ng-click="day.allowed ? click(day.time) : false"></td></tr></tbody></table></div></div>',replace:!0,
scope:{days:"=",model:"="},controller:["$scope",function(a){a.click=function(b){a.model=b};var b=[],d=[],c=angular.copy(a.days),f;for(f=0;f<c.length;f++){var g=moment(c[f],"X"),e=g.startOf("month").unix();g=g.startOf("year").unix();-1===b.indexOf(e)&&b.push(e);-1===d.indexOf(g)&&d.push(g)}a.months=b.map(function(b){b=moment(b,"X");var c=[],d=moment().startOf("day").unix();for(f=0;f<b.day();f++)c.push({number:"",time:-1});for(f=1;f<=b.daysInMonth();f++){var e=b.date(f).unix();c.push({number:f,time:e,
allowed:-1<a.days.indexOf(e),today:e===d})}for(f=0;f<b.day()%7;f++)c.push(0);return{header:b.format("MMMM YYYY"),weeks:c.chunk(7).map(function(a){return{days:a}})}})}]}});angular.module("fringeApp").directive("scrollYModel",function(){return{restrict:"A",scope:{model:"=scrollYModel"},controller:["$scope","$document","$window",function(a,b,d){a.model=Math.min(d.scrollY,205);b.on("scroll",function(){var b=Math.min(d.scrollY,205);a.model!==b&&a.$apply(function(){a.model=b})})}]}});
angular.module("fringeApp").directive("showRating",function(){return{restrict:"E",scope:{value:"="},template:'<span class="label label-info"><i class="glyphicon glyphicon-check"></i> {{value}}</span>'}});
angular.module("fringeApp").directive("staticMap",function(){return{scope:{center:"=",zoom:"=",size:"=",markers:"="},replace:!0,template:'<img ng-src="{{url}}" />',controller:["$scope",function(a){var b=["key=AIzaSyD0y40AVRhf_DDSsFCRT0mBXhjdkQZP4Ys"];a.center&&b.push("center="+a.center);a.zoom&&b.push("zoom="+a.zoom);a.size&&b.push("size="+a.size);a.markers&&b.push("markers="+a.markers);a.url="https://maps.googleapis.com/maps/api/staticmap?"+b.join("&")}]}});
angular.module("fringeApp").service("Availability",["UserData",function(a){this.isSlotAvailable=function(b){return-1===a.getUnavailability().indexOf(b)};this.setSlotAvaialble=function(b){var d=a.getUnavailability();d.remove(b);a.setUnavailability(d)};this.setSlotUnavailable=function(b){if(this.isSlotAvailable(b)){var d=a.getUnavailability();d.push(b);a.setUnavailability(d)}};this.isUserAvailable=function(b,d){for(var c=a.getUnavailability(),f=c.length;f--;){var g=c[f];if(!(d<g||b>g+1800))return!1}return!0}}]);
angular.module("fringeApp").service("Data",["$http","$q","Sorters",function(a,b,d){var c,f,g,e,h,l;this.load=function(){var d=b.defer();a.get("api/getData.php",{cache:!0}).then(function(a){c=a.data;a=Object.keys(c.availabilitySlots);f=Math.min.apply(null,a);g=Math.max.apply(null,a);console.log("Data loaded");d.resolve()},function(){d.reject()});return d.promise};var m=function(a){return function(){return c[a]}};this.getShows=m("shows");this.getPerformances=m("performances");this.getRatings=m("ratings");
this.getVenues=m("venues");this.getVenueHosts=m("venueHosts");this.getVenueDistances=m("distances");this.getAvailabilitySlots=m("availabilitySlots");this.getAvailabilitySlotsAll=m("availabilitySlotsAll");this.getSortedShows=function(){return Object.keys(c.shows).sort(function(a,b){return c.shows[a].name.localeCompareSmart(c.shows[b].name)})};this.getPrices=function(){var a={};angular.forEach(c.shows,function(b){a[b.price]=!0});return Object.keys(a).map(function(a){return parseInt(a)}).sort(function(a,
b){return a>b})};this.getShow=function(a){return c.shows[a]};this.findShowIdBySlug=function(a){void 0===e&&(e={},angular.forEach(c.shows,function(a,b){e[a.slug]=b}));return e[a]};this.getPerformance=function(a){return c.performances[a]};this.getSortedPerformances=function(){return Object.keys(c.performances).sort(function(a,b){return d.performance(c.performances[a],c.performances[b])})};this.getVenue=function(a){return c.venues[a]};this.getVenueHost=function(a){return c.venueHosts[a]};this.findVenueIdBySlug=
function(a){void 0===h&&(h={},angular.forEach(c.venues,function(a,b){h[a.slug]=b}));return h[a]};this.findVenueHostIdBySlug=function(a){void 0===l&&(l={},angular.forEach(c.venueHosts,function(a,b){l[a.slug]=b}));return l[a]};this.isFringeOngoing=function(){var a=Date.now()/1E3;return f<a&&g>a}}]);angular.module("fringeApp").service("Error",function(){var a=function(){};this.onError=function(b){a=b};this.error=function(b,d){a({title:b,more:d})}});
angular.module("fringeApp").service("GoogleCalendarSync",["Data","Schedule","UserData","$q","debounce",function(a,b,d,c,f){var g=this,e=function(){},h=function(){if(!g.isSetup())return c.when();var f=d.getSettings().googleCalendarSyncId||null,h=c.defer();e(h.promise);gapi.client.calendar.events.list({calendarId:f,privateExtendedProperty:"fringeSeason=OrlandoMay2018",maxResults:500}).then(function(d){var e={};d=d.result.items.map(function(a){e[a.extendedProperties["private"].performanceId]=a.id;return a.extendedProperties["private"].performanceId});
var g=b.getSchedule().diff(d),l=d.diff(b.getSchedule()),m=g.length+l.length,n=0;h.notify({progress:0,max:m});c.serial([function(){return c.serial(g.map(function(b){return function(){var c=a.getPerformance(b),d=a.getShow(c.show),e=a.getVenue(d.venue),g=a.getVenueHost(e.host);g=e.name+" at "+g.name+", "+g.address.join(", ");var k="<p>"+d.description+'</p><br /><p><strong>Remember to arrive 10 minutes prior to showtime and to wear your Fringe button!</strong></p><p><a href="https://fringeomatic.com/show/'+
d.slug+'">Show Information</a><br /><a href="http://fringeomatic.com/my-fringe">My Fringe</a></p>';g=g.replace(e.name+" at "+e.name,e.name);return gapi.client.calendar.events.insert({calendarId:f,resource:{summary:d.name,description:k,location:g,start:{dateTime:moment(c.start,"X").toISOString(),timeZone:"America/New_York"},end:{dateTime:moment(c.stop,"X").toISOString(),timeZone:"America/New_York"},extendedProperties:{"private":{fringeSeason:"OrlandoMay2018",performanceId:b}},reminders:{useDefault:!1,
overrides:[{method:"popup",minutes:30}]},source:{title:"Fringe-o-Matic",url:"https://fringeomatic.com/show/"+d.slug},transparency:"opaque"}}).then(function(){h.notify({progress:++n,max:m})},function(){h.notify({progress:++n,max:m})})}}))},function(){return c.serial(l.map(function(a){return function(){return gapi.client.calendar.events["delete"]({calendarId:f,eventId:e[a]}).then(function(){h.notify({progress:++n,max:m})},function(){h.notify({progress:++n,max:m})})}}))}]).then(h.resolve)},function(a){404===
a.status&&g.disconnect()});return h.promise};this.getCalendarLink=function(){return"https://calendar.google.com/calendar/r?cid="+(d.getSettings().googleCalendarSyncId||null)};this.onSyncStart=function(a){e=a};this.hasPermission=function(){return-1<gapi.auth2.getAuthInstance().currentUser.get().getGrantedScopes().indexOf("https://www.googleapis.com/auth/calendar")};this.requestPermission=function(){return gapi.auth2.getAuthInstance().currentUser.get().grant(new gapi.auth2.SigninOptionsBuilder({scope:"https://www.googleapis.com/auth/calendar"}))};
this.isSetup=function(){return this.hasPermission()&&null!==(d.getSettings().googleCalendarSyncId||null)};this.sync=f(h,2E3);this.getCalendars=function(){return gapi.client.calendar.calendarList.list({minAccessRole:"writer"}).then(function(a){return a.result.items.map(function(a){return{id:a.id,name:a.summaryOverride||a.summary,primary:!0===a.primary,style:{backgroundColor:a.backgroundColor,color:a.foregroundColor}}}).sort(function(a,b){return a.primary?-1:a.name.localeCompareSmart(b.name)})})};this.setupInNew=
function(a){return gapi.client.calendar.calendars.insert({summary:a,timeZone:"America/New_York"}).then(function(a){return g.setupInExisting(a.result.id)})};this.setupInExisting=function(a){var b=d.getSettings();b.googleCalendarSyncId=a;d.setSettings(b);return h()};this.disconnect=function(){var a=d.getSettings();delete a.googleCalendarSyncId;d.setSettings(a)}}]);
angular.module("fringeApp").service("Schedule",["$q","Configuration","UserData","Data","Availability","Sorters",function(a,b,d,c,f,g){var e=this;this.getSchedule=function(){return d.getSchedule()};this.getShowDesire=function(a){return d.getPreferences()[a]||0};this.setShowDesire=function(a,b){var c=d.getPreferences();0===b?delete c[a]:c[a]=b;d.setPreferences(c)};this.getDesiredShows=function(){return Object.keys(d.getPreferences()).filter(function(a){return 0<e.getShowDesire(a)})};this.add=function(a){var b=
d.getSchedule();-1===b.indexOf(a)&&(b.push(a),d.setSchedule(b));this.removeMaybe(a)};this.remove=function(a){this.removeMaybe(a);var b=d.getSchedule();b.remove(a);d.setSchedule(b)};this.addMaybe=function(a){this.remove(a);var b=d.getMaybes();-1===b.indexOf(a)&&(b.push(a),d.setMaybes(b))};this.removeMaybe=function(a){var b=d.getMaybes();b.remove(a);d.setMaybes(b)};this.getSortedSchedule=function(){var a=c.getPerformances();return d.getSchedule().sort(function(b,c){return g.performance(a[b],a[c])})};
this.isUserAttendingPerformance=function(a){return-1<d.getSchedule().indexOf(a)};this.isUserMaybeAttendingPerformance=function(a){return-1<d.getMaybes().indexOf(a)};this.getPerformanceScheduleState=function(a){return this.isUserMaybeAttendingPerformance(a)?"maybe":this.isUserAttendingPerformance(a)?"yes":"no"};this.getPerformancesAttending=function(){return d.getSchedule()};this.getShowsAttending=function(){for(var a=c.getPerformances(),b=[],d=e.getPerformancesAttending(),f=0;f<d.length;f++)b.push(a[d[f]].show);
return b};this.getPossiblePerformances=function(){var a=c.getPerformances(),e=c.getShows(),g=c.getVenueDistances(),n=[],k=d.getSchedule(),r=0,p=Date.now()/1E3;angular.forEach(a,function(c,d){if(-1<k.indexOf(d)||!f.isUserAvailable(c.start,c.stop)||c.start<=p)return!0;var h=e[c.show];for(r=0;r<h.performances.length;r++)if(-1<k.indexOf(h.performances[r]))return!0;var m=c.start,l=c.stop;for(r=k.length;r--;){var t=a[k[r]],q=g[h.venue][e[t.show].venue]+b.minimumArriveBeforeShowTime;if(!(l<t.start-q||m>
t.stop+q))return!0}n.push(d)});return n}}]);
angular.module("fringeApp").service("UserData",["$q","$http","debounce",function(a,b,d){var c=this,f,g,e=function(a){return function(){return g[a]}},h=function(a){return function(b){g[a]=b;c.save()}},l=function(){};this.load=function(c){var d=a.defer();(f=c)?b.get("api/getUserData.php?id="+c).then(function(a){g=a.data;d.resolve();console.log("User data loaded")},function(){d.reject()}):d.reject();return d.promise};this.save=d(function(){var c=a.defer();l(c.promise);void 0!==f?b.post("api/setUserData.php",
{id:f,data:g}).then(c.resolve,c.reject):c.resolve()},1E3);this.reset=function(){g={preferences:{},unavailability:[],schedule:[],maybe:[],settings:{scheduleMode:"full"}};f=void 0};this.reset();this.getPreferences=e("preferences");this.setPreferences=h("preferences");this.getUnavailability=e("unavailability");this.setUnavailability=h("unavailability");this.getSchedule=e("schedule");this.setSchedule=h("schedule");this.getMaybes=e("maybe");this.setMaybes=h("maybe");this.getSettings=e("settings");this.setSettings=
h("settings");this.isSignedIn=function(){return void 0!==f};this["export"]=function(){return JSON.stringify(g)};this["import"]=function(a){g=JSON.parse(a);this.save()};this.onSave=function(a){l=a}}]);
angular.module("fringeApp").controller("CoreCtrl",["$rootScope","$scope","$route","$location","$timeout","$window","$q","$aside","$uibModal","Data","Menu","UserData","Error","Configuration",function(a,b,d,c,f,g,e,h,l,m,n,k,r,p){k.onSave(function(a){a.then(function(){},function(){r.error("Unable to save data to the server.","Have you lost your internet connection?")})});r.onError(function(a){b.error=a});b.menu=n;var t=e.defer();a.$on("$routeChangeSuccess",function(){if(d.current.$$route){t.resolve();
var a=d.current.$$route.originalPath.split("/");b.currentRoute="/"+a[1];g.scroll(0,0)}});b.signIn=function(){l.open({templateUrl:"app/core/loginModal/loginModal.html",controller:"LoginModalCtrl",size:"md"}).result.then(function(a){b.signedIn=!0;b.signedInName=a.name;b.isUserAdmin=-1<p.adminUsers.indexOf(a.id);"/"===c.path()?c.path("/my-fringe"):d.reload()})};var q=e.defer();gapi.load("client:auth2:signin2",function(){gapi.client.init({apiKey:"AIzaSyD0y40AVRhf_DDSsFCRT0mBXhjdkQZP4Ys",clientId:"728570220201-1qnk6fh4nkdl3vqnpq8gphbk9t51i29m.apps.googleusercontent.com",
scope:"profile",prompt:"select_account",discoveryDocs:["https://www.googleapis.com/discovery/v1/apis/calendar/v3/rest"]}).then(function(){var a=gapi.auth2.getAuthInstance();if(a.isSignedIn.get()){a=a.currentUser.get().getBasicProfile();var c="g"+a.getId();b.signedIn=!0;b.signedInName=a.getName();b.isUserAdmin=-1<p.adminUsers.indexOf(c);k.load(c).then(q.resolve)}else b.signedIn=!1,q.resolve()})});e.all([m.load(),t.promise,q.promise]).then(function(){b.loaded=!0},function(){r.error("Unable to retrieve data from server",
"Please wait a moment and try again.")});void 0!==Blob&&void 0!==Worker&&void 0!==window.URL&&void 0!==window.URL.createObjectURL||r.error("Unsupported Browser","Your browser does not support Web Workers. Please use a modern browser like Google Chrome.");b.signOut=function(){gapi.auth2.getAuthInstance().signOut().then(function(){b.$apply(function(){k.reset();b.isUserAdmin=!1;b.signedIn=!1;-1<c.path().indexOf("my-fringe")?c.path("/"):d.reload();d.reload()})})};b.openHelp=function(){h({templateUrl:"app/core/help/help.html",
placement:"right",controller:"HelpCtrl"})}}]);angular.module("fringeApp").controller("HelpCtrl",["$scope","$route","$routeParams",function(a,b,d){b=b.current.$$route.originalPath.split("/");a.currentRoute=b[1];"my-fringe"===b[1]&&d.subpage&&(a.currentRoute+="/"+d.subpage);a.topics=[]}]);
angular.module("fringeApp").controller("LoginModalCtrl",["$uibModalInstance","$scope","$timeout","UserData","Error",function(a,b,d,c,f){b.signingIn=!1;d(function(){gapi.signin2.render("google-sign-in-button",{scope:"profile",width:200,height:36,longtitle:!0,theme:"dark",onsuccess:function(d){var e=d.getBasicProfile(),g="g"+e.getId();b.$apply(function(){b.signingIn=!0});c.load(g).then(function(){a.close({id:g,name:e.getName()})},function(){a.dismiss();f.error("Unable to retrieve data from server",
"Please wait a moment and try again.")})}})});b.close=a.dismiss}]);
angular.module("fringeApp").controller("NotificationsCtrl",["$scope","$timeout","Schedule","Data","Plurals",function(a,b,d,c,f){a.plurals=f;a.moment=moment;a.shows=c.getShows();a.performances=c.getPerformances();a.venues=c.getVenues();var g=function(){var e=moment().startOf("day").unix()+86400,f=Date.now()/1E3;c.isFringeOngoing()?(a.show=!0,a.remainingTodayPerformances=d.getSortedSchedule().filter(function(a){a=c.getPerformance(a).start;return a>f&&a<=e}),a.futurePerformances=d.getSortedSchedule().filter(function(a){return c.getPerformance(a).start>
e}),b(g,300)):a.show=!1};g()}]);
angular.module("fringeApp").component("home",{templateUrl:"app/home/home.html",controller:["$scope","$timeout","$location",function(a,b,d){for(var c="#D5D6DB #337ab7 #C33C54 #731DD8 #59cd90 #fabc3c #337ab7 #C33C54 #731DD8 #59cd90 #fabc3c".split(" "),f=Array.from(document.querySelectorAll("#calendar-image .day")),g,e=function(){f.randomElement().style.fill=c.randomElement();g=b(e,1500)},h=0;15>h;h++)f.randomElement().style.fill=c.randomElement();e();a.$on("$destroy",function(){b.cancel(g)});a.getStarted=
function(){a.$parent.signedIn?d.path("/my-fringe"):a.$parent.signIn()}}]});
angular.module("fringeApp").component("myFringe",{templateUrl:"app/myFringe/myFringe.html",controller:["$scope","$route","$routeParams","Schedule","UserData","Configuration","Plurals",function(a,b,d,c,f,g,e){a.plurals=e;a.tabs={activeTab:"Schedule"};"availability"===d.subpage?a.tabs.activeTab="Availability":"auto-scheduler"===d.subpage&&(a.tabs.activeTab="Auto-Scheduler");a.statuses=g.fringeLevels;a.userData={schedule:f.getSchedule()};a.$watch("userData.schedule",function(){a.goingCount=c.getSchedule().length;
a.level=0;a.nextLevelCount=0;for(var b=a.nextLevelRemaining=0;b<a.statuses.length;b++)a.maxLevel=a.statuses[b].min,a.goingCount>=a.statuses[b].min&&(a.level=a.maxLevel,a.status=b,void 0!==a.statuses[b+1]&&(a.nextLevelCount=a.goingCount-a.statuses[b].min,a.nextLevelRemaining=Math.max(0,a.statuses[b+1].min-a.level-a.nextLevelCount)))});a.$watch("tabs.activeTab",function(){"Schedule"===a.tabs.activeTab&&b.subpage?b.updateParams({subpage:null}):"Availability"===a.tabs.activeTab&&"availability"!==b.subpage?
b.updateParams({subpage:"availability"}):"Auto-Scheduler"===a.tabs.activeTab&&"auto-scheduler"!==b.subpage?b.updateParams({subpage:"auto-scheduler"}):b.updateParams({subpage:null})})}]});
angular.module("fringeApp").component("myFringeAvailability",{templateUrl:"app/myFringe/availability/availability.html",controller:["$scope","$uibModal","$timeout","Data","Schedule","Availability","Configuration",function(a,b,d,c,f,g,e){a.moment=moment;a.slotSize=e.slotSize;a.availability={};a.toggleAvailability=function(b){a.availability[b]?g.setSlotUnavailable(b):g.setSlotAvaialble(b);a.availability[b]=!a.availability[b]};var h;a.dragStart=function(b){a.toggleAvailability(b);h=a.availability[b];
a.dragging=!0};a.dragStop=function(){a.dragging=!1};a.dragOver=function(b){a.dragging&&a.availability[b]!==h&&a.toggleAvailability(b)};a.showPerformances=function(c,d,e){b.open({templateUrl:"app/myFringe/availability/slotPerformancesModal/slotPerformancesModal.html",controller:"slotPerformancesModalCtrl",size:"lg",scope:a,resolve:{slotStart:function(){return c},slotStop:function(){return d},slotPerformances:function(){return e}}})};var l=c.getPerformances();a.availabilitySlots=c.getAvailabilitySlots();
a.availabilitySlotsAll=c.getAvailabilitySlotsAll();angular.forEach(a.availabilitySlots,function(b){angular.forEach(b,function(b){a.availability[b]=g.isSlotAvailable(b)})});(function(){var b=f.getSchedule();a.slotPerformances={};angular.forEach(a.availabilitySlots,function(c){angular.forEach(c,function(c){a.slotPerformances[c]=[];for(var d=0;d<b.length;d++){var f=b[d],g=l[f];g.stop<=c||g.start>=c+e.slotSize||a.slotPerformances[c].push(f)}})})})()}]});
angular.module("fringeApp").controller("slotPerformancesModalCtrl",["$uibModalInstance","$scope","Data","Schedule","Sorters","slotStart","slotStop","slotPerformances",function(a,b,d,c,f,g,e,h){b.slotStart=g;b.slotStop=e;b.shows=d.getShows();b.performances=d.getPerformances();b.venues=d.getVenues();b.slotPerformances=h.sort(function(a,c){return f.performance(b.performances[a],b.performances[c])});b.ok=function(){a.close()};b.remove=function(a){c.remove(a);b.slotPerformances.remove(a);0===b.slotPerformances.length&&
b.ok()}}]);
angular.module("fringeApp").component("myFringeAutoScheduler",{templateUrl:"app/myFringe/autoScheduler/autoScheduler.html",controller:["$scope","$q","$timeout","$uibModal","$location","Data","Schedule","UserData","Availability","Configuration","Plurals",function(a,b,d,c,f,g,e,h,l,m,n){a.plurals=n;a.moment=moment;a.interestText=m.interestText;a.instantAddScreenCount=0;var k=!1,r=function(){var b=e.getDesiredShows(),c=e.getSchedule();if(!b.length)return"no-interests";a.progressByDesireMax={4:0,3:0,
2:0,1:0};a.progressByDesire={4:0,3:0,2:0,1:0};b.map(function(b){a.progressByDesireMax[e.getShowDesire(b)]++});var d=g.getPerformances(),h=g.getShows(),n=g.getVenues(),p=g.getVenueDistances(),r=e.getPossiblePerformances(),y=e.getShowsAttending(),C=b.diff(y),z=Date.now()/1E3;c.map(function(b){a.progressByDesire[e.getShowDesire(d[b].show)]++});a.availablePerformanceCount=0;angular.forEach(d,function(b){b.start>z&&l.isUserAvailable(b.start,b.stop)&&a.availablePerformanceCount++});a.possiblePerformanceCount=
r.length;a.allDesiredShowsOnSchedule=0===C.length;if(!r.length)return k&&f.path("/my-fringe"),"schedule-full";if(0===C.length)return k&&f.path("/my-fringe"),"schedule-complete";var A=r.filter(function(a){return-1<b.indexOf(d[a].show)});if(!A.length)return k&&f.path("/my-fringe"),"no-possible-desired";var B=A.filter(function(a){var b=d[a],c=b.start,e=b.stop;b=h[b.show].venue;for(var f=0;f<A.length;f++){var g=A[f];if(a!==g){g=d[g];var k=p[b][h[g.show].venue]+m.minimumArriveBeforeShowTime;if(!(e<g.start-
k||c>g.stop+k))return!1}}return!0}).map(function(a){return{id:a,performance:d[a],showId:d[a].show,show:h[d[a].show],venueId:h[d[a].show].venue,venue:n[h[d[a].show].venue]}});B=B.filter(function(a){for(var b=0;b<B.length;b++)if(B[b].id!==a.id&&B[b].showId===a.showId)return!1;return!0});a.instantAddScreenCount++;if(B.length)return a.instantAddPerformances=B,"instant-add";a.showsOnScheduleCount=y.length;return k?"done":"generator"};a.getProgressType=function(a,b){return a===b?"success":a<b/2?"danger":
"warning"};a.addInstantAdd=function(){angular.forEach(a.instantAddPerformances,function(a){e.add(a.id)});p()};a.generate=function(){c.open({templateUrl:"app/myFringe/autoScheduler/autoSchedulerModal/autoSchedulerModal.html",controller:"AutoSchedulerModalCtrl",size:"lg",backdrop:"static",keyboard:!1}).result.then(function(){k=!0;p()},function(){a.screen="done"})};var p=function(){a.screen="";d(function(){a.screen=r()},500)};h.getSettings().autoScheduleIntroComplete?p():(a.screen="intro",a.completeIntro=
function(){var a=h.getSettings();a.autoScheduleIntroComplete=!0;h.setSettings(a);p()})}]});
angular.module("fringeApp").controller("AutoSchedulerModalCtrl",["$uibModalInstance","$scope","$timeout","Configuration","Data","Schedule","UserData","generatorFactory","Plurals",function(a,b,d,c,f,g,e,h,l){b.moment=moment;b.plurals=l;b.infoMessages=c.generatorMessages;b.isUserAttendingPerformance=g.isUserAttendingPerformance;b.userData={settings:e.getSettings(),preferences:e.getPreferences()};b.$watch("userData.settings",function(){e.setSettings(b.userData.settings)});var m=function(a,c){b.proposed=
[];b.unscheduled=[];b.accept={};for(var d={4:[],3:[],2:[],1:[]},e=a.length;e--;){b.accept[a[e]]=!1;var f=u.performances[a[e]].show;-1===c.indexOf(f)&&(b.proposed.push(a[e]),d[g.getShowDesire(f)].push(a[e]),b.accept[a[e]]=!0)}for(e=0;e<v.length;e++)-1<c.indexOf(v[e])&&b.unscheduled.push(v[e])},n,k,r=function(){b.currentMessage=0;var a=!0,e=function(){a&&(b.currentMessage=++b.currentMessage%c.generatorMessages.length,d(e,1E4))};d(e,1E4);return function(){a=!1}},p=function(){var a=Date.now(),c=0,e=[];
n=h.create();n.notification=function(f,g,h,l){var n=this.fitness(f.entity,!0);b.bestFitness=h.maximum;b.bestExtraPoints=n.extraPoints;b.worstFitness=h.minimum;b.currentGeneration=g;b.progressByDesire=n.groups;b.progressByDesire={1:n.groups[1]+b.progressByDesireBase[1],2:n.groups[2]+b.progressByDesireBase[2],3:n.groups[3]+b.progressByDesireBase[3],4:n.groups[4]+b.progressByDesireBase[4]};l?(b.progress=100,b.done=!0,d(function(){m(f.entity,n.conflicts)},750),k()):(b.progress=(f.fitness-n.extraPoints)/
b.idealFitness*90,b.progress+=g/b.generationCount*10,b.bestSchedule=f.entity,b.bestConflicts=n.conflicts,0<g&&(e.push((Date.now()-a)/(g-c)),5<e.length&&e.shift(),b.timeRemaining=e.reduce(function(a,b){return a+b})/e.length*(b.generationCount-g)),a=Date.now(),c=g);b.$apply()};d(function(){n.evolve(w,u);k=r()},100);return n};b.getProgressType=function(a,b){return a===b?"success":a<b/2?"danger":"warning"};b.start=function(){b.progress=0;b.currentGeneration=0;b.progressByDesire={1:0,2:0,3:0,4:0};b.proposed=
void 0;b.accept={};b.bestFitness=0;b.bestExtraPoints=0;b.worstFitness=0;b.done=!1;b.currentMessage=0;d(p,500)};b.stop=function(){k();n.stop();b.progress=100;d(function(){m(b.bestSchedule,b.bestConflicts)},1E3)};b.restart=function(){k();n.stop();b.start()};b.save=function(){angular.forEach(b.accept,function(a,b){!0===a&&g.add(b)});a.close()};b.close=function(){a.dismiss()};b.examplePowers=[{w:5,p:[{i:1,p:"6"},{i:2,p:"36"},{i:3,p:"216"},{i:4,p:"1,296"},{i:5,p:"7,776"},{i:6,p:"46,656"},{i:7,p:"279,936"},
{i:8,p:"1,679,616"},{i:9,p:"10,077,696"}]},{w:7,p:[{i:10,p:"60,466,176"},{i:15,p:"470,184,984,576"},{i:20,p:"3,656,158,440,062,976"},{i:25,p:"28,430,288,029,929,700,000"},{i:30,p:"221,073,919,720,733,357,899,776"},{i:35,p:"1,719,070,799,748,422,591,028,658,176"},{i:40,p:"13,367,494,538,843,734,067,838,845,976,576"},{i:45,p:"103,945,637,534,048,876,111,514,866,313,854,976"},{i:50,p:"808,281,277,464,764,060,643,139,600,456,536,293,376"}]}];var t=g.getPossiblePerformances(),q=g.getShowsAttending();b.shows=
f.getShows();b.performances=f.getPerformances();b.distances=f.getVenueDistances();var v=f.getSortedShows();b.sortedPerformances=f.getSortedPerformances();b.venues=f.getVenues();f=t.filter(function(a){return 0<g.getShowDesire(b.performances[a].show)});b.generationCount=Math.max(500,Math.min(1E3,2*f.length));b.populationSize=Math.floor(Math.max(500,Math.min(3E3,Math.pow(f.length,1.175))));b.crossoverRate=.9;b.mutationRate=.2;b.desireFitnessPoints=[0,3,7,15,31];b.arrivalThreshold=c.minimumArriveBeforeShowTime;
var w={iterations:b.generationCount,size:b.populationSize,crossover:b.crossoverRate,mutation:b.mutationRate,skip:Math.ceil((b.generationCount*b.populationSize-25E4)/92E4)+2,maxResults:1};var u={shows:{},showIds:[],performances:{},venueDistances:b.distances,desireToFitnessMap:b.desireFitnessPoints,extraPointsForAdjacentVenues:1,extraPointsForTimeOff:1,timeOffThreshold:7200,adjacentVenueThreshold:600,extraPointsForEmptyDays:1,idealFitness:0,iterations:b.generationCount,populationSize:b.populationSize,
arrivalThreshold:b.arrivalThreshold};b.progressByDesireMax={1:0,2:0,3:0,4:0};b.progressByDesireBase={1:0,2:0,3:0,4:0};angular.forEach(b.shows,function(a,c){var d=g.getShowDesire(c),e=a.performances.filter(function(a){return-1<t.indexOf(a)});-1<q.indexOf(c)&&(b.progressByDesireMax[d]++,b.progressByDesireBase[d]++);if(0===d||0===e.length||-1<q.indexOf(c))return!0;b.progressByDesireMax[d]++;u.showIds.push(c);u.shows[c]={name:a.name,desire:d,venue:a.venue,performances:[]};u.idealFitness+=u.desireToFitnessMap[d];
angular.forEach(e,function(d){var e=b.performances[d];u.performances[d]={start:e.start,stop:e.stop,show:c,offsetTimes:{}};u.shows[c].performances.push(d);angular.forEach(b.distances,function(c,f){u.performances[d].offsetTimes[f]={start:e.start-c[a.venue]-b.arrivalThreshold,stop:e.stop+c[a.venue]+b.arrivalThreshold}})})});u.performanceIds=Object.keys(u.performances).shuffle();f=Object.keys(u.performances).sort(function(a,b){var c=u.performances[a],d=u.performances[b];return d.start-c.start||d.stop-
c.stop});for(l=0;l<f.length;l++)u.performances[f[l]].sortOrder=l;b.idealFitness=u.idealFitness;console.log("Generator Config: ",u);b.start()}]);
angular.module("fringeApp").factory("generatorFactory",function(){return{create:function(){var a=Genetic.create();a.seed=function(){for(var a=[],d=this.userData.showIds.length;d--;){var c=this.userData.shows[this.userData.showIds[d]].performances;a.push(c[Math.floor(Math.random()*c.length)])}return a};a.mutate=function(a){for(var b=2;b--;){var c=Math.floor(Math.random()*a.length),f=this.userData.shows[this.userData.performances[a[c]].show].performances;a[c]=f[Math.floor(Math.random()*f.length)];b--}return a};
a.crossover=function(a,d){var b=this.userData.performances,f=a.length,g=Math.floor(Math.random()*f);f=Math.floor(Math.random()*f);var e=[a,d].map(function(a){return a.slice(0).sort(function(a,c){return b[a].show-b[c].show})});if(g>f){var h=f;f=g;g=h}return[e[0].slice(0,g).concat(e[1].slice(g,f)).concat(e[0].slice(f)),e[1].slice(0,g).concat(e[0].slice(g,f)).concat(e[1].slice(f))]};a.fitness=function(a,d){for(var b=this.userData.performances,f=this.userData.shows,g=a.slice().sort(function(a,c){return b[a].sortOrder-
b[c].sortOrder}),e=0,h=0,l=[0,0,0,0,0],m={},n=[],k=!1,r=g.length,p=r,t=0,q=0,v,w,u,x;p--;){v=g[p];u=b[v];w=f[u.show];k=!1;q=t=0;m[v]=[];var E=w.desire;for(t=1;t<r;t++){q=p-t;if(void 0===g[q])break;w=g[q];q=b[w];x=f[q.show];E<=x.desire&&q.start<u.offsetTimes[x.venue].stop&&(m[v].push(w),n.push(u.show),k=!0);if(q.start>u.stop+3600)break}for(t=1;t<r;t++){q=p+t;if(void 0===g[q])break;w=g[q];q=b[g[q]];x=f[q.show];E<=x.desire&&q.stop>u.offsetTimes[x.venue].start&&(m[v].push(w),n.push(u.show),k=!0);if(q.stop<
u.start-3600)break}k||(e+=this.userData.desireToFitnessMap[E],l[E]++)}if(n.length)for(k=[],r=5;--r;)a:for(p=0;p<this.userData.performanceIds.length;p++)if(v=this.userData.performanceIds[p],u=b[v],m[v]&&m[v].length&&f[u.show].desire===r){for(t=0;t<m[v].length;t++){w=m[v][t];if(-1<k.indexOf(w))continue a;if(!(void 0!==m[w]&&0<m[w].length))continue a}k.push(v);e+=this.userData.desireToFitnessMap[r];l[r]++;n.splice(n.indexOf(b[v].show),1)}for(p=g.length-1;p--;)u=b[g[p]],q=b[g[p+1]],this.userData.adjacentVenueThreshold>
this.userData.venueDistances[f[u.show].venue][f[q.show].venue]&&(h+=this.userData.extraPointsForAdjacentVenues),h+=Math.max(0,Math.floor((u.start-q.stop)/this.userData.timeOffThreshold)*this.userData.extraPointsForTimeOff);e+=h;return d?{fitness:e,groups:l,extraPoints:h,conflicts:n}:e};a.generation=function d(a,d){return void 0===this.userData.genState||this.userData.genState.lastFitness<a[0].fitness?(this.userData.genState={lastFitness:a[0].fitness,sinceGeneration:d},!0):100>=d-this.userData.genState.sinceGeneration};
return a}}});
angular.module("fringeApp").component("myFringeSchedule",{templateUrl:"app/myFringe/schedule/schedule.html",controller:["$scope","$uibModal","$timeout","Schedule","Data","GoogleCalendarSync","Configuration",function(a,b,d,c,f,g,e){a.moment=moment;a.interestText=e.interestText;a.filter={currentDay:0};a.refresh=function(){a.amazingSchedule={};a.calendarSyncEnabled=g.isSetup();a.hasPreferences=0<c.getDesiredShows().length;a.hasSchedule=0<c.getSchedule().length;var b=c.getSortedSchedule();angular.forEach(b,
function(b){var c=h[b],d=moment(c.start,"X").startOf("day").unix();void 0===a.amazingSchedule[d]&&(a.amazingSchedule[d]=[]);a.amazingSchedule[d].push({as:"performance",id:b,start:c.start,stop:c.stop,show:c.show})});a.days=Object.keys(a.amazingSchedule).map(function(a){return+a});d(function(){a.loaded=!0})};a.removeFromSchedule=function(b){c.remove(b);a.refresh()};a.shows=f.getShows();var h=f.getPerformances();a.venues=f.getVenues();f.getVenueDistances();a.refresh();-1<a.days.indexOf(moment().startOf("day").unix())?
a.filter.currentDay=moment().startOf("day").unix():a.filter.currentDay=a.days[0];a.openGoogleCalendarSyncSetup=function(){b.open({templateUrl:"app/myFringe/schedule/googleCalendarSyncSetupModal/googleCalendarSyncSetupModal.html",controller:"GoogleCalendarSyncSetupModalCtrl",size:"md"}).result.then(function(){a.refresh()},function(){a.refresh()})}}]});
angular.module("fringeApp").controller("GoogleCalendarSyncSetupModalCtrl",["$uibModalInstance","$scope","$timeout","GoogleCalendarSync",function(a,b,d,c){var f=function(){d(function(){b.$apply()})},g=function(){b.isSetup=c.isSetup();b.hasPermission=b.isSetup||c.hasPermission();b.isSyncing=!1;b.hasPermission&&(b.isSetup?b.calendarUrl=c.getCalendarLink():(c.getCalendars().then(function(a){b.primaryCalendar=a.shift();b.secondaryCalendars=a}),b.setupConfig={target:"primary",secondary:"NEW",secondaryName:"My Fringe"}),
f())};g();b.close=a.dismiss;b.requestPermission=function(){c.requestPermission().then(function(){b.apply(g)})};b.setup=function(){b.isSetup=!0;b.isSyncing=!0;("primary"===b.setupConfig.target?c.setupInExisting(b.primaryCalendar.id):"NEW"===b.setupConfig.secondary?c.setupInNew(b.setupConfig.secondaryName):c.setupInExisting(b.setupConfig.secondary)).then(function(){d(function(){b.$apply(function(){b.progress=b.max;d(g,500)})})},function(){g()},function(a){b.progress=a.progress;b.max=a.max;f()})};b.turnOff=
function(){c.disconnect();b.close()}}]);
angular.module("fringeApp").component("fringeMap",{templateUrl:"app/map/map.html",controller:["$scope","$routeParams","NgMap","$window","$timeout","$q","debounce","Data","MapConfig",function(a,b,d,c,f,g,e,h,l){a.lawnPolygon=l.lawnPolygon;a.isGroupVisible={};a.venueHosts=h.getVenueHosts();var m=h.getVenues();a.markerGroups=l.markerGroups.slice(0);a.views=l.views.slice(0);a.venueViews={};g=Object.keys(m).map(function(a){var b=m[a];return{byov:b.byov,position:b.mapPos,title:b.name,icon:b.mapIcon,venue:a,
host:b.host}});a.markerGroups[0].markers=g.filter(function(a){return a.byov});a.markerGroups[1].markers=g.filter(function(a){return!a.byov});a.toggleGroup=function(b){a.isGroupVisible[b]=!a.isGroupVisible[b]};var n=function(a,b){for(var c=new google.maps.LatLngBounds,e=0;e<a.length;e++)c.extend(new google.maps.LatLng(a[e][0],a[e][1]));r();d.getMap().then(function(a){a.setCenter(c.getCenter());a.fitBounds(c);a.getZoom()>b&&a.setZoom(b)})};a.gotoView=function(b){var c=[];angular.forEach(a.markerGroups,
function(d){a.isGroupVisible[d.id]=!1;if(!0===b.markerGroups||-1<b.markerGroups.indexOf(d.id))a.isGroupVisible[d.id]=!0,angular.forEach(d.markers,function(a){if(("venues"===d.id||"byov"===d.id)&&b.venueHosts&&-1===b.venueHosts.indexOf(a.venueHost))return!0;c.push(a.position)})});b.center&&b.zoom?d.getMap().then(function(a){a.setCenter(new google.maps.LatLng(b.center[0],b.center[1]));a.setZoom(b.zoom)}):n(c)};var k=function(){a.innerHeight=c.innerHeight;f(function(){d.getMap().then(function(a){google.maps.event.trigger(a,
"resize")})})};angular.element(c).on("resize",e(function(){a.$apply(k)},100));k();var r=function(){a.markerWindow&&d.getMap().then(function(b){b.hideInfoWindow("marker-info");a.markerWindow=void 0})};a.markerClick=function(b,c,e,f){r();d.getMap().then(function(b){a.markerWindow={title:c.title,location:c.location||c.host&&a.venueHosts[c.host].name,address:c.address||c.host&&a.venueHosts[c.host].address,venue:"venues"===e||"byov"===e?c.venue:!1,id:e+"-"+f,notes:c.notes};b.setCenter(new google.maps.LatLng(c.position[0],
c.position[1]));b.showInfoWindow("marker-info",a.markerWindow.id)})};d.getMap().then(function(){if(b.venue){var c=h.findVenueIdBySlug(b.venue);if(c){var e=m[c].mapPos;angular.forEach(a.markerGroups,function(b){a.isGroupVisible[b.id]=!0});d.getMap().then(function(a){a.setCenter(new google.maps.LatLng(e[0],e[1]));a.setZoom(21)})}}else if(b.host){var f=h.findVenueHostIdBySlug(b.host),g=[];f&&(angular.forEach(a.markerGroups,function(b){a.isGroupVisible[b.id]=!0;angular.forEach(b.markers,function(a){a.host===
f&&g.push(a.position)})}),n(g,19))}else a.gotoView(a.views[l.initialView]);a.mapLoaded=!0})}]});
angular.module("fringeApp").component("schedule",{templateUrl:"app/schedule/schedule.html",controller:["$scope","$timeout","$location","$routeParams","UserData","Data","Schedule","Availability","Plurals",function(a,b,d,c,f,g,e,h,l){a.signedIn=f.isSignedIn();a.moment=moment;a.plurals=l;a.settings={scheduleMode:f.getSettings().scheduleMode};a.preferences=f.getPreferences();if(c.param1)if(-1<["full","smart"].indexOf(c.param1)){if(a.settings.scheduleMode=c.param1,c.param2)var m=c.param2}else m=c.param1;
a.signedIn||(a.settings.scheduleMode="full");c=g.getSortedPerformances();var n=g.getPerformances(),k=g.getShows(),r=g.getVenues(),p=g.getRatings(),t=c.map(function(a){var b=n[a],c=k[b.show];return{id:a,performance:b,showId:b.show,show:c,venueId:c.venue,venue:r[c.venue],rating:p[c.rating],isAttending:!1,canAttend:!1,canBeScheduled:!1,attendState:"no"}});g=a.days=Object.keys(g.getAvailabilitySlots()).map(function(a){return+a});var q=function(){t&&(a.dataLoaded=!1,b(function(){var c=e.getPossiblePerformances(),
d=e.getShowsAttending(),f=e.getSchedule(),g=Date.now()/1E3;a.schedule=t.filter(function(b){return!(b.performance.start<a.filter.currentDay||b.performance.start>a.filter.currentDay+86400)}).map(function(a){a.isAttending=-1<f.indexOf(a.id);a.canAttend=h.isUserAvailable(a.performance.start,a.performance.stop);a.canBeScheduled=-1<c.indexOf(a.id);a.attendState=e.getPerformanceScheduleState(a.id);a.inPast=a.performance.start<g;return a}).filter(function(b){return"full"===a.settings.scheduleMode||"yes"===
b.attendState?!0:!b.inPast&&b.canBeScheduled&&-1===d.indexOf(b.showId)});b(function(){a.dataLoaded=!0})}))},v=function(){void 0!==a.days&&-1!==a.days.indexOf(a.filter.currentDay)&&d.path("/schedule/"+a.settings.scheduleMode+"/"+moment(a.filter.currentDay,"X").format("Y-MM-DD"),!1)};a.$watch("settings",function(){var b=f.getSettings();b.scheduleMode=a.settings.scheduleMode;f.setSettings(b);v();q()},!0);a.$watch("userData.preferences",q,!0);a.filter={currentDay:0,dayId:0};-1<g.indexOf(moment(m).unix())?
a.filter.currentDay=moment(m).unix():-1<g.indexOf(moment().startOf("day").unix())?a.filter.currentDay=moment().startOf("day").unix():a.filter.currentDay=g[0];a.$watch("filter.currentDay",function(){a.filter.dayId=a.days.indexOf(a.filter.currentDay)+1;v();q();setTimeout(function(){window.scroll(0,196)})});a.addToSchedule=function(a){e.add(a);q()};a.removeFromSchedule=function(a){e.remove(a);q()};a.addMaybe=function(a){e.addMaybe(a);q()};b(function(){a.loaded=!0})}]});
angular.module("fringeApp").component("show",{templateUrl:"app/show/show.html",controller:["$scope","$routeParams","Data","Schedule","$sce",function(a,b,d,c,f){a.moment=moment;a.now=Date.now()/1E3;a.showId=d.findShowIdBySlug(b.show);a.show=d.getShow(a.showId);a.firstPerformance=d.getPerformance(a.show.performances[0]);a.performances=d.getPerformances();a.venues=d.getVenues();a.ratings=d.getRatings();a.isUserAttendingPerformance=c.isUserAttendingPerformance;a.trustAsHtml=f.trustAsHtml}]});
angular.module("fringeApp").component("shows",{templateUrl:"app/shows/shows.html",controller:["$scope","$window","$timeout","$filter","$routeParams","debounce","Data","UserData","Plurals","Schedule",function(a,b,d,c,f,g,e,h,l,m){a.moment=moment;a.plurals=l;a.allShowPerformances={};a.isUserAttendingPerformance=m.isUserAttendingPerformance;a.isFringeOngoing=e.isFringeOngoing();a.userData={preferences:h.getPreferences()};a.shows=e.getShows();a.venues=e.getVenues();a.ratings=e.getRatings();a.prices=e.getPrices();
a.sortedShows=e.getSortedShows();a.performances=e.getPerformances();a.performanceCounts={};a.canAttendShow={};var n=m.getPossiblePerformances();angular.forEach(a.shows,function(b,c){var d=b.performances.filter(function(b){return a.performances[b].start>Date.now()/1E3});a.performanceCounts[c]=d.length;h.isSignedIn()&&(a.canAttendShow[c]=!1,angular.forEach(b.performances,function(b){if(-1<n.indexOf(b))return a.canAttendShow[c]=!0,!1}))});a.venueOptions=Object.keys(a.venues).map(function(b){return{value:b,
label:a.venues[b].name}}).sort(function(a,b){return a.label.localeCompareSmart(b.label)});a.venueOptions.unshift({value:"*",label:"All Venues"});a.ratingOptions=a.ratings.map(function(a,b){return{value:b,label:a}});a.ratingOptions.unshift({value:"*",label:"All Ratings"});a.resetFilters=function(){a.search="";a.selectedVenue="*";a.hideWithoutShowtimes=!1;a.hideNotInterested=!1;a.hideNotAttending=!1;a.hideCantAttend=!1};a.refresh=function(){var b=m.getShowsAttending(),c=a.search.toLowerCase().replace(/[^\s\d\w'!?"&-:,\(\)#]/g,
"").trim()||"",e=c.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),f=new RegExp("("+e+")(?![^<]*>|[^<>]*<\\/)","i");a.allShows=a.sortedShows.filter(function(d){var e=a.shows[d];if("*"!==a.selectedVenue&&e.venue!==a.selectedVenue||a.hideWithoutShowtimes&&0===a.performanceCounts[d]||a.hideNotInterested&&0===m.getShowDesire(d)||a.hideNotAttending&&-1===b.indexOf(d)||a.hideCantAttend&&!a.canAttendShow[d]&&-1===b.indexOf(d))return!1;d=[e.name,e.description|0,e.artist||"",e.artistLocation||"",a.venues[e.venue].name].join(" ").replace(/&amp;/g,
"&").replace(/&quot;/g,'"');return c&&!f.exec(d)?!1:!0});d(function(){a.dataLoaded=!0},100)};a.searchTextEntered=g(function(){a.$apply(a.refresh)},50);a.clearSearch=function(){a.search="";a.refresh()};a.resetFilters();void 0!==f.venue&&(a.selectedVenue=e.findVenueIdBySlug(f.venue)||"*");d(function(){a.$watch("userData.preferences",a.refresh,!0)})}]});
angular.module("fringeApp").component("showsOld",{templateUrl:"app/showsOld/showsOld.html",controller:["$scope","$window","$timeout","$filter","$routeParams","debounce","Data","UserData","Plurals","Schedule",function(a,b,d,c,f,g,e,h,l,m){console.log("here");a.isSignedIn=h.isSignedIn();a.moment=moment;a.plurals=l;a.allShowPerformances={};a.currentPage=1;a.perPage=10;a.isUserAttendingPerformance=m.isUserAttendingPerformance;a.userData={preferences:h.getPreferences()};a.otherOptions=[{value:"*",label:"All Shows"},
{value:"interested",label:"Interested Only"},{value:"attending",label:"Attending Only"}];a.shows=e.getShows();a.venues=e.getVenues();a.ratings=e.getRatings();a.prices=e.getPrices();a.sortedShows=e.getSortedShows();a.performances=e.getPerformances();a.venueOptions=Object.keys(a.venues).map(function(b){return{value:b,label:a.venues[b].name}}).sort(function(a,b){return a.label.localeCompareSmart(b.label)});a.venueOptions.unshift({value:"*",label:"All Venues"});a.ratingOptions=a.ratings.map(function(a,
b){return{value:b,label:a}});a.ratingOptions.unshift({value:"*",label:"All Ratings"});a.priceOptions=a.prices.map(function(a){return{value:a,label:c("price")(a)}});a.priceOptions.unshift({value:"*",label:"All Prices"});a.showAllPerformances=function(b){a.allShowPerformances[b]=!0};a.scroll=function(){d(function(){b.scroll(0,210)})};a.resetFilters=function(){a.selectedVenue="*";a.selectedRating="*";a.selectedPrice="*";a.selectedOther="*";a.search="";a.searchText=""};a.refresh=function(){a.buildData();
a.scroll()};a.buildData=function(){var b=m.getShowsAttending();a.searchText=a.search.toLowerCase().replace(/[^\s\d\w'!?"&-:,\(\)#]/g,"").trim()||"";var c=a.searchText.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),d=new RegExp("("+c+")(?![^<]*>|[^<>]*<\\/)","i");a.allShows=a.sortedShows.filter(function(c){var e=a.shows[c];if("*"!==a.selectedVenue&&e.venue!==a.selectedVenue||"*"!==a.selectedRating&&e.rating!==a.selectedRating||"*"!==a.selectedPrice&&e.price!==a.selectedPrice||"interested"===
a.selectedOther&&0===m.getShowDesire(c)||"attending"===a.selectedOther&&-1===b.indexOf(c))return!1;c=e.name+" "+e.description+" "+e.artist;c=c.replace(/&amp;/g,"&").replace(/&quot;/g,'"');return a.searchText&&!d.exec(c)?!1:!0})};a.searchTextEntered=g(function(){a.$apply(a.buildData)},50);a.clearSearch=function(){a.search="";a.buildData()};a.$watch("userData.preferences",a.buildData,!0);a.resetFilters();void 0!==f.venue?a.selectedVenue=f.venue:void 0!==f.show&&(a.search=a.shows[f.show].name);a.buildData()}]});
angular.module("fringeApp").component("venues",{templateUrl:"app/venues/venues.html",controller:["$scope","Data",function(a,b){a.distanceCalc={from:0,to:void 0,driving:""};a.getHostVenues=function(b){return Object.keys(a.venues).filter(function(c){return a.venues[c].host===b}).sort(function(b,c){return a.venues[b].name.localeCompareSmart(a.venues[c].name)})};var d=function(){if(a.distanceCalc.from&&a.distanceCalc.to){var b=[a.venueHosts[a.venues[a.distanceCalc.from.value].host].driving,a.venueHosts[a.venues[a.distanceCalc.to.value].host].driving],
d=["assumed","recommended","possible"];a.distanceCalc.driving="";for(var g=0;g<d.length;g++)if(-1<b.indexOf(d[g])){a.distanceCalc.driving=d[g];break}}};a.$watch("distanceCalc.from",d);a.$watch("distanceCalc.to",d);a.venues=b.getVenues();a.venueHosts=b.getVenueHosts();a.distances=b.getVenueDistances();a.venueOptions=Object.keys(a.venues).map(function(b){return{value:b,label:a.venues[b].name}}).sort(function(a,b){return a.label.localeCompareSmart(b.label)});for(a.distanceCalc.from=a.venueOptions.randomElement();void 0===
a.distanceCalc.to||a.distanceCalc.to===a.distanceCalc.from;)a.distanceCalc.to=a.venueOptions.randomElement()}]});
angular.module("fringeApp").component("test",{templateUrl:"app/test/test.html",controller:["$scope","UserData",function(a,b){function d(){this.workers={}}a.userData=b["export"]();a["import"]=function(c){c=angular.extend({},{preferences:[],unavailability:[],schedule:[],maybe:[],settings:{scheduleMode:"full",displaySchedulerStats:!0}},c);b["import"](JSON.stringify(c));a.userData=b["export"]()};a.testData={"New User":{settings:{scheduleMode:"full"}},"Preferences (all 1s)":{preferences:{1:1,2:1,4:1,5:1,
6:1,7:1,8:1,9:1,10:1,11:1,12:1,13:1,14:1,15:1,16:1,17:1,18:1,19:1,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:1,28:1,29:1,30:1,31:1,32:1,33:1,34:1,35:1,36:1,37:1,38:1,39:1,40:1,41:1,42:1,43:1,44:1,45:1,46:1,47:1,48:1,49:1,50:1,51:1,52:1,53:1,54:1,55:1,56:1,57:1,58:1,59:1,60:1,61:1,62:1,63:1,64:1,65:1,66:1,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:1,75:1,76:1,77:1,78:1,79:1,80:1,81:1,82:1,83:1,84:1,85:1,86:1,87:1,88:1,89:1,90:1,91:1,92:1,93:1,94:1,95:1,96:1,97:1,98:1,99:1,100:1,101:1,102:1,103:1,104:1,105:1,
106:1,107:1,108:1,109:1,110:1,111:1,112:1,113:1,114:1,115:1,116:1,117:1,118:1,119:1,120:1,121:1,122:1,123:1,124:1,125:1,126:1,127:1,128:1,129:1,130:1,131:1,132:1,133:1,134:1,135:1,136:1,137:1,138:1,139:1,140:1,141:1,142:1,143:1,144:1,145:1,146:1,147:1,148:1,149:1,150:1,151:1,152:1,153:1,154:1,155:1,156:1,157:1,158:1,159:1,160:1,161:1,162:1,163:1,186:1},settings:{autoScheduleIntroComplete:!0,scheduleMode:"full",displaySchedulerStats:!0}},Preferences:{preferences:{1:1,2:4,4:2,6:3,7:4,8:4,9:2,10:3,12:4,
15:4,22:3,27:1,28:2,29:3,32:3,33:2,34:1,35:2,41:2,46:4,47:3,50:4,51:3,54:3,63:2,68:2,70:3,71:1,72:1,73:4,74:4,77:2,80:1,82:2,83:3,84:4,86:4,87:3,90:4,98:1,99:3,100:2,102:2,103:3,104:2,105:3,106:4,107:1,111:2,112:4,114:2,117:4,119:4,122:4,123:1,126:3,127:2,128:4,129:3,130:4,131:3,138:3,140:1,142:1,146:2,149:1,151:1,153:2,155:4,159:1,186:4},settings:{autoScheduleIntroComplete:!0,scheduleMode:"full",displaySchedulerStats:!0}},Availability:{},Schedule:{schedule:"715 549 515 817 923 531 451 932".split(" "),
settings:{autoScheduleIntroComplete:!0,scheduleMode:"full",displaySchedulerStats:!0}},"Preferences and Schedule":{preferences:{1:1,2:4,4:2,6:3,7:4,8:4,9:2,10:3,12:4,15:4,22:3,27:1,28:2,29:3,32:3,33:2,34:1,35:2,41:2,46:4,47:3,50:4,51:3,54:3,63:2,68:2,70:3,71:1,72:1,73:4,74:4,77:2,80:1,82:2,83:3,84:4,86:4,87:3,90:4,98:1,99:3,100:2,102:2,103:3,104:2,105:3,106:4,107:1,111:2,112:4,114:2,117:4,119:4,122:4,123:1,126:3,127:2,128:4,129:3,130:4,131:3,138:3,140:1,142:1,146:2,149:1,151:1,153:2,155:4,159:1,186:4},
schedule:"715 549 515 817 923 531 451 932".split(" "),settings:{autoScheduleIntroComplete:!0,scheduleMode:"full",displaySchedulerStats:!0}},"Preferences and Schedule (Full)":{preferences:{1:1,2:4,4:2,6:3,7:4,8:4,9:2,10:3,12:4,15:4,22:3,27:1,28:2,29:3,32:3,33:2,34:1,35:2,41:2,46:4,47:3,50:4,51:3,54:3,63:2,68:2,70:3,71:1,72:1,73:4,74:4,77:2,80:1,82:2,83:3,84:4,86:4,87:3,90:4,98:1,99:3,100:2,102:2,103:3,104:2,105:3,106:4,107:1,111:2,112:4,114:2,117:4,119:4,122:4,123:1,126:3,127:2,128:4,129:3,130:4,131:3,
138:3,140:1,142:1,146:2,149:1,151:1,153:2,155:4,159:1,186:4},schedule:"1 2 3 55 187 211 245 291 438 465 549 594 705 745 811 419 795 265 883 378 901 824 817 31 260 489 898 639 727 756 664 113 808 534 916 183 43 501 156 657 19 195 923 508 74 683 785 515 852 864 875 778 288 715 40 635 678 672 235 927 316 165 531 28 653 430 145 412 330 437 805 451 932".split(" "),settings:{autoScheduleIntroComplete:!0,scheduleMode:"full",displaySchedulerStats:!0}}};d.prototype.add=function(a,b){var c=this;(this.workers[a]=
new Worker(b)).onmessage=function(b){c._onmessage(a,b)};return this};d.prototype.send=function(a,b,c,d){this.workers[a].postMessage([d,b,null===c||"string"===typeof c?c:JSON.stringify(c)]);return this};d.prototype._onmessage=function(a,b){var c=b.data[0];if("send"===c)this.send(b.data[1],b.data[2],b.data[3]||null,a);else if("respond"===c)this.onmessage(b.data[1]&&JSON.parse(b.data[1])||null)};d.prototype.terminate=function(){for(var a in this.workers)this.workers.hasOwnProperty(a)&&this.workers[a].terminate()};
var c=new d;c.onmessage=function(a){console.log(a);c.terminate()};c.add("core","/app/test/autoScheduler/core.js");c.add("fitness1","/app/test/autoScheduler/fitness.js");c.add("fitness2","/app/test/autoScheduler/fitness.js");for(var f={a:123,b:!0,c:"test",d:[1,2]},g=0;1E4>g;g++)f.d.push(g);c.send("core","start",f)}]});
