var Genetic=function(){function b(){this.crossover=this.mutate=this.seed=this.fitness=null;this.select1=function(a){this.internalGenState.rlr=this.internalGenState.rlr||0;return a[Math.floor(Math.random()*Math.min(a.length,this.internalGenState.rlr++))].entity};this.select2=function(a){return[this.select1(a),this.select1(a)]};this.notification=this.generation=this.optimize=null;this.configuration={size:250,crossover:.9,mutation:.2,iterations:100,fittestAlwaysSurvives:!0,maxResults:100,skip:0};this.userData=
{};this.internalGenState={};this.entities=[];this.start=function(){function a(a){return Math.random()<=c.configuration.mutation&&c.mutate?c.mutate(a):a}var b,c=this;for(b=0;b<this.configuration.size;++b)this.entities.push(this.seed());for(b=0;b<this.configuration.iterations;++b){this.internalGenState={};var f=this.entities.map(function(a){return{fitness:c.fitness(a),entity:a}}).sort(function(a,b){return c.optimize(a.fitness,b.fitness)?-1:1}),m={maximum:f[0].fitness,minimum:f[f.length-1].fitness},
n=this.generation?this.generation(f.slice(0,this.configuration.maxResults),b,m):!0;n="undefined"!==typeof n&&!n||b===this.configuration.iterations-1;this.notification&&(n||0===this.configuration.skip||0==b%this.configuration.skip)&&this.sendNotification(f.slice(0,this.configuration.maxResults),b,m,n);if(n)break;m=[];for(this.configuration.fittestAlwaysSurvives&&m.push(f[0].entity);m.length<c.configuration.size;)this.crossover&&Math.random()<=this.configuration.crossover&&m.length+1<c.configuration.size?
(n=this.select2(f),n=this.crossover(n[0],n[1]).map(a),m.push(n[0],n[1])):m.push(a(c.select1(f)));this.entities=m}};this.sendNotification=function(a,b,c,f){postMessage({best:a[0],generation:b,stats:c,isFinished:f})}}var a={stringify:function(a){return JSON.stringify(a,function(a,b){return b instanceof Function||"function"===typeof b?"__func__:"+b.toString():b instanceof RegExp?"__regex__:"+b:b})},parse:function(a){return JSON.parse(a,function(a,b){return"string"!==typeof b?b:0===b.lastIndexOf("__func__:",
0)?eval("("+b.slice(9)+")"):0===b.lastIndexOf("__regex__:",0)?eval("("+b.slice(10)+")"):b})}},c=function(a){return null===a||"object"!==typeof a?a:JSON.parse(JSON.stringify(a))},f={Maximize:function(a,b){return a>=b},Minimize:function(a,b){return a<b}};b.prototype.evolve=function(b,g){function d(a){return a.replace(/[\\"']/g,"\\$&").replace(/\u0000/g,"\\0")}for(var e in b)this.configuration[e]=b[e];for(e in g)this.userData[e]=g[e];e="var Serialization = {'stringify': "+a.stringify.toString()+", 'parse': "+
a.parse.toString()+"};\n";e+="var Clone = "+c.toString()+";\n";e+='var Optimize = Serialization.parse("'+d(a.stringify(f))+'");\n';e+='var genetic = Serialization.parse("'+d(a.stringify(this))+'");\n';var m=this;e=new Blob([e+"onmessage = function(e) { genetic.start(); }\n"]);this.worker=new Worker(window.URL.createObjectURL(e));this.worker.onmessage=function(a){a=a.data;m.notification(a.best,a.generation,a.stats,a.isFinished)};this.worker.postMessage("")};b.prototype.stop=function(){this.worker.terminate()};
return{create:function(){return new b},Optimize:f,Clone:c}}();
!function(b,a){"object"==typeof exports?module.exports=a(require("angular")):"function"==typeof define&&define.amd?define(["angular"],a):a(b.angular)}(this,function(b){return b.module("ngMap",[]),function(){var a,c=function(c,e,g,d,h,m,n,q,k){a=m;var l=this,f=h.startSymbol(),r=h.endSymbol();l.mapOptions;l.mapEvents;l.eventListeners;l.addObject=function(a,b){if(l.map){l.map[a]=l.map[a]||{};var c=Object.keys(l.map[a]).length;l.map[a][b.id||c]=b;l.map instanceof google.maps.Map&&("infoWindows"!=a&&b.setMap&&
b.setMap&&b.setMap(l.map),b.centered&&b.position&&l.map.setCenter(b.position),"markers"==a&&l.objectChanged("markers"),"customMarkers"==a&&l.objectChanged("customMarkers"))}};l.deleteObject=function(a,b){if(b.map){var c=b.map[a],k;for(k in c)c[k]===b&&(google.maps.event.clearInstanceListeners(b),delete c[k]);b.map&&b.setMap&&b.setMap(null);"markers"==a&&l.objectChanged("markers");"customMarkers"==a&&l.objectChanged("customMarkers")}};l.observeAttrSetObj=function(b,c,k){if(c.noWatcher)return!1;b=a.getAttrsToObserve(b);
for(var l=0;l<b.length;l++){var d=b[l];c.$observe(d,n.observeAndSet(d,k))}};l.zoomToIncludeMarkers=function(){if(null!=l.map.markers&&0<Object.keys(l.map.markers).length||null!=l.map.customMarkers&&0<Object.keys(l.map.customMarkers).length){var a=new google.maps.LatLngBounds,b;for(b in l.map.markers)a.extend(l.map.markers[b].getPosition());for(var c in l.map.customMarkers)a.extend(l.map.customMarkers[c].getPosition());l.mapOptions.maximumZoom&&(l.enableMaximumZoomCheck=!0);l.map.fitBounds(a)}};l.objectChanged=
function(a){!l.map||"markers"!=a&&"customMarkers"!=a||"auto"!=l.map.zoomToIncludeMarkers||l.zoomToIncludeMarkers()};l.initializeMap=function(){var p=l.mapOptions,m=l.mapEvents,h=l.map;if(l.map=q.getMapInstance(e[0]),n.setStyle(e[0]),h){var A=a.filter(g),v=a.getOptions(A);A=a.getControlOptions(A);p=b.extend(v,A);for(var B in h)if(v=h[B],"object"==typeof v)for(var y in v)l.addObject(B,v[y]);l.map.showInfoWindow=l.showInfoWindow;l.map.hideInfoWindow=l.hideInfoWindow}p.zoom=p.zoom&&!isNaN(p.zoom)?+p.zoom:
15;h=p.center;B=new RegExp(k(f)+".*"+k(r));!p.center||"string"==typeof h&&h.match(B)?p.center=new google.maps.LatLng(0,0):"string"==typeof h&&h.match(/^[0-9.-]*,[0-9.-]*$/)?(B=parseFloat(h.split(",")[0]),h=parseFloat(h.split(",")[1]),p.center=new google.maps.LatLng(B,h)):h instanceof google.maps.LatLng||(h=p.center,delete p.center,n.getGeoLocation(h,p.geoLocationOptions).then(function(a){l.map.setCenter(a);(a=p.geoCallback)&&d(a)(c)},function(){p.geoFallbackCenter&&l.map.setCenter(p.geoFallbackCenter)}));
l.map.setOptions(p);for(var C in m)h=google.maps.event.addListener(l.map,C,m[C]),l.eventListeners[C]=h;l.observeAttrSetObj(t,g,l.map);l.singleInfoWindow=p.singleInfoWindow;google.maps.event.trigger(l.map,"resize");google.maps.event.addListenerOnce(l.map,"idle",function(){n.addMap(l);p.zoomToIncludeMarkers&&l.zoomToIncludeMarkers();c.map=l.map;c.$emit("mapInitialized",l.map);g.mapInitialized&&d(g.mapInitialized)(c,{map:l.map})});p.zoomToIncludeMarkers&&p.maximumZoom&&google.maps.event.addListener(l.map,
"zoom_changed",function(){1==l.enableMaximumZoomCheck&&(l.enableMaximumZoomCheck=!1,google.maps.event.addListenerOnce(l.map,"bounds_changed",function(){l.map.setZoom(Math.min(p.maximumZoom,l.map.getZoom()))}))})};c.google=google;var t=a.orgAttributes(e);m=a.filter(g);h=a.getOptions(m,{scope:c});var v=a.getControlOptions(m);v=b.extend(h,v);m=a.getEvents(c,m);(Object.keys(m).length&&void 0,l.mapOptions=v,l.mapEvents=m,l.eventListeners={},h.lazyInit)?(g.id&&0===g.id.indexOf(f,0)&&-1!==g.id.indexOf(r,
g.id.length-r.length)?(m=g.id.slice(2,-2),m=d(m)(c)):m=g.id,l.map={id:m},n.addMap(l)):l.initializeMap();h.triggerResize&&google.maps.event.trigger(l.map,"resize");e.bind("$destroy",function(){q.returnMapInstance(l.map);n.deleteMap(l)})};c.$inject="$scope $element $attrs $parse $interpolate Attr2MapOptions NgMap NgMapPool escapeRegexpFilter".split(" ");b.module("ngMap").controller("__MapController",c)}(),function(){var a,c=function(b,c,e,m){m=m[0]||m[1];var d=a.orgAttributes(c),h=a.filter(e),k=a.getOptions(h,
{scope:b});b=a.getEvents(b,h);var l=f(k,b);m.addObject("bicyclingLayers",l);m.observeAttrSetObj(d,e,l);c.bind("$destroy",function(){m.deleteObject("bicyclingLayers",l)})},f=function(a,b){var c=new google.maps.BicyclingLayer(a),d;for(d in b)google.maps.event.addListener(c,d,b[d]);return c},e=function(b){return a=b,{restrict:"E",require:["?^map","?^ngMap"],link:c}};e.$inject=["Attr2MapOptions"];b.module("ngMap").directive("bicyclingLayer",e)}(),function(){var a,c=function(b,c,d,f,m){f=f[0]||f[1];var e=
a.filter(d);d=a.getOptions(e,{scope:b});e=a.getEvents(b,e);var h=b.$new(),k=c[0].parentElement.removeChild(c[0]);m(h,function(a){c.empty();c.append(a);c.on("$destroy",function(){h.$destroy()})});for(var l in e)google.maps.event.addDomListener(k,l,e[l]);f.addObject("customControls",k);f.map.controls[google.maps.ControlPosition[d.position]].push(k);c.bind("$destroy",function(){f.deleteObject("customControls",k)})},f=function(b,f){return a=b,{restrict:"E",require:["?^map","?^ngMap"],link:c,transclude:!0}};
f.$inject=["Attr2MapOptions","NgMap"];b.module("ngMap").directive("customControl",f)}(),function(){var a,c,f,e,g=function(){for(var a=["transform","WebkitTransform","MozTransform","OTransform","msTransform"],b=document.createElement("div"),c=0;c<a.length;c++)if(b&&void 0!==b.style[a[c]])return a[c];return!1}(),d=function(a){a=a||{};this.el=document.createElement("div");this.el.style.display="block";this.el.style.visibility="hidden";this.visible=!0;for(var b in a)this[b]=a[b]},h=function(){d.prototype=
new google.maps.OverlayView;d.prototype.setContent=function(a,c){this.el.innerHTML=a;this.el.style.position="absolute";this.el.style.top=0;this.el.style.left=0;c&&f(b.element(this.el).contents())(c)};d.prototype.getDraggable=function(){return this.draggable};d.prototype.setDraggable=function(a){this.draggable=a};d.prototype.getPosition=function(){return this.position};d.prototype.setPosition=function(a){a&&(this.position=a);var b=this;this.getProjection()&&"function"==typeof this.position.lng&&(a=
function(){if(b.getProjection()){var a=b.getProjection().fromLatLngToDivPixel(b.position),c=Math.round(a.x-b.el.offsetWidth/2);a=Math.round(a.y-b.el.offsetHeight-10);g?b.el.style[g]="translate("+c+"px, "+a+"px)":(b.el.style.left=c+"px",b.el.style.top=a+"px");b.el.style.visibility="visible"}},b.el.offsetWidth&&b.el.offsetHeight?a():c(a,300))};d.prototype.setZIndex=function(a){void 0!==a&&(this.zIndex!==a&&(this.zIndex=a),this.el.style.zIndex!==this.zIndex&&(this.el.style.zIndex=this.zIndex))};d.prototype.getVisible=
function(){return this.visible};d.prototype.setVisible=function(a){"none"===this.el.style.display&&a?this.el.style.display="block":"none"===this.el.style.display||a||(this.el.style.display="none");this.visible=a};d.prototype.addClass=function(a){var b=this.el.className.trim().split(" ");-1==b.indexOf(a)&&b.push(a);this.el.className=b.join(" ")};d.prototype.removeClass=function(a){var b=this.el.className.split(" ");a=b.indexOf(a);-1<a&&b.splice(a,1);this.el.className=b.join(" ")};d.prototype.onAdd=
function(){this.getPanes().overlayMouseTarget.appendChild(this.el)};d.prototype.draw=function(){this.setPosition();this.setZIndex(this.zIndex);this.setVisible(this.visible)};d.prototype.onRemove=function(){this.el.parentNode.removeChild(this.el)}},m=function(b,c){return function(k,p,f,h){h=h[0]||h[1];var l=a.orgAttributes(p),m=a.filter(f),g=a.getOptions(m,{scope:k});m=a.getEvents(k,m);p[0].style.display="none";var r=new d(g);setTimeout(function(){k.$watch("["+c.join(",")+"]",function(){r.setContent(b,
k)},!0);r.setContent(p[0].innerHTML,k);var a=p[0].firstElementChild&&(p[0].firstElementChild.className||"");r["class"]&&(a+=" "+r["class"]);r.addClass("custom-marker");a&&r.addClass(a);g.position instanceof google.maps.LatLng||e.getGeoLocation(g.position).then(function(a){r.setPosition(a)})});for(var n in m)google.maps.event.addDomListener(r.el,n,m[n]);h.addObject("customMarkers",r);h.observeAttrSetObj(l,f,r);p.bind("$destroy",function(){h.deleteObject("customMarkers",r)})}},n=function(b,k,d,p,g,
n){a=p;c=b;f=k;e=g;var l=d.startSymbol(),r=d.endSymbol(),w=new RegExp(n(l)+"([^"+r.substring(0,1)+"]+)"+n(r),"g");return{restrict:"E",require:["?^map","?^ngMap"],compile:function(a){h();a[0].style.display="none";a=a.html();var b=[];return(a.match(w)||[]).forEach(function(a){var c=a.replace(l,"").replace(r,"");-1==a.indexOf("::")&&-1==a.indexOf("this.")&&-1==b.indexOf(c)&&b.push(a.replace(l,"").replace(r,""))}),m(a,b)}}};n.$inject="$timeout $compile $interpolate Attr2MapOptions NgMap escapeRegexpFilter".split(" ");
b.module("ngMap").directive("customMarker",n)}(),function(){var a,c,f,e,g,d=function(a,b){a.panel&&(a.panel=document.getElementById(a.panel)||document.querySelector(a.panel));var c=new google.maps.DirectionsRenderer(a),d;for(d in b)google.maps.event.addListener(c,d,b[d]);return c},h=function(a,b){var k=new google.maps.DirectionsService;b.travelMode=b.travelMode||"DRIVING";var d="origin destination travelMode transitOptions unitSystem durationInTraffic waypoints optimizeWaypoints provideRouteAlternatives avoidHighways avoidTolls region".split(" ");
if(b)for(var p in b)b.hasOwnProperty(p)&&-1===d.indexOf(p)&&delete b[p];b.waypoints&&(Array.isArray(b.waypoints)||delete b.waypoints);var h=function(b){if(e&&b)if(g)for(var d in b)b.hasOwnProperty(d)&&(g[d]=b[d]);else g=b;else e=c(function(){g||(g=b);k.route(g,function(b,c){c==google.maps.DirectionsStatus.OK&&(a.setDirections(b),g=void 0)});c.cancel(e);e=void 0},20)};b&&b.origin&&b.destination&&("current-location"==b.origin?f.getCurrentPosition().then(function(a){b.origin=new google.maps.LatLng(a.coords.latitude,
a.coords.longitude);h(b)}):"current-location"==b.destination?f.getCurrentPosition().then(function(a){b.destination=new google.maps.LatLng(a.coords.latitude,a.coords.longitude);h(b)}):h(b))},m=function(b,e,k,l){a=l;c=e;f=k;return{restrict:"E",require:["?^map","?^ngMap"],link:function(k,l,f,e){e=e[0]||e[1];var p=b.orgAttributes(l),m=b.filter(f),g=b.getOptions(m,{scope:k});k=b.getEvents(k,m);var r=b.getAttrsToObserve(p);r=[];m.noWatcher||(r=b.getAttrsToObserve(p));var n=d(g,k);e.addObject("directionsRenderers",
n);r.forEach(function(a){!function(a){f.$observe(a,function(k){if("panel"==a)c(function(){var a=document.getElementById(k)||document.querySelector(k);a&&n.setPanel(a)});else if(g[a]!==k){var d=b.toOptionValue(k,{key:a});g[a]=d;h(n,g)}})}(a)});a.getMap().then(function(){h(n,g)});l.bind("$destroy",function(){e.deleteObject("directionsRenderers",n)})}}};m.$inject=["Attr2MapOptions","$timeout","NavigatorGeolocation","NgMap"];b.module("ngMap").directive("directions",m)}(),function(){b.module("ngMap").directive("drawingManager",
["Attr2MapOptions",function(a){return{restrict:"E",require:["?^map","?^ngMap"],link:function(b,f,e,g){g=g[0]||g[1];var c=a.filter(e),h=a.getOptions(c,{scope:b}),m=a.getControlOptions(c);b=a.getEvents(b,c);var n=new google.maps.drawing.DrawingManager({drawingMode:h.drawingmode,drawingControl:h.drawingcontrol,drawingControlOptions:m.drawingControlOptions,circleOptions:h.circleoptions,markerOptions:h.markeroptions,polygonOptions:h.polygonoptions,polylineOptions:h.polylineoptions,rectangleOptions:h.rectangleoptions});
e.$observe("drawingControlOptions",function(b){n.drawingControlOptions=a.getControlOptions({drawingControlOptions:b}).drawingControlOptions;n.setDrawingMode(null);n.setMap(g.map)});for(var q in b)google.maps.event.addListener(n,q,b[q]);g.addObject("mapDrawingManager",n);f.bind("$destroy",function(){g.deleteObject("mapDrawingManager",n)})}}}])}(),function(){b.module("ngMap").directive("dynamicMapsEngineLayer",["Attr2MapOptions",function(a){return{restrict:"E",require:["?^map","?^ngMap"],link:function(b,
f,e,g){g=g[0]||g[1];e=a.filter(e);f=a.getOptions(e,{scope:b});var c=a.getEvents(b,e,c);b=c;c=new google.maps.visualization.DynamicMapsEngineLayer(f);for(var h in b)google.maps.event.addListener(c,h,b[h]);g.addObject("mapsEngineLayers",c)}}}])}(),function(){b.module("ngMap").directive("fusionTablesLayer",["Attr2MapOptions",function(a){var b=function(a,b){var c=new google.maps.FusionTablesLayer(a),d;for(d in b)google.maps.event.addListener(c,d,b[d]);return c};return{restrict:"E",require:["?^map","?^ngMap"],
link:function(c,e,g,d){d=d[0]||d[1];g=a.filter(g);var f=a.getOptions(g,{scope:c}),m=a.getEvents(c,g,m),n=b(f,m);d.addObject("fusionTablesLayers",n);e.bind("$destroy",function(){d.deleteObject("fusionTablesLayers",n)})}}}])}(),function(){b.module("ngMap").directive("heatmapLayer",["Attr2MapOptions","$window",function(a,b){return{restrict:"E",require:["?^map","?^ngMap"],link:function(c,e,g,d){function f(a,b){return a.split(".").reduce(function(a,b){return a[b]},b||this)}d=d[0]||d[1];e=a.filter(g);var m=
a.getOptions(e,{scope:c});if(m.data=b[g.data]||f(g.data,c),!(m.data instanceof Array))throw"invalid heatmap data";m.data=new google.maps.MVCArray(m.data);g=new google.maps.visualization.HeatmapLayer(m);a.getEvents(c,e);d.addObject("heatmapLayers",g)}}}])}(),function(){var a=function(a,f,e,g,d,h,m){var c=function(a,c,l){!a.position||a.position instanceof google.maps.LatLng||delete a.position;var k=new google.maps.InfoWindow(a);for(var h in c)h&&google.maps.event.addListener(k,h,c[h]);var m=e(function(a){b.isString(l)?
g(l).then(function(c){a(b.element(c).wrap("<div>").parent())},function(a){throw"info-window template request failed: "+a;}):a(l)}).then(function(a){a=a.html().trim();if(1!=b.element(a).length)throw"info-window working as a template must have a container";k.__template=a.replace(/\s?ng-non-bindable[='"]+/,"")});return k.__open=function(a,b,c){m.then(function(){d(function(){c&&(b.anchor=c);var d=f(k.__template)(b);k.setContent(d[0]);b.$apply();c&&c.getPosition?k.open(a,c):c&&c instanceof google.maps.LatLng?
(k.open(a),k.setPosition(c)):k.open(a);k.content.parentElement.parentElement.parentElement.className="ng-map-info-window"})})},k};return{restrict:"E",require:["?^map","?^ngMap"],link:function(b,k,d,e){e=e[0]||e[1];k.css("display","none");var l,f=a.orgAttributes(k),g=a.filter(d),p=a.getOptions(g,{scope:b});g=a.getEvents(b,g);var w=c(p,g,p.template||k);!p.position||p.position instanceof google.maps.LatLng||(l=p.position);l&&m.getGeoLocation(l).then(function(a){w.setPosition(a);w.__open(e.map,b,a);(a=
d.geoCallback)&&h(a)(b)});e.addObject("infoWindows",w);e.observeAttrSetObj(f,d,w);e.showInfoWindow=e.map.showInfoWindow=e.showInfoWindow||function(a,c,k){var d="string"==typeof a?a:c;a="string"==typeof a?c:k;if("string"==typeof a)if("undefined"!=typeof e.map.markers&&"undefined"!=typeof e.map.markers[a])a=e.map.markers[a];else{if("undefined"==typeof e.map.customMarkers||"undefined"==typeof e.map.customMarkers[a])throw Error("Cant open info window for id "+a+". Marker or CustomMarker is not defined");
a=e.map.customMarkers[a]}e.map.infoWindows[d].__open(e.map,b,a?a:this.getPosition?this:null);e.singleInfoWindow&&(e.lastInfoWindow&&b.hideInfoWindow(e.lastInfoWindow),e.lastInfoWindow=d)};e.hideInfoWindow=e.map.hideInfoWindow=e.hideInfoWindow||function(a,b){e.map.infoWindows["string"==typeof a?a:b].close()};b.showInfoWindow=e.map.showInfoWindow;b.hideInfoWindow=e.map.hideInfoWindow;m.getMap(w.mapId?{id:w.mapId}:0).then(function(a){(w.visible&&w.__open(a,b),w.visibleOnMarker)&&w.__open(a,b,a.markers[w.visibleOnMarker])})}}};
a.$inject="Attr2MapOptions $compile $q $templateRequest $timeout $parse NgMap".split(" ");b.module("ngMap").directive("infoWindow",a)}(),function(){b.module("ngMap").directive("kmlLayer",["Attr2MapOptions",function(a){var b=function(a,b){var c=new google.maps.KmlLayer(a),d;for(d in b)google.maps.event.addListener(c,d,b[d]);return c};return{restrict:"E",require:["?^map","?^ngMap"],link:function(c,e,g,d){d=d[0]||d[1];var f=a.orgAttributes(e),m=a.filter(g),n=a.getOptions(m,{scope:c});c=a.getEvents(c,
m);var q=b(n,c);d.addObject("kmlLayers",q);d.observeAttrSetObj(f,g,q);e.bind("$destroy",function(){d.deleteObject("kmlLayers",q)})}}}])}(),function(){b.module("ngMap").directive("mapData",["Attr2MapOptions","NgMap",function(a,b){return{restrict:"E",require:["?^map","?^ngMap"],link:function(c,e,g,d){d=d[0]||d[1];e=a.filter(g);var f=a.getOptions(e,{scope:c}),m=a.getEvents(c,e,m);b.getMap(d.map.id).then(function(a){for(var b in f){var k=f[b];"function"==typeof c[k]?a.data[b](c[k]):a.data[b](k)}for(var d in m)a.data.addListener(d,
m[d])})}}}])}(),function(){var a,c,f=[],e=[],g=function(b,d,h){h=h.mapLazyLoadParams||h.mapLazyLoad;void 0===window.google||void 0===window.google.maps?(e.push({scope:b,element:d,savedHtml:f[e.length]}),window.lazyLoadCallback=function(){a(function(){e.forEach(function(a){a.element.html(a.savedHtml);c(a.element.contents())(a.scope)})},100)},b=document.createElement("script"),b.src=h+(-1<h.indexOf("?")?"&":"?")+"callback=lazyLoadCallback",document.querySelector('script[src="'+b.src+'"]')||document.body.appendChild(b)):
(d.html(f),c(d.contents())(b))},d=function(a,b){return!b.mapLazyLoad&&void 0,f.push(a.html()),void 0!==window.google&&void 0!==window.google.maps?!1:(a.html(""),{pre:g})},h=function(b,e){return c=b,a=e,{compile:d}};h.$inject=["$compile","$timeout"];b.module("ngMap").directive("mapLazyLoad",h)}(),function(){b.module("ngMap").directive("mapType",["$parse","NgMap",function(a,b){return{restrict:"E",require:["?^map","?^ngMap"],link:function(c,e,g,d){d=d[0]||d[1];var f,m=g.name;if(!m)throw"invalid map-type name";
if(f=a(g.object)(c),!f)throw"invalid map-type object";b.getMap().then(function(a){a.mapTypes.set(m,f)});d.addObject("mapTypes",f)}}}])}(),function(){var a=function(){return{restrict:"AE",controller:"__MapController",controllerAs:"ngmap"}};b.module("ngMap").directive("map",[a]);b.module("ngMap").directive("ngMap",[a])}(),function(){b.module("ngMap").directive("mapsEngineLayer",["Attr2MapOptions",function(a){return{restrict:"E",require:["?^map","?^ngMap"],link:function(b,f,e,g){g=g[0]||g[1];e=a.filter(e);
f=a.getOptions(e,{scope:b});var c=a.getEvents(b,e,c);b=c;c=new google.maps.visualization.MapsEngineLayer(f);for(var h in b)google.maps.event.addListener(c,h,b[h]);g.addObject("mapsEngineLayers",c)}}}])}(),function(){var a,c,f,e=function(a,b){if(f.defaultOptions.marker)for(c in f.defaultOptions.marker)"undefined"==typeof a[c]&&(a[c]=f.defaultOptions.marker[c]);a.position instanceof google.maps.LatLng||(a.position=new google.maps.LatLng(0,0));var c=new google.maps.Marker(a);0<Object.keys(b).length;
for(var d in b)d&&google.maps.event.addListener(c,d,b[d]);return c},g=function(b,d,g,q){q=q[0]||q[1];var k,l=a.orgAttributes(d),p=a.filter(g),h=a.getOptions(p,b,{scope:b});p=a.getEvents(b,p);h.position instanceof google.maps.LatLng||(k=h.position);var m=e(h,p);q.addObject("markers",m);k&&f.getGeoLocation(k).then(function(a){m.setPosition(a);h.centered&&m.map.setCenter(a);(a=g.geoCallback)&&c(a)(b)});q.observeAttrSetObj(l,g,m);d.bind("$destroy",function(){q.deleteObject("markers",m)})},d=function(b,
d,e){return a=b,c=d,f=e,{restrict:"E",require:["^?map","?^ngMap"],link:g}};d.$inject=["Attr2MapOptions","$parse","NgMap"];b.module("ngMap").directive("marker",d)}(),function(){b.module("ngMap").directive("overlayMapType",["NgMap",function(a){return{restrict:"E",require:["?^map","?^ngMap"],link:function(b,f,e,g){g=g[0]||g[1];var c=e.initMethod||"insertAt",h=b[e.object];a.getMap().then(function(a){if("insertAt"==c){var b=parseInt(e.index,10);a.overlayMapTypes.insertAt(b,h)}else"push"==c&&a.overlayMapTypes.push(h)});
g.addObject("overlayMapTypes",h)}}}])}(),function(){var a=function(a,b){return{restrict:"A",require:"?ngModel",link:function(c,f,d,h){if("false"===d.placesAutoComplete)return!1;var e=a.filter(d),g=a.getOptions(e,{scope:c});e=a.getEvents(c,e);var q=new google.maps.places.Autocomplete(f[0],g);q.setOptions({strictBounds:!0===g.strictBounds});for(var k in e)google.maps.event.addListener(q,k,e[k]);g=function(){b(function(){h&&h.$setViewValue(f.val())},100)};google.maps.event.addListener(q,"place_changed",
g);f[0].addEventListener("change",g);d.$observe("rectBounds",function(b){b&&(b=a.toOptionValue(b,{key:"rectBounds"}),q.setBounds(new google.maps.LatLngBounds(new google.maps.LatLng(b.south_west.lat,b.south_west.lng),new google.maps.LatLng(b.north_east.lat,b.north_east.lng))))});d.$observe("circleBounds",function(b){b&&(b=a.toOptionValue(b,{key:"circleBounds"}),b=new google.maps.Circle(b),q.setBounds(b.getBounds()))});d.$observe("types",function(b){b&&(b=a.toOptionValue(b,{key:"types"}),q.setTypes(b))});
d.$observe("componentRestrictions",function(a){a&&q.setComponentRestrictions(c.$eval(a))})}}};a.$inject=["Attr2MapOptions","$timeout"];b.module("ngMap").directive("placesAutoComplete",a)}(),function(){var a=function(a,b){var c=a.name;switch(delete a.name,c){case "circle":a.center instanceof google.maps.LatLng||(a.center=new google.maps.LatLng(0,0));var d=new google.maps.Circle(a);break;case "polygon":d=new google.maps.Polygon(a);break;case "polyline":d=new google.maps.Polyline(a);break;case "rectangle":d=
new google.maps.Rectangle(a);break;case "groundOverlay":case "image":d=new google.maps.GroundOverlay(a.url,a.bounds,{opacity:a.opacity,clickable:a.clickable,id:a.id})}for(var e in b)b[e]&&google.maps.event.addListener(d,e,b[e]);return d},c=function(b,c,g){return{restrict:"E",require:["?^map","?^ngMap"],link:function(d,e,f,n){n=n[0]||n[1];var h,k=b.orgAttributes(e);var l=b.filter(f);var p=b.getOptions(l,{scope:d}),m=b.getEvents(d,l);l=p.name;p.center instanceof google.maps.LatLng||(h=p.center);var t=
a(p,m);n.addObject("shapes",t);h&&"circle"==l&&g.getGeoLocation(h).then(function(a){t.setCenter(a);t.centered&&t.map.setCenter(a);(a=f.geoCallback)&&c(a)(d)});n.observeAttrSetObj(k,f,t);e.bind("$destroy",function(){n.deleteObject("shapes",t)})}}};c.$inject=["Attr2MapOptions","$parse","NgMap"];b.module("ngMap").directive("shape",c)}(),function(){var a=function(a,f){var c=function(a,b,c){var d,e;b.container&&(e=document.getElementById(b.container),e=e||document.querySelector(b.container));e?d=new google.maps.StreetViewPanorama(e,
b):(d=a.getStreetView(),d.setOptions(b));for(var f in c)f&&google.maps.event.addListener(d,f,c[f]);return d};return{restrict:"E",require:["?^map","?^ngMap"],link:function(e,d,h){d=a.filter(h);h=a.getOptions(d,{scope:e});var g=a.getControlOptions(d),n=b.extend(h,g),q=a.getEvents(e,d);f.getMap().then(function(a){var b=c(a,n,q);a.setStreetView(b);!b.getPosition()&&b.setPosition(a.getCenter());google.maps.event.addListener(b,"position_changed",function(){b.getPosition()!==a.getCenter()&&a.setCenter(b.getPosition())});
var k=google.maps.event.addListener(a,"center_changed",function(){b.setPosition(a.getCenter());google.maps.event.removeListener(k)})})}}};a.$inject=["Attr2MapOptions","NgMap"];b.module("ngMap").directive("streetViewPanorama",a)}(),function(){b.module("ngMap").directive("trafficLayer",["Attr2MapOptions",function(a){var b=function(a,b){var c=new google.maps.TrafficLayer(a),d;for(d in b)google.maps.event.addListener(c,d,b[d]);return c};return{restrict:"E",require:["?^map","?^ngMap"],link:function(c,
e,g,d){d=d[0]||d[1];var f=a.orgAttributes(e),m=a.filter(g),n=a.getOptions(m,{scope:c});c=a.getEvents(c,m);var q=b(n,c);d.addObject("trafficLayers",q);d.observeAttrSetObj(f,g,q);e.bind("$destroy",function(){d.deleteObject("trafficLayers",q)})}}}])}(),function(){b.module("ngMap").directive("transitLayer",["Attr2MapOptions",function(a){var b=function(a,b){var c=new google.maps.TransitLayer(a),d;for(d in b)google.maps.event.addListener(c,d,b[d]);return c};return{restrict:"E",require:["?^map","?^ngMap"],
link:function(c,e,g,d){d=d[0]||d[1];var f=a.orgAttributes(e),m=a.filter(g),n=a.getOptions(m,{scope:c});c=a.getEvents(c,m);var q=b(n,c);d.addObject("transitLayers",q);d.observeAttrSetObj(f,g,q);e.bind("$destroy",function(){d.deleteObject("transitLayers",q)})}}}])}(),function(){var a=/([:\-_]+(.))/g,c=/^moz([A-Z])/;b.module("ngMap").filter("camelCase",function(){return function(b){return b.replace(a,function(a,b,c,f){return f?c.toUpperCase():c}).replace(c,"Moz$1")}})}(),function(){b.module("ngMap").filter("escapeRegexp",
function(){return function(a){return a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}})}(),function(){b.module("ngMap").filter("jsonize",function(){return function(a){try{return JSON.parse(a),a}catch(c){return a.replace(/([\$\w]+)\s*:/g,function(a,b){return'"'+b+'":'}).replace(/'([^']+)'/g,function(a,b){return'"'+b+'"'}).replace(/''/g,'""')}}})}(),function(){var a=/^(\d{4}\-\d\d\-\d\d([tT][\d:\.]*)?)([zZ]|([+\-])(\d\d):?(\d\d))?$/,c=function(b,c,g,d,h,m,n,q,k){var e=d.startSymbol(),f=d.endSymbol(),r=function(a){return a.match(/^[\+\-]?[0-9\.]+,[ ]* ?[\+\-]?[0-9\.]+$/)&&
(a="["+a+"]"),JSON.parse(q(a))},t=function(a){var b=a;if(a[0].constructor==Array)if(a[0][0].constructor==Array&&2==a[0][0].length||a[0][0].constructor==Object){for(var c=[],k=0;k<a.length;k++)b=a[k].map(function(a){return new google.maps.LatLng(a[0],a[1])}),c.push(b);b=c}else b=a.map(function(a){return new google.maps.LatLng(a[0],a[1])});else!isNaN(parseFloat(a[0]))&&isFinite(a[0])&&(b=new google.maps.LatLng(b[0],b[1]));return b},v=function(b,c){try{var d=getNumber(b)}catch(E){try{d=r(b),d instanceof
Array?d=d[0].constructor==Object?d:d[0]instanceof Array?d[0][0].constructor==Object?d:t(d):t(d):d===Object(d)&&(c.doNotConverStringToNumber=!0,d=u(d,c))}catch(D){if(b.match(/^[A-Z][a-zA-Z0-9]+\(.*\)$/))try{d=eval("new google.maps."+b)}catch(F){d=b}else if(b.match(/^([A-Z][a-zA-Z0-9]+)\.([A-Z]+)$/))try{var l=b.match(/^([A-Z][a-zA-Z0-9]+)\.([A-Z]+)$/);d=google.maps[l[1]][l[2]]}catch(F){d=b}else if(b.match(/^[A-Z]+$/))try{var g=c.key.charAt(0).toUpperCase()+c.key.slice(1);c.key.match(/temperatureUnit|windSpeedUnit|labelColor/)?
(g=g.replace(/s$/,""),d=google.maps.weather[g][b]):d=google.maps[g][b]}catch(F){d=b}else if(b.match(a))try{d=new Date(b)}catch(F){d=b}else if(b.match(new RegExp("^"+k(e)))&&c.scope)try{var p=b.replace(new RegExp(k(e)),"").replace(new RegExp(k(f),"g"),"");d=c.scope.$eval(p)}catch(F){d=b}else d=b}}if(("center"==c.key||"position"==c.key)&&d instanceof Array&&(d=new google.maps.LatLng(d[0],d[1])),"bounds"==c.key&&d instanceof Array&&(d=new google.maps.LatLngBounds(d[0],d[1])),"icons"==c.key&&d instanceof
Array)for(l=0;l<d.length;l++)g=d[l],g.icon.path.match(/^[A-Z_]+$/)&&(g.icon.path=google.maps.SymbolPath[g.icon.path]);if("icon"==c.key&&d instanceof Object){(""+d.path).match(/^[A-Z_]+$/)&&(d.path=google.maps.SymbolPath[d.path]);for(var h in d)l=d[h],"anchor"==h||"origin"==h||"labelOrigin"==h?d[h]=new google.maps.Point(l[0],l[1]):("size"==h||"scaledSize"==h)&&(d[h]=new google.maps.Size(l[0],l[1]))}return d},u=function(a,b){b=b||{};var c={},d;for(d in a)!a[d]&&0!==a[d]||d.match(/^on[A-Z]/)||d.match(/ControlOptions$/)||
(c[d]="string"!=typeof a[d]?a[d]:b.doNotConverStringToNumber&&a[d].match(/^[0-9]+$/)?a[d]:v(a[d],{key:d,scope:b.scope}));return c};return{filter:function(a){var b={},c;for(c in a)c.match(/^\$/)||c.match(/^ng[A-Z]/)||(b[c]=a[c]);return b},getOptions:u,getEvents:function(a,d){var k={},e=function(a){return"_"+a.toLowerCase()},l=function(d){d=d.match(/([^\(]+)\(([^\)]*)\)/);var k=d[1];d=d[2].replace(/event[ ,]*/,"");var e=b("["+d+"]");return function(b){var d=e(a),f=k.split(".").reduce(function(a,b){return a[b]},
a);f&&f.apply(this,[b].concat(d));c(function(){a.$apply()})}},f;for(f in d)if(d[f]&&f.match(/^on[A-Z]/)){var g=f.replace(/^on/,"");g=g.charAt(0).toLowerCase()+g.slice(1);g=g.replace(/([A-Z])/g,e);k[g]=new l(d[f])}return k},getControlOptions:function(a){var b={};if("object"!=typeof a)return!1;for(var c in a)if(a[c]&&c.match(/(.*)ControlOptions$/)){var d=a[c].replace(/'/g,'"');d=d.replace(/([^"]+)|("[^"]+")/g,function(a,b,c){return b?b.replace(/([a-zA-Z0-9]+?):/g,'"$1":'):c});try{var k=JSON.parse(d),
e;for(e in k)if(k[e]){var f=k[e];if("string"==typeof f?f=f.toUpperCase():"mapTypeIds"===e&&(f=f.map(function(a){return a.match(/^[A-Z]+$/)?google.maps.MapTypeId[a.toUpperCase()]:a})),"style"===e){var l=(c.charAt(0).toUpperCase()+c.slice(1)).replace(/Options$/,"")+"Style";k[e]=google.maps[l][f]}else k[e]="position"===e?google.maps.ControlPosition[f]:f}b[c]=k}catch(D){}}return b},toOptionValue:v,getAttrsToObserve:function(a){var b=[],c=new RegExp(k(e)+".*"+k(f),"g");if(!a.noWatcher)for(var d in a){var l=
a[d];l&&l.match(c)&&b.push(n(d))}return b},orgAttributes:function(a){0<a.length&&(a=a[0]);for(var b={},c=0;c<a.attributes.length;c++){var d=a.attributes[c];b[d.name]=d.value}return b}}};c.$inject="$parse $timeout $log $interpolate NavigatorGeolocation GeoCoder camelCaseFilter jsonizeFilter escapeRegexpFilter".split(" ");b.module("ngMap").service("Attr2MapOptions",c)}(),function(){var a,c=function(b){var c=a.defer();return(new google.maps.Geocoder).geocode(b,function(a,b){b==google.maps.GeocoderStatus.OK?
c.resolve(a):c.reject(b)}),c.promise},f=function(b){return a=b,{geocode:c}};f.$inject=["$q"];b.module("ngMap").service("GeoCoder",f)}(),function(){var a,c,f=function(b,f){return a=b,c=f,{load:function(b){var d=a.defer();if(void 0===window.google||void 0===window.google.maps){window.lazyLoadCallback=function(){c(function(){d.resolve(window.google)},100)};var e=document.createElement("script");e.src=b+(-1<b.indexOf("?")?"&":"?")+"callback=lazyLoadCallback";document.querySelector('script[src="'+e.src+
'"]')||document.body.appendChild(e)}else d.resolve(window.google);return d.promise}}};f.$inject=["$q","$timeout"];b.module("ngMap").service("GoogleMapsApi",f)}(),function(){var a,c=function(b){var c=a.defer();return navigator.geolocation?(void 0===b?b={timeout:5E3}:void 0===b.timeout&&(b.timeout=5E3),navigator.geolocation.getCurrentPosition(function(a){c.resolve(a)},function(a){c.reject(a)},b)):c.reject("Browser Geolocation service failed."),c.promise},f=function(b){return a=b,{getCurrentPosition:c}};
f.$inject=["$q"];b.module("ngMap").service("NavigatorGeolocation",f)}(),function(){var a,c,f,e=[],g=function(b){var d=c.createElement("div");d.style.width="100%";d.style.height="100%";b.appendChild(d);b=new a.google.maps.Map(d,{});return e.push(b),b},d=function(a,b){for(var c,d=0;d<e.length;d++){var k=e[d];if(k.id==b&&!k.inUse){c=k.getDiv();a.appendChild(c);c=k;break}}return c},h=function(a){for(var b,c=0;c<e.length;c++){var d=e[c];if(!d.id&&!d.inUse){b=d.getDiv();a.appendChild(b);b=d;break}}return b},
m=function(a){var b=d(a,a.id)||h(a);return b?f(function(){google.maps.event.trigger(b,"idle")},100):b=g(a),b.inUse=!0,b},n=function(a){a.inUse=!1},q=function(){for(var a=0;a<e.length;a++)e[a]=null;e=[]},k=function(a){for(var b=0;b<e.length;b++)null!==e[b]&&e[b].id==a&&(e[b]=null,e.splice(b,1))},l=function(b,d,l){return c=b[0],a=d,f=l,{mapInstances:e,resetMapInstances:q,getMapInstance:m,returnMapInstance:n,deleteMapInstance:k}};l.$inject=["$document","$window","$timeout"];b.module("ngMap").factory("NgMapPool",
l)}(),function(){var a,c,f,e,g,d,h,m,n={},q=function(b,d){var k;return b.currentStyle?k=b.currentStyle[d]:a.getComputedStyle&&(k=c.defaultView.getComputedStyle(b,null).getPropertyValue(d)),k},k=function(a){a=n[a||0];return a.map instanceof google.maps.Map?void 0:(a.initializeMap(),a.map)},l=function(b,c){function d(c){var f=Object.keys(n);f=n[f[0]];b&&n[b]?k.resolve(n[b].map):!b&&f&&f.map?k.resolve(f.map):c>e?k.reject("could not find map"):a.setTimeout(function(){d(c+100)},100)}c=c||{};b="object"==
typeof b?b.id:b;var k=f.defer(),e=c.timeout||1E4;return d(0),k.promise},p=function(a){if(a.map){var b=Object.keys(n).length;n[a.map.id||b]=a}},r=function(a){var b=Object.keys(n).length-1;b=a.map.id||b;if(a.map){for(var c in a.eventListeners)google.maps.event.removeListener(a.eventListeners[c]);a.map.controls&&a.map.controls.forEach(function(a){a.clear()})}a.map.heatmapLayers&&Object.keys(a.map.heatmapLayers).forEach(function(b){a.deleteObject("heatmapLayers",a.map.heatmapLayers[b])});m.deleteMapInstance(b);
delete n[b]},t=function(a,b){var c=f.defer();return!a||a.match(/^current/i)?e.getCurrentPosition(b).then(function(a){a=new google.maps.LatLng(a.coords.latitude,a.coords.longitude);c.resolve(a)},function(a){c.reject(a)}):d.geocode({address:a}).then(function(a){c.resolve(a[0].geometry.location)},function(a){c.reject(a)}),c.promise},v=function(a,b){return function(c){if(c){var d=h("set-"+a);c=g.toOptionValue(c,{key:a});b[d]&&(a.match(/center|position/)&&"string"==typeof c?t(c).then(function(a){b[d](a)}):
b[d](c))}}},u=function(a){"true"==a.getAttribute("default-style")?(a.style.display="block",a.style.height="300px"):("block"!=q(a,"display")&&(a.style.display="block"),q(a,"height").match(/^(0|auto)/)&&(a.style.height="300px"))};b.module("ngMap").provider("NgMap",function(){var b={};this.setDefaultOptions=function(a){b=a};var n=function(n,q,w,y,x,E,D,F){return a=n,c=q[0],f=w,e=y,g=x,d=E,h=D,m=F,{defaultOptions:b,addMap:p,deleteMap:r,getMap:l,initMap:k,setStyle:u,getGeoLocation:t,observeAndSet:v}};
n.$inject="$window $document $q NavigatorGeolocation Attr2MapOptions GeoCoder camelCaseFilter NgMapPool".split(" ");this.$get=n})}(),function(){var a,c=function(b,c){c=c||b.getCenter();var d=a.defer();return(new google.maps.StreetViewService).getPanoramaByLocation(c||b.getCenter,100,function(a,b){b===google.maps.StreetViewStatus.OK?d.resolve(a.location.pano):d.resolve(!1)}),d.promise},f=function(a,b){(new google.maps.StreetViewPanorama(a.getDiv(),{enableCloseButton:!0})).setPano(b)},e=function(b){return a=
b,{getPanorama:c,setPanorama:f}};e.$inject=["$q"];b.module("ngMap").service("StreetView",e)}(),"ngMap"});!function(b){b.module("ngLocationUpdate",[]).run(["$route","$rootScope","$location",function(a,b,f){f.updatePath=function(c,g){if(f.path()!=c){var d=a.current;b.$on("$locationChangeSuccess",function(){d&&(a.current=d,d=null)});f.path(c);g||f.replace()}}}])}(window.angular);angular.module("ui.bootstrap","ui.bootstrap.tpls ui.bootstrap.pager ui.bootstrap.paging ui.bootstrap.tabindex ui.bootstrap.pagination ui.bootstrap.modal ui.bootstrap.multiMap ui.bootstrap.stackedMap ui.bootstrap.position ui.bootstrap.progressbar".split(" "));
angular.module("ui.bootstrap.tpls","uib/template/pager/pager.html uib/template/pagination/pagination.html uib/template/modal/window.html uib/template/progressbar/bar.html uib/template/progressbar/progress.html uib/template/progressbar/progressbar.html".split(" "));
angular.module("ui.bootstrap.pager",["ui.bootstrap.paging","ui.bootstrap.tabindex"]).controller("UibPagerController",["$scope","$attrs","uibPaging","uibPagerConfig",function(b,a,c,f){b.align=angular.isDefined(a.align)?b.$parent.$eval(a.align):f.align;c.create(this,b,a)}]).constant("uibPagerConfig",{itemsPerPage:10,previousText:"\u00ab Previous",nextText:"Next \u00bb",align:!0}).directive("uibPager",["uibPagerConfig",function(b){return{scope:{totalItems:"=",previousText:"@",nextText:"@",ngDisabled:"="},
require:["uibPager","?ngModel"],restrict:"A",controller:"UibPagerController",controllerAs:"pager",templateUrl:function(a,b){return b.templateUrl||"uib/template/pager/pager.html"},link:function(a,c,f,e){c.addClass("pager");a=e[0];(e=e[1])&&a.init(e,b)}}}]);
angular.module("ui.bootstrap.paging",[]).factory("uibPaging",["$parse",function(b){return{create:function(a,c,f){a.setNumPages=f.numPages?b(f.numPages).assign:angular.noop;a.ngModelCtrl={$setViewValue:angular.noop};a._watchers=[];a.init=function(b,g){a.ngModelCtrl=b;a.config=g;b.$render=function(){a.render()};f.itemsPerPage?a._watchers.push(c.$parent.$watch(f.itemsPerPage,function(b){a.itemsPerPage=parseInt(b,10);c.totalPages=a.calculateTotalPages();a.updatePage()})):a.itemsPerPage=g.itemsPerPage;
c.$watch("totalItems",function(b,e){(angular.isDefined(b)||b!==e)&&(c.totalPages=a.calculateTotalPages(),a.updatePage())})};a.calculateTotalPages=function(){return Math.max((1>a.itemsPerPage?1:Math.ceil(c.totalItems/a.itemsPerPage))||0,1)};a.render=function(){c.page=parseInt(a.ngModelCtrl.$viewValue,10)||1};c.selectPage=function(b,f){f&&f.preventDefault();!(c.ngDisabled&&f||c.page===b)&&0<b&&b<=c.totalPages&&(f&&f.target&&f.target.blur(),a.ngModelCtrl.$setViewValue(b),a.ngModelCtrl.$render())};c.getText=
function(b){return c[b+"Text"]||a.config[b+"Text"]};c.noPrevious=function(){return 1===c.page};c.noNext=function(){return c.page===c.totalPages};a.updatePage=function(){a.setNumPages(c.$parent,c.totalPages);c.page>c.totalPages?c.selectPage(c.totalPages):a.ngModelCtrl.$render()};c.$on("$destroy",function(){for(;a._watchers.length;)a._watchers.shift()()})}}}]);
angular.module("ui.bootstrap.tabindex",[]).directive("uibTabindexToggle",function(){return{restrict:"A",link:function(b,a,c){c.$observe("disabled",function(a){c.$set("tabindex",a?-1:null)})}}});
angular.module("ui.bootstrap.pagination",["ui.bootstrap.paging","ui.bootstrap.tabindex"]).controller("UibPaginationController",["$scope","$attrs","$parse","uibPaging","uibPaginationConfig",function(b,a,c,f,e){function g(a,b,c){return{number:a,text:b,active:c}}var d=this,h=angular.isDefined(a.maxSize)?b.$parent.$eval(a.maxSize):e.maxSize,m=angular.isDefined(a.rotate)?b.$parent.$eval(a.rotate):e.rotate,n=angular.isDefined(a.forceEllipses)?b.$parent.$eval(a.forceEllipses):e.forceEllipses,q=angular.isDefined(a.boundaryLinkNumbers)?
b.$parent.$eval(a.boundaryLinkNumbers):e.boundaryLinkNumbers,k=angular.isDefined(a.pageLabel)?function(c){return b.$parent.$eval(a.pageLabel,{$page:c})}:angular.identity;b.boundaryLinks=angular.isDefined(a.boundaryLinks)?b.$parent.$eval(a.boundaryLinks):e.boundaryLinks;b.directionLinks=angular.isDefined(a.directionLinks)?b.$parent.$eval(a.directionLinks):e.directionLinks;a.$set("role","menu");f.create(this,b,a);a.maxSize&&d._watchers.push(b.$parent.$watch(c(a.maxSize),function(a){h=parseInt(a,10);
d.render()}));var l=this.render;this.render=function(){l();if(0<b.page&&b.page<=b.totalPages){var a=b.page,c=b.totalPages,d=[],e=1,f=c,w=angular.isDefined(h)&&c>h;w&&(m?(e=Math.max(a-Math.floor(h/2),1),f=e+h-1,f>c&&(f=c,e=f-h+1)):(e=(Math.ceil(a/h)-1)*h+1,f=Math.min(e+h-1,c)));for(var x=e;f>=x;x++){var A=g(x,k(x),x===a);d.push(A)}if(w&&0<h&&(!m||n||q)){if(1<e){if(!q||3<e)a=g(e-1,"...",!1),d.unshift(a);q&&(3===e&&(e=g(2,"2",!1),d.unshift(e)),e=g(1,"1",!1),d.unshift(e))}if(c>f){if(!q||c-2>f)e=g(f+1,
"...",!1),d.push(e);q&&(f===c-2&&(f=g(c-1,c-1,!1),d.push(f)),c=g(c,c,!1),d.push(c))}}b.pages=d}}}]).constant("uibPaginationConfig",{itemsPerPage:10,boundaryLinks:!1,boundaryLinkNumbers:!1,directionLinks:!0,firstText:"First",previousText:"Previous",nextText:"Next",lastText:"Last",rotate:!0,forceEllipses:!1}).directive("uibPagination",["$parse","uibPaginationConfig",function(b,a){return{scope:{totalItems:"=",firstText:"@",previousText:"@",nextText:"@",lastText:"@",ngDisabled:"="},require:["uibPagination",
"?ngModel"],restrict:"A",controller:"UibPaginationController",controllerAs:"pagination",templateUrl:function(a,b){return b.templateUrl||"uib/template/pagination/pagination.html"},link:function(b,f,e,g){f.addClass("pagination");b=g[0];(g=g[1])&&b.init(g,a)}}}]);
angular.module("ui.bootstrap.modal",["ui.bootstrap.multiMap","ui.bootstrap.stackedMap","ui.bootstrap.position"]).provider("$uibResolve",function(){var b=this;this.resolver=null;this.setResolver=function(a){this.resolver=a};this.$get=["$injector","$q",function(a,c){var f=b.resolver?a.get(b.resolver):null;return{resolve:function(b,g,d,h){if(f)return f.resolve(b,g,d,h);var e=[];return angular.forEach(b,function(b){e.push(angular.isFunction(b)||angular.isArray(b)?c.resolve(a.invoke(b)):angular.isString(b)?
c.resolve(a.get(b)):c.resolve(b))}),c.all(e).then(function(a){var c={},d=0;return angular.forEach(b,function(b,k){c[k]=a[d++]}),c})}}}]}).directive("uibModalBackdrop",["$animate","$injector","$uibModalStack",function(b,a,c){function f(a,f,d){d.modalInClass&&(b.addClass(f,d.modalInClass),a.$on(c.NOW_CLOSING_EVENT,function(c,e){var g=e();a.modalOptions.animation?b.removeClass(f,d.modalInClass).then(g):g()}))}return{restrict:"A",compile:function(a,b){return a.addClass(b.backdropClass),f}}}]).directive("uibModalWindow",
["$uibModalStack","$q","$animateCss","$document",function(b,a,c,f){return{scope:{index:"@"},restrict:"A",transclude:!0,templateUrl:function(a,b){return b.templateUrl||"uib/template/modal/window.html"},link:function(e,g,d){g.addClass(d.windowTopClass||"");e.size=d.size;e.close=function(a){var c=b.getTop();c&&c.value.backdrop&&"static"!==c.value.backdrop&&a.target===a.currentTarget&&(a.preventDefault(),a.stopPropagation(),b.dismiss(c.key,"backdrop click"))};g.on("click",e.close);e.$isRendered=!0;var h=
a.defer();e.$$postDigest(function(){h.resolve()});h.promise.then(function(){var h=null;d.modalInClass&&(h=c(g,{addClass:d.modalInClass}).start(),e.$on(b.NOW_CLOSING_EVENT,function(a,b){var k=b();c(g,{removeClass:d.modalInClass}).start().then(k)}));a.when(h).then(function(){var a=b.getTop();(a&&b.modalRendered(a.key),f[0].activeElement&&g[0].contains(f[0].activeElement))||((a=g[0].querySelector("[autofocus]"))?a.focus():g[0].focus())})})}}}]).directive("uibModalAnimationClass",function(){return{compile:function(b,
a){a.modalAnimation&&b.addClass(a.uibModalAnimationClass)}}}).directive("uibModalTransclude",["$animate",function(b){return{link:function(a,c,f,e,g){g(a.$parent,function(a){c.empty();b.enter(a,c)})}}}]).factory("$uibModalStack",["$animate","$animateCss","$document","$compile","$rootScope","$q","$$multiMap","$$stackedMap","$uibPosition",function(b,a,c,f,e,g,d,h,m){function n(a){return a.replace(F,function(a,b){return(b?"-":"")+a.toLowerCase()})}function q(){for(var a=-1,b=z.keys(),c=0;c<b.length;c++)z.get(b[c]).value.backdrop&&
(a=c);return-1<a&&C>a&&(a=C),a}function k(a,b){var c=z.get(a).value,d=c.appendTo;z.remove(a);(E=z.top())&&(C=parseInt(E.value.modalDomEl.attr("index"),10));r(c.modalDomEl,c.modalScope,function(){var b=c.openedClass||A;B.remove(b,a);var k=B.hasKey(b);d.toggleClass(b,k);!k&&x&&x.heightOverflow&&x.scrollbarWidth&&(d.css(x.originalRight?{paddingRight:x.originalRight+"px"}:{paddingRight:""}),x=null);l(!0)},c.closedDeferred);p();b&&b.focus?b.focus():d.focus&&d.focus()}function l(a){var b;0<z.length()&&
(b=z.top().value,b.modalDomEl.toggleClass(b.windowTopClass||"",a))}function p(){u&&-1===q()&&(r(u,w,function(){}),w=u=void 0)}function r(a,c,d,k){function e(){e.done||(e.done=!0,b.leave(a).then(function(){d&&d();a.remove();k&&k.resolve()}),c.$destroy())}var f,l=null;return c.$broadcast(y.NOW_CLOSING_EVENT,function(){return f||(f=g.defer(),l=f.promise),function(){f.resolve()}}),g.when(l).then(e)}function t(a){if(a.isDefaultPrevented())return a;var b=z.top();if(b)switch(a.which){case 27:b.value.keyboard&&
(a.preventDefault(),e.$apply(function(){y.dismiss(b.key,"escape key press")}));break;case 9:var c=y.loadFocusElementList(b),d=!1;a.shiftKey?(y.isFocusInFirstItem(a,c)||y.isModalFocused(a,b))&&(d=y.focusLastFocusableElement(c)):y.isFocusInLastItem(a,c)&&(d=y.focusFirstFocusableElement(c));d&&(a.preventDefault(),a.stopPropagation())}}function v(){Array.prototype.forEach.call(document.querySelectorAll("["+D+"]"),function(a){var b=parseInt(a.getAttribute(D),10)-1;a.setAttribute(D,b);b||(a.removeAttribute(D),
a.removeAttribute("aria-hidden"))})}var u,w,x,A="modal-open",z=h.createNew(),B=d.createNew(),y={NOW_CLOSING_EVENT:"modal.stack.now-closing"},C=0,E=null,D="data-bootstrap-modal-aria-hidden-count",F=/[A-Z]/g;return e.$watch(q,function(a){w&&(w.index=a)}),c.on("keydown",t),e.$on("$destroy",function(){c.off("keydown",t)}),y.open=function(a,d){function k(a){function b(a){var b=a.parent()?a.parent().children():[];return Array.prototype.filter.call(b,function(b){return b!==a[0]})}if(a&&"BODY"!==a[0].tagName)return b(a).forEach(function(a){var b=
"true"===a.getAttribute("aria-hidden"),c=parseInt(a.getAttribute(D),10);c||(c=b?1:0);a.setAttribute(D,c+1);a.setAttribute("aria-hidden","true")}),k(a.parent())}var h=c[0].activeElement,g=d.openedClass||A;l(!1);E=z.top();z.add(a,{deferred:d.deferred,renderDeferred:d.renderDeferred,closedDeferred:d.closedDeferred,modalScope:d.scope,backdrop:d.backdrop,keyboard:d.keyboard,openedClass:d.openedClass,windowTopClass:d.windowTopClass,animation:d.animation,appendTo:d.appendTo});B.put(g,a);var p=d.appendTo,
r=q();0<=r&&!u&&(w=e.$new(!0),w.modalOptions=d,w.index=r,u=angular.element('<div uib-modal-backdrop="modal-backdrop"></div>'),u.attr({"class":"modal-backdrop","ng-style":"{'z-index': 1040 + (index && 1 || 0) + index*10}","uib-modal-animation-class":"fade","modal-in-class":"in"}),d.backdropClass&&u.addClass(d.backdropClass),d.animation&&u.attr("modal-animation","true"),f(u)(w),b.enter(u,p),m.isScrollable(p)&&(x=m.scrollbarPadding(p),x.heightOverflow&&x.scrollbarWidth&&p.css({paddingRight:x.right+"px"})));
var t;d.component?(t=document.createElement(n(d.component.name)),t=angular.element(t),t.attr({resolve:"$resolve","modal-instance":"$uibModalInstance",close:"$close($value)",dismiss:"$dismiss($value)"})):t=d.content;C=E?parseInt(E.value.modalDomEl.attr("index"),10)+1:0;r=angular.element('<div uib-modal-window="modal-window"></div>');r.attr({"class":"modal","template-url":d.windowTemplateUrl,"window-top-class":d.windowTopClass,role:"dialog","aria-labelledby":d.ariaLabelledBy,"aria-describedby":d.ariaDescribedBy,
size:d.size,index:C,animate:"animate","ng-style":"{'z-index': 1050 + $$topModalIndex*10, display: 'block'}",tabindex:-1,"uib-modal-animation-class":"fade","modal-in-class":"in"}).append(t);d.windowClass&&r.addClass(d.windowClass);d.animation&&r.attr("modal-animation","true");p.addClass(g);d.scope&&(d.scope.$$topModalIndex=C);b.enter(f(r)(d.scope),p);z.top().value.modalDomEl=r;z.top().value.modalOpener=h;k(r)},y.close=function(a,b){var c=z.get(a);return v(),c&&!c.value.modalScope.$broadcast("modal.closing",
b,!0).defaultPrevented?(c.value.modalScope.$$uibDestructionScheduled=!0,c.value.deferred.resolve(b),k(a,c.value.modalOpener),!0):!c},y.dismiss=function(a,b){var c=z.get(a);return v(),c&&!c.value.modalScope.$broadcast("modal.closing",b,!1).defaultPrevented?(c.value.modalScope.$$uibDestructionScheduled=!0,c.value.deferred.reject(b),k(a,c.value.modalOpener),!0):!c},y.dismissAll=function(a){for(var b=this.getTop();b&&this.dismiss(b.key,a);)b=this.getTop()},y.getTop=function(){return z.top()},y.modalRendered=
function(a){(a=z.get(a))&&a.value.renderDeferred.resolve()},y.focusFirstFocusableElement=function(a){return 0<a.length?(a[0].focus(),!0):!1},y.focusLastFocusableElement=function(a){return 0<a.length?(a[a.length-1].focus(),!0):!1},y.isModalFocused=function(a,b){if(a&&b){var c=b.value.modalDomEl;if(c&&c.length)return(a.target||a.srcElement)===c[0]}return!1},y.isFocusInFirstItem=function(a,b){return 0<b.length?(a.target||a.srcElement)===b[0]:!1},y.isFocusInLastItem=function(a,b){return 0<b.length?(a.target||
a.srcElement)===b[b.length-1]:!1},y.loadFocusElementList=function(a){if(a&&(a=a.value.modalDomEl)&&a.length)return(a=a[0].querySelectorAll("a[href], area[href], input:not([disabled]):not([tabindex='-1']), button:not([disabled]):not([tabindex='-1']),select:not([disabled]):not([tabindex='-1']), textarea:not([disabled]):not([tabindex='-1']), iframe, object, embed, *[tabindex]:not([tabindex='-1']), *[contenteditable=true]"))?Array.prototype.filter.call(a,function(a){return!!(a.offsetWidth||a.offsetHeight||
a.getClientRects().length)}):a},y}]).provider("$uibModal",function(){var b={options:{animation:!0,backdrop:!0,keyboard:!0},$get:["$rootScope","$q","$document","$templateRequest","$controller","$uibResolve","$uibModalStack",function(a,c,f,e,g,d,h){function m(a){return a.template?c.when(a.template):e(angular.isFunction(a.templateUrl)?a.templateUrl():a.templateUrl)}var n={},q=null;return n.getPromiseChain=function(){return q},n.open=function(k){function e(){return w}var p=c.defer(),r=c.defer(),n=c.defer(),
v=c.defer(),u={result:p.promise,opened:r.promise,closed:n.promise,rendered:v.promise,close:function(a){return h.close(u,a)},dismiss:function(a){return h.dismiss(u,a)}};if(k=angular.extend({},b.options,k),k.resolve=k.resolve||{},k.appendTo=k.appendTo||f.find("body").eq(0),!k.appendTo.length)throw Error("appendTo element not found. Make sure that the element passed is in DOM.");if(!k.component&&!k.template&&!k.templateUrl)throw Error("One of component or template or templateUrl options is required.");
var w=k.component?c.when(d.resolve(k.resolve,{},null,null)):c.all([m(k),d.resolve(k.resolve,{},null,null)]);var x;return x=q=c.all([q]).then(e,e).then(function(b){function c(a,c,d,k){a.$scope=e;a.$scope.$resolve={};d?a.$scope.$uibModalInstance=u:a.$uibModalInstance=u;angular.forEach(c?b[1]:b,function(b,c){k&&(a[c]=b);a.$scope.$resolve[c]=b})}var d=k.scope||a,e=d.$new();e.$close=u.close;e.$dismiss=u.dismiss;e.$on("$destroy",function(){e.$$uibDestructionScheduled||e.$dismiss("$uibUnscheduledDestruction")});
var f,l,m={scope:e,deferred:p,renderDeferred:v,closedDeferred:n,animation:k.animation,backdrop:k.backdrop,keyboard:k.keyboard,backdropClass:k.backdropClass,windowTopClass:k.windowTopClass,windowClass:k.windowClass,windowTemplateUrl:k.windowTemplateUrl,ariaLabelledBy:k.ariaLabelledBy,ariaDescribedBy:k.ariaDescribedBy,size:k.size,openedClass:k.openedClass,appendTo:k.appendTo},t={},q={};k.component?(c(t,!1,!0,!1),t.name=k.component,m.component=t):k.controller&&(c(q,!0,!1,!0),l=g(k.controller,q,!0,k.controllerAs),
k.controllerAs&&k.bindToController&&(f=l.instance,f.$close=e.$close,f.$dismiss=e.$dismiss,angular.extend(f,{$resolve:q.$scope.$resolve},d)),f=l(),angular.isFunction(f.$onInit)&&f.$onInit());k.component||(m.content=b[0]);h.open(u,m);r.resolve(!0)},function(a){r.reject(a);p.reject(a)})["finally"](function(){q===x&&(q=null)}),u},n}]};return b});
angular.module("ui.bootstrap.multiMap",[]).factory("$$multiMap",function(){return{createNew:function(){var b={};return{entries:function(){return Object.keys(b).map(function(a){return{key:a,value:b[a]}})},get:function(a){return b[a]},hasKey:function(a){return!!b[a]},keys:function(){return Object.keys(b)},put:function(a,c){b[a]||(b[a]=[]);b[a].push(c)},remove:function(a,c){var f=b[a];if(f){var e=f.indexOf(c);-1!==e&&f.splice(e,1);f.length||delete b[a]}}}}}});
angular.module("ui.bootstrap.stackedMap",[]).factory("$$stackedMap",function(){return{createNew:function(){var b=[];return{add:function(a,c){b.push({key:a,value:c})},get:function(a){for(var c=0;c<b.length;c++)if(a===b[c].key)return b[c]},keys:function(){for(var a=[],c=0;c<b.length;c++)a.push(b[c].key);return a},top:function(){return b[b.length-1]},remove:function(a){for(var c=-1,f=0;f<b.length;f++)if(a===b[f].key){c=f;break}return b.splice(c,1)[0]},removeTop:function(){return b.pop()},length:function(){return b.length}}}}});
angular.module("ui.bootstrap.position",[]).factory("$uibPosition",["$document","$window",function(b,a){var c,f,e=/(auto|scroll)/,g=/(auto|scroll|hidden)/,d=/\s?auto?\s?/i,h=/^(top|bottom|left|right)$/,m=/^(top|bottom|left|right|center)$/,n=/^(top|bottom)$/,q=/(HTML|BODY)/;return{getRawNode:function(a){return a.nodeName?a:a[0]||a},parseStyle:function(a){return a=parseFloat(a),isFinite(a)?a:0},offsetParent:function(c){c=this.getRawNode(c);for(c=c.offsetParent||b[0].documentElement;c&&c!==b[0].documentElement&&
"static"===(a.getComputedStyle(c).position||"static");)c=c.offsetParent;return c||b[0].documentElement},scrollbarWidth:function(d){if(d)return angular.isUndefined(f)&&(d=b.find("body"),d.addClass("uib-position-body-scrollbar-measure"),f=a.innerWidth-d[0].clientWidth,f=isFinite(f)?f:0,d.removeClass("uib-position-body-scrollbar-measure")),f;angular.isUndefined(c)&&(d=angular.element('<div class="uib-position-scrollbar-measure"></div>'),b.find("body").append(d),c=d[0].offsetWidth-d[0].clientWidth,c=
isFinite(c)?c:0,d.remove());return c},scrollbarPadding:function(b){b=this.getRawNode(b);var c=a.getComputedStyle(b),d=this.parseStyle(c.paddingRight);c=this.parseStyle(c.paddingBottom);b=this.scrollParent(b,!1,!0);var k=this.scrollbarWidth(q.test(b.tagName));return{scrollbarWidth:k,widthOverflow:b.scrollWidth>b.clientWidth,right:d+k,originalRight:d,heightOverflow:b.scrollHeight>b.clientHeight,bottom:c+k,originalBottom:c}},isScrollable:function(b,c){b=this.getRawNode(b);var d=c?g:e,k=a.getComputedStyle(b);
return d.test(k.overflow+k.overflowY+k.overflowX)},scrollParent:function(c,d,f){c=this.getRawNode(c);d=d?g:e;var k=b[0].documentElement,l=a.getComputedStyle(c);if(f&&d.test(l.overflow+l.overflowY+l.overflowX))return c;f="absolute"===l.position;c=c.parentElement||k;if(c===k||"fixed"===l.position)return k;for(;c.parentElement&&c!==k;){l=a.getComputedStyle(c);if(f&&"static"!==l.position&&(f=!1),!f&&d.test(l.overflow+l.overflowY+l.overflowX))break;c=c.parentElement}return c},position:function(c,d){c=
this.getRawNode(c);var e=this.offset(c);if(d){var k=a.getComputedStyle(c);e.top-=this.parseStyle(k.marginTop);e.left-=this.parseStyle(k.marginLeft)}k=this.offsetParent(c);var f={top:0,left:0};return k!==b[0].documentElement&&(f=this.offset(k),f.top+=k.clientTop-k.scrollTop,f.left+=k.clientLeft-k.scrollLeft),{width:Math.round(angular.isNumber(e.width)?e.width:c.offsetWidth),height:Math.round(angular.isNumber(e.height)?e.height:c.offsetHeight),top:Math.round(e.top-f.top),left:Math.round(e.left-f.left)}},
offset:function(c){c=this.getRawNode(c);var d=c.getBoundingClientRect();return{width:Math.round(angular.isNumber(d.width)?d.width:c.offsetWidth),height:Math.round(angular.isNumber(d.height)?d.height:c.offsetHeight),top:Math.round(d.top+(a.pageYOffset||b[0].documentElement.scrollTop)),left:Math.round(d.left+(a.pageXOffset||b[0].documentElement.scrollLeft))}},viewportOffset:function(c,d,e){c=this.getRawNode(c);e=!1!==e?!0:!1;var f=c.getBoundingClientRect(),k=0,l=0,h=d?b[0].documentElement:this.scrollParent(c);
c=h.getBoundingClientRect();if(k=c.top+h.clientTop,l=c.left+h.clientLeft,h===b[0].documentElement&&(k+=a.pageYOffset,l+=a.pageXOffset),c=k+h.clientHeight,d=l+h.clientWidth,e)e=a.getComputedStyle(h),k+=this.parseStyle(e.paddingTop),c-=this.parseStyle(e.paddingBottom),l+=this.parseStyle(e.paddingLeft),d-=this.parseStyle(e.paddingRight);return{top:Math.round(f.top-k),bottom:Math.round(c-f.bottom),left:Math.round(f.left-l),right:Math.round(d-f.right)}},parsePlacement:function(a){var b=d.test(a);return b&&
(a=a.replace(d,"")),a=a.split("-"),a[0]=a[0]||"top",h.test(a[0])||(a[0]="top"),a[1]=a[1]||"center",m.test(a[1])||(a[1]="center"),a[2]=b?!0:!1,a},positionElements:function(b,c,d,e){b=this.getRawNode(b);c=this.getRawNode(c);var f=angular.isDefined(c.offsetWidth)?c.offsetWidth:c.prop("offsetWidth"),k=angular.isDefined(c.offsetHeight)?c.offsetHeight:c.prop("offsetHeight");d=this.parsePlacement(d);var h=e?this.offset(b):this.position(b),l={top:0,left:0,placement:""};d[2]&&(b=this.viewportOffset(b,e),e=
a.getComputedStyle(c),c=f+Math.round(Math.abs(this.parseStyle(e.marginLeft)+this.parseStyle(e.marginRight))),e=k+Math.round(Math.abs(this.parseStyle(e.marginTop)+this.parseStyle(e.marginBottom))),d[0]="top"===d[0]&&e>b.top&&e<=b.bottom?"bottom":"bottom"===d[0]&&e>b.bottom&&e<=b.top?"top":"left"===d[0]&&c>b.left&&c<=b.right?"right":"right"===d[0]&&c>b.right&&c<=b.left?"left":d[0],d[1]="top"===d[1]&&e-h.height>b.bottom&&e-h.height<=b.top?"bottom":"bottom"===d[1]&&e-h.height>b.top&&e-h.height<=b.bottom?
"top":"left"===d[1]&&c-h.width>b.right&&c-h.width<=b.left?"right":"right"===d[1]&&c-h.width>b.left&&c-h.width<=b.right?"left":d[1],"center"===d[1])&&(n.test(d[0])?(e=h.width/2-f/2,0>b.left+e&&c-h.width<=b.right?d[1]="left":0>b.right+e&&c-h.width<=b.left&&(d[1]="right")):(c=h.height/2-e/2,0>b.top+c&&e-h.height<=b.bottom?d[1]="top":0>b.bottom+c&&e-h.height<=b.top&&(d[1]="bottom")));switch(d[0]){case "top":l.top=h.top-k;break;case "bottom":l.top=h.top+h.height;break;case "left":l.left=h.left-f;break;
case "right":l.left=h.left+h.width}switch(d[1]){case "top":l.top=h.top;break;case "bottom":l.top=h.top+h.height-k;break;case "left":l.left=h.left;break;case "right":l.left=h.left+h.width-f;break;case "center":n.test(d[0])?l.left=h.left+h.width/2-f/2:l.top=h.top+h.height/2-k/2}return l.top=Math.round(l.top),l.left=Math.round(l.left),l.placement="center"===d[1]?d[0]:d[0]+"-"+d[1],l},adjustTop:function(a,b,c,d){return-1!==a.indexOf("top")&&c!==d?{top:b.top-d+"px"}:void 0},positionArrow:function(b,c){b=
this.getRawNode(b);var d=b.querySelector(".tooltip-inner, .popover-inner");if(d){var e=angular.element(d).hasClass("tooltip-inner"),f=b.querySelector(e?".tooltip-arrow":".arrow");if(f){var h={top:"",bottom:"",left:"",right:""};if(c=this.parsePlacement(c),"center"===c[1])return void angular.element(f).css(h);var k="border-"+c[0]+"-width";k=a.getComputedStyle(f)[k];var l="border-"+(n.test(c[0])?c[0]+"-"+c[1]:c[1]+"-"+c[0]);l+="-radius";d=a.getComputedStyle(e?d:b)[l];switch(c[0]){case "top":h.bottom=
e?"0":"-"+k;break;case "bottom":h.top=e?"0":"-"+k;break;case "left":h.right=e?"0":"-"+k;break;case "right":h.left=e?"0":"-"+k}h[c[1]]=d;angular.element(f).css(h)}}}}}]);
angular.module("ui.bootstrap.progressbar",[]).constant("uibProgressConfig",{animate:!0,max:100}).controller("UibProgressController",["$scope","$attrs","uibProgressConfig",function(b,a,c){function f(){return angular.isDefined(b.maxParam)?b.maxParam:c.max}var e=this,g=angular.isDefined(a.animate)?b.$parent.$eval(a.animate):c.animate;this.bars=[];b.max=f();this.addBar=function(a,b,c){g||b.css({transition:"none"});this.bars.push(a);a.max=f();a.title=c&&angular.isDefined(c.title)?c.title:"progressbar";
a.$watch("value",function(){a.recalculatePercentage()});a.recalculatePercentage=function(){var b=e.bars.reduce(function(a,b){return b.percent=+(100*b.value/b.max).toFixed(2),a+b.percent},0);100<b&&(a.percent-=b-100)};a.$on("$destroy",function(){b=null;e.removeBar(a)})};this.removeBar=function(a){this.bars.splice(this.bars.indexOf(a),1);this.bars.forEach(function(a){a.recalculatePercentage()})};b.$watch("maxParam",function(){e.bars.forEach(function(a){a.max=f();a.recalculatePercentage()})})}]).directive("uibProgress",
function(){return{replace:!0,transclude:!0,controller:"UibProgressController",require:"uibProgress",scope:{maxParam:"=?max"},templateUrl:"uib/template/progressbar/progress.html"}}).directive("uibBar",function(){return{replace:!0,transclude:!0,require:"^uibProgress",scope:{value:"=",type:"@"},templateUrl:"uib/template/progressbar/bar.html",link:function(b,a,c,f){f.addBar(b,a,c)}}}).directive("uibProgressbar",function(){return{replace:!0,transclude:!0,controller:"UibProgressController",scope:{value:"=",
maxParam:"=?max",type:"@"},templateUrl:"uib/template/progressbar/progressbar.html",link:function(b,a,c,f){f.addBar(b,angular.element(a.children()[0]),{title:c.title})}}});angular.module("uib/template/pager/pager.html",[]).run(["$templateCache",function(b){b.put("uib/template/pager/pager.html",'<li ng-class="{disabled: noPrevious()||ngDisabled, previous: align}"><a href ng-click="selectPage(page - 1, $event)" ng-disabled="noPrevious()||ngDisabled" uib-tabindex-toggle>{{::getText(\'previous\')}}</a></li>\n<li ng-class="{disabled: noNext()||ngDisabled, next: align}"><a href ng-click="selectPage(page + 1, $event)" ng-disabled="noNext()||ngDisabled" uib-tabindex-toggle>{{::getText(\'next\')}}</a></li>\n')}]);
angular.module("uib/template/pagination/pagination.html",[]).run(["$templateCache",function(b){b.put("uib/template/pagination/pagination.html",'<li role="menuitem" ng-if="::boundaryLinks" ng-class="{disabled: noPrevious()||ngDisabled}" class="pagination-first"><a href ng-click="selectPage(1, $event)" ng-disabled="noPrevious()||ngDisabled" uib-tabindex-toggle>{{::getText(\'first\')}}</a></li>\n<li role="menuitem" ng-if="::directionLinks" ng-class="{disabled: noPrevious()||ngDisabled}" class="pagination-prev"><a href ng-click="selectPage(page - 1, $event)" ng-disabled="noPrevious()||ngDisabled" uib-tabindex-toggle>{{::getText(\'previous\')}}</a></li>\n<li role="menuitem" ng-repeat="page in pages track by $index" ng-class="{active: page.active,disabled: ngDisabled&&!page.active}" class="pagination-page"><a href ng-click="selectPage(page.number, $event)" ng-disabled="ngDisabled&&!page.active" uib-tabindex-toggle>{{page.text}}</a></li>\n<li role="menuitem" ng-if="::directionLinks" ng-class="{disabled: noNext()||ngDisabled}" class="pagination-next"><a href ng-click="selectPage(page + 1, $event)" ng-disabled="noNext()||ngDisabled" uib-tabindex-toggle>{{::getText(\'next\')}}</a></li>\n<li role="menuitem" ng-if="::boundaryLinks" ng-class="{disabled: noNext()||ngDisabled}" class="pagination-last"><a href ng-click="selectPage(totalPages, $event)" ng-disabled="noNext()||ngDisabled" uib-tabindex-toggle>{{::getText(\'last\')}}</a></li>\n')}]);
angular.module("uib/template/modal/window.html",[]).run(["$templateCache",function(b){b.put("uib/template/modal/window.html","<div class=\"modal-dialog {{size ? 'modal-' + size : ''}}\"><div class=\"modal-content\" uib-modal-transclude></div></div>\n")}]);angular.module("uib/template/progressbar/bar.html",[]).run(["$templateCache",function(b){b.put("uib/template/progressbar/bar.html",'<div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: (percent < 100 ? percent : 100) + \'%\'}" aria-valuetext="{{percent | number:0}}%" aria-labelledby="{{::title}}" ng-transclude></div>\n')}]);
angular.module("uib/template/progressbar/progress.html",[]).run(["$templateCache",function(b){b.put("uib/template/progressbar/progress.html",'<div class="progress" ng-transclude aria-labelledby="{{::title}}"></div>')}]);angular.module("uib/template/progressbar/progressbar.html",[]).run(["$templateCache",function(b){b.put("uib/template/progressbar/progressbar.html",'<div class="progress">\n  <div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: (percent < 100 ? percent : 100) + \'%\'}" aria-valuetext="{{percent | number:0}}%" aria-labelledby="{{::title}}" ng-transclude></div>\n</div>\n')}]);
angular.module("ui.bootstrap.position").run(function(){angular.$$csp().noInlineStyle||angular.$$uibPositionCss||angular.element(document).find("head").prepend('<style type="text/css">.uib-position-measure{display:block !important;visibility:hidden !important;position:absolute !important;top:-9999px !important;left:-9999px !important;}.uib-position-scrollbar-measure{position:absolute !important;top:-9999px !important;width:50px !important;height:50px !important;overflow:scroll !important;}.uib-position-body-scrollbar-measure{overflow:scroll !important;}</style>');
angular.$$uibPositionCss=!0});Array.prototype.diff=function(b){return this.filter(function(a){return 0>b.indexOf(a)})};Array.prototype.shuffle=function(){for(var b=this.slice(0),a,c,f=this.length-1;0<f;--f)a=Math.floor(Math.random()*(f+1)),c=b[f],b[f]=b[a],b[a]=c;return b};Array.prototype.randomElement=function(){return this[Math.floor(Math.random()*this.length)]};Array.prototype.remove=function(b){b=this.indexOf(b);-1<b&&this.splice(b,1)};
String.prototype.chunk=function(b){return this.match(new RegExp(".{1,"+b+"}","g"))};String.prototype.localeCompareSmart=function(b){return this.localeCompare(b,"en",{sensitivity:"base",ignorePunctuation:!0,numeric:!0})};angular.module("fringeApp","ngRoute ui.bootstrap mgcrea.ngStrap.affix mgcrea.ngStrap.button mgcrea.ngStrap.select mgcrea.ngStrap.tab mgcrea.ngStrap.tooltip ngMap ngLocationUpdate".split(" "));
angular.module("fringeApp").value("Sorters",{performance:function(b,a){return b.start-a.start||b.stop-a.stop}}).value("Configuration",{slotSize:3600,minimumArriveBeforeShowTime:600,interestText:["Not Interested","Eh...maybe.","I wouldn't mind seeing this.","I'd love to see this!","I HAVE to see this!"],generatorMessages:["This may take a few seconds or several minutes.","You may see the lower progress bars fluctuate back and forth. This is normal.","It may not be possible to see all of the shows you want.",
"The longer you let this run, the better the schedule will be.","If the generator gets 'stuck', it will be stopped automatically."],fringeLevels:[{min:0,name:"New Recruit"},{min:1,name:"Newbie"},{min:3,name:"Rookie"},{min:5,name:"Amateur"},{min:10,name:"Awesome"},{min:20,name:"Rockstar"},{min:30,name:"Hero"},{min:40,name:"Fanatic"},{min:50,name:"Legend"},{min:65,name:"BOSS"}]}).value("Plurals",{show:{0:"no shows",one:"one show",other:"{} shows"},showSome:{0:"no shows",one:"a show",other:"some shows"},
showSomeMore:{0:"no more shows",one:"another show",other:"some more shows"},aShow:{0:"no shows",one:"a show",other:"{} shows"},performance:{0:"no performances",one:"one performance",other:"{} performances"},Performance:{0:"No performances",one:"1 Performance",other:"{} Performances"}}).value("Menu",[{route:"my-fringe",title:"My Fringe"},{route:"shows",title:"Shows"},{route:"schedule",title:"Schedule"},{route:"venues",title:"Venues"},{route:"map",title:"Map"},{route:"about",title:"About"},{route:"help",
title:"Help"}]).value("MapConfig",{initialView:0,views:[{name:"Fringe Central",center:[28.572253,-81.367035],zoom:18,markerGroups:!0},{name:"Green Lawn of Fabulousness",markerGroups:!0,center:[28.571914,-81.366537],zoom:19},{name:"All Venues",markerGroups:["venues","byov"]},{name:"Parking",markerGroups:["parking"]}],markerGroups:[{id:"venues",name:"Main Venues",markers:[]},{id:"byov",name:"BYOV",markers:[]},{id:"fringe",name:"Festival Locations",markers:[{position:[28.573538,-81.366723],title:"Box Office",
icon:"information",host:1},{position:[28.572936,-81.365307],title:"Club Fringe Lounge",icon:"club-fringe",host:2,notes:"Club Fringe members only."},{position:[28.573403,-81.367468],title:"Kids Fringe",icon:"kids",host:1},{position:[28.571664,-81.366011],title:"Information",icon:"information",location:"Green Lawn of Fabulousness"}]},{id:"foodAndDrink",name:"Food & Drink",markers:[{position:[28.572994,-81.367102],title:"Wine & Beer",icon:"beer-garden",host:1},{position:[28.571936,-81.366611],title:"McGrath Beer Tent",
icon:"beer",location:"Green Lawn of Fabulousness"},{position:[28.572003,-81.366468],title:"Stonewall Bar Tent",icon:"bar",location:"Green Lawn of Fabulousness"},{position:[28.572153,-81.366947],title:"Ice Cream",icon:"icecream",location:"Green Lawn of Fabulousness"},{position:[28.571776,-81.366104],title:"Cheese Curds",icon:"cheese",location:"Green Lawn of Fabulousness"}]},{id:"services",name:"Services",markers:[{position:[28.57298,-81.366786],title:"ATM",icon:"atm",host:1},{position:[28.572036,-81.366584],
title:"ATM",icon:"atm",location:"Green Lawn of Fabulousness"},{position:[28.573535,-81.366921],title:"Restrooms",icon:"bathroom",host:1},{position:[28.573117,-81.366799],title:"Restrooms",icon:"bathroom",host:1},{position:[28.572941,-81.364958],title:"Restrooms",icon:"bathroom",host:2},{position:[28.570965,-81.365557],title:"Restrooms",icon:"bathroom",host:3},{position:[28.571659,-81.366254],title:"Restrooms",icon:"bathroom",location:"Green Lawn of Fabulousness"}]},{id:"parking",name:"Parking",markers:[{position:[28.573059,
-81.366112],title:"Free Parking",icon:"parking",host:1,notes:"The most convenient for all venues and the Fringe Lawn, but it fills up fast and is the most challenging for finding a spot \u2013 it can take as long as 45 minutes to 1 hour at busy times."},{position:[28.571236,-81.366444],title:"Free Parking",icon:"parking",host:3,notes:"This lot fills up quickly and is occasionally closed to Fringe guests for special events."},{position:[28.573045,-81.37102],title:"Parking Garage",icon:"parking-garage",
location:"Orlando Hospital",address:["2328 Alden Rd","Orlando, FL 32803"],notes:"Free on Saturday or if leaving after midnight."},{position:[28.568979,-81.363516],title:"Free Weekend Parking",icon:"parking",location:"Magruder Eye Institute",address:["1911 N Mills Ave","Orlando, FL 32803"],notes:"Available on Saturdays and Sundays all day during Fringe. Lots of spaces, the perfect location for a short walk to Silver and Green venues."},{position:[28.568475,-81.365177],title:"Free Weekend Parking",
icon:"parking",location:"Florida Urology Associates",address:["1812 N Mills Ave","Orlando, FL 32803"],notes:"Available on Saturdays and Sundays all day during Fringe. Lots of spaces, the perfect location for a short walk to Silver and Green venues."}]}],lawnPolygon:[[28.5721511,-81.3658485],[28.5722194,-81.3659477],[28.5722641,-81.3660309],[28.57229,-81.3660872],[28.5723065,-81.3661489],[28.5723112,-81.3661999],[28.5723042,-81.3662508],[28.5722665,-81.3663501],[28.5722359,-81.3664386],[28.5722147,
-81.3665539],[28.5722194,-81.3667041],[28.5722759,-81.3668516],[28.5722806,-81.3669026],[28.5722735,-81.3669482],[28.572217,-81.3670394],[28.5721723,-81.3670917],[28.5721311,-81.3671668],[28.572081,-81.3672198],[28.5720404,-81.3672741],[28.5719944,-81.3673438],[28.5719555,-81.3673693],[28.5719119,-81.3673747],[28.5718778,-81.3673452],[28.5718107,-81.3671829],[28.5717789,-81.3670447],[28.5716635,-81.3668329],[28.5716046,-81.3667417],[28.5715822,-81.3666947],[28.5715681,-81.3666545],[28.5715651,-81.3666036],
[28.5715681,-81.3665566],[28.5715787,-81.3664708],[28.5716281,-81.3662776],[28.5716234,-81.3661489],[28.5716105,-81.3660725],[28.5715986,-81.3660175],[28.5715739,-81.3659652],[28.5715504,-81.36589],[28.5715174,-81.3658136],[28.5717082,-81.3657385],[28.5718048,-81.3657144],[28.5718778,-81.365701],[28.5719803,-81.3657117],[28.572071,-81.3657546],[28.5721511,-81.3658485]]}).config(["$locationProvider","$routeProvider",function(b,a){b.hashPrefix("!");a.when("/my-fringe",{template:"<my-fringe></my-fringe>"}).when("/my-fringe/availability",
{template:"<my-fringe></my-fringe>"}).when("/my-fringe/auto-scheduler",{template:"<my-fringe></my-fringe>"}).when("/shows",{template:"<shows></shows>"}).when("/shows/show/:show",{template:"<shows></shows>"}).when("/shows/venue/:venue",{template:"<shows></shows>"}).when("/schedule",{template:"<schedule></schedule>"}).when("/venues",{template:"<venues></venues>"}).when("/map",{template:"<fringe-map></fringe-map>"}).when("/map/venue/:venue",{template:"<fringe-map></fringe-map>"}).when("/map/host/:host",
{template:"<fringe-map></fringe-map>"}).when("/about",{template:"<about></about>"}).when("/help",{template:"<help></help>"}).otherwise({redirectTo:"/about"})}]);angular.module("fringeApp").filter("highlight",["$sce",function(b){return function(a,c){return a?(c=c.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&").trim())&&""!==c?b.trustAsHtml(a.replace(new RegExp("("+c+")(?![^<]*>|[^<>]*<\\/)","gi"),"<mark>$1</mark>")):b.trustAsHtml(a):a}}]);
angular.module("fringeApp").filter("price",function(){return function(b){return 0===b?"FREE":"$"+b}});angular.module("fringeApp").filter("startFrom",function(){return function(b,a){return b.slice(+a)}});angular.module("fringeApp").directive("innerHeight",function(){return{restrict:"A",scope:{model:"=innerHeight"},controller:["$scope","$window","debounce",function(b,a,c){b.model=a.innerHeight;angular.element(a).on("resize",c(function(){b.$apply(function(){b.model=a.innerHeight})},100))}]}});
angular.module("fringeApp").directive("interest",function(){return{restrict:"E",scope:{showId:"=",desire:"="},template:function(b,a){var c=void 0!==a.showId,f="<span";f=(c?f+' ng-mouseleave="reset()"':f+' bs-tooltip="{title:interestText[get()]}"')+">";for(var e=0;4>e;e++)f+='<i class="rating-icon glyphicon" ng-class="icon('+e+')"',c&&(f+=' bs-tooltip="{title: interestText['+(e+1)+']}" ng-click="click('+(e+1)+')" ng-mouseenter="enter('+e+')"'),f+="></i>";return f+"</span>"},controller:["$scope","Schedule",
"Configuration",function(b,a,c){var f;b.interestText=c.interestText;b.get=function(){return b.desire||a.getShowDesire(b.showId)};b.icon=function(a){return a<(f||b.get())?"glyphicon-ok-sign":"glyphicon-ok-circle"};b.click=function(c){a.setShowDesire(b.showId,c===b.get()?0:c)};b.enter=function(a){f=a+1};b.reset=function(){f=void 0}}]}});
angular.module("fringeApp").directive("scrollYModel",function(){return{restrict:"A",scope:{model:"=scrollYModel"},controller:["$scope","$document","$window",function(b,a,c){b.model=Math.min(c.scrollY,205);a.on("scroll",function(){var a=Math.min(c.scrollY,205);b.model!==a&&b.$apply(function(){b.model=a})})}]}});angular.module("fringeApp").directive("showRating",function(){return{restrict:"E",scope:{value:"="},template:'<span class="label label-info"><i class="glyphicon glyphicon-check"></i> {{value}}</span>'}});
angular.module("fringeApp").directive("staticMap",function(){return{scope:{center:"=",zoom:"=",size:"=",markers:"="},replace:!0,template:'<img ng-src="{{url}}" />',controller:["$scope",function(b){var a=["key=AIzaSyD0y40AVRhf_DDSsFCRT0mBXhjdkQZP4Ys"];b.center&&a.push("center="+b.center);b.zoom&&a.push("zoom="+b.zoom);b.size&&a.push("size="+b.size);b.markers&&a.push("markers="+b.markers);b.url="https://maps.googleapis.com/maps/api/staticmap?"+a.join("&")}]}});
angular.module("fringeApp").service("Availability",["UserData",function(b){this.isSlotAvailable=function(a){return-1===b.getUnavailability().indexOf(a)};this.setSlotAvaialble=function(a){var c=b.getUnavailability();c.remove(a);b.setUnavailability(c)};this.setSlotUnavailable=function(a){if(this.isSlotAvailable(a)){var c=b.getUnavailability();c.push(a);b.setUnavailability(c)}};this.isUserAvailable=function(a,c){for(var f=b.getUnavailability(),e=f.length;e--;){var g=f[e];if(!(c<g||a>g+1800))return!1}return!0}}]);
angular.module("fringeApp").service("Data",["$http","$q","Sorters",function(b,a,c){var f="api/getTestSchedule.php";f="api/cache.json";var e=function(){var c=a.defer();b.get(f,{cache:!0}).then(function(a){c.resolve(a.data)},function(){c.reject()});return c.promise},g=function(a){return function(){return e().then(function(b){return b[a]})}};this.getShows=g("shows");this.getPerformances=g("performances");this.getRatings=g("ratings");this.getVenues=g("venues");this.getVenueHosts=g("venueHosts");this.getVenueDistances=
g("distances");this.getAvailabilitySlots=g("availabilitySlots");this.getAvailabilitySlotsAll=g("availabilitySlotsAll");this.getSortedShows=function(){return this.getShows().then(function(a){return Object.keys(a).sort(function(b,c){return a[b].name.localeCompareSmart(a[c].name)})})};this.getPrices=function(){return this.getShows().then(function(a){var b={};angular.forEach(a,function(a){b[a.price]=!0});return Object.keys(b).map(function(a){return parseInt(a)}).sort(function(a,b){return a>b})})};this.getShow=
function(a){return this.getShows().then(function(b){return b[a]})};this.getPerformance=function(a){return this.getPerformances().then(function(b){return b[a]})};this.getSortedPerformances=function(){return this.getPerformances().then(function(a){return Object.keys(a).sort(function(b,d){return c.performance(a[b],a[d])})})}}]);angular.module("fringeApp").service("Error",function(){var b=function(){};this.onError=function(a){b=a};this.error=function(a,c){b({title:a,more:c})}});
angular.module("fringeApp").service("Schedule",["$q","Configuration","UserData","Data","Availability","Sorters",function(b,a,c,f,e,g){var d=this;this.getSchedule=function(){return c.getSchedule()};this.getShowDesire=function(a){return c.getPreferences()[a]||0};this.setShowDesire=function(a,b){var d=c.getPreferences();0===b?delete d[a]:d[a]=b;c.setPreferences(d)};this.getDesiredShows=function(){return Object.keys(c.getPreferences()).filter(function(a){return 0<d.getShowDesire(a)})};this.add=function(a){var b=
c.getSchedule();-1===b.indexOf(a)&&(b.push(a),c.setSchedule(b));f.getPerformance(a).then(function(a){return f.getShow(a.show)}).then(function(a){d.removeMaybe(a.performance);return a.performances})};this.remove=function(a){this.removeMaybe(a);var b=c.getSchedule();b.remove(a);c.setSchedule(b)};this.addMaybe=function(a){this.remove(a);var b=c.getMaybes();-1===b.indexOf(a)&&(b.push(a),c.setMaybes(b))};this.removeMaybe=function(a){var b=c.getMaybes();b.remove(a);c.setMaybes(b)};this.getSortedSchedule=
function(){return f.getPerformances().then(function(a){return c.getSchedule().sort(function(b,c){return g.performance(a[b],a[c])})})};this.isUserAttendingPerformance=function(a){return-1<c.getSchedule().indexOf(a)};this.isUserMaybeAttendingPerformance=function(a){return-1<c.getMaybes().indexOf(a)};this.getPerformanceScheduleState=function(a){return this.isUserMaybeAttendingPerformance(a)?"maybe":this.isUserAttendingPerformance(a)?"yes":"no"};this.getPerformancesAttending=function(){return c.getSchedule()};
this.getShowsAttending=function(){return f.getPerformances().then(function(a){for(var b=[],c=d.getPerformancesAttending(),e=0;e<c.length;e++)b.push(a[c[e]].show);return b})};this.isUserAttendingShow=function(a){return f.getShow(a).then(function(a){for(var b=0;b<a.performances.length;b++)if(d.isUserAttendingPerformance(a.performances[b]))return!0;return!1})};this.canUserAttendPerformance=function(a){return f.getPerformance(a).then(function(a){return e.isUserAvailable(a.start,a.stop)})};this.canPerformanceBeAddedToSchedule=
function(a){return b.all({performances:f.getPerformances(),shows:f.getShows(),venueDistances:f.getVenueDistances()}).then(function(b){var d=b.performances,e=b.shows;b=b.venueDistances;for(var f=d[a],l=f.start,g=f.stop,h=c.getSchedule(),m=h.length;m--;){var v=d[h[m]],u=b[e[f.show].venue][e[v.show].venue];if(!(g<v.start-u||l>v.stop+u))return!1}return!0})};this.getPossiblePerformances=function(){return b.all([f.getPerformances(),f.getShows(),f.getVenueDistances()]).then(function(b){var d=b[0],f=b[1],
g=b[2],k=[],l=c.getSchedule(),h=0;angular.forEach(d,function(b,c){if(-1<l.indexOf(c)||!e.isUserAvailable(b.start,b.stop))return!0;var m=f[b.show];for(h=0;h<m.performances.length;h++)if(-1<l.indexOf(m.performances[h]))return!0;var p=b.start,n=b.stop;for(h=l.length;h--;){var r=d[l[h]],q=g[m.venue][f[r.show].venue]+a.minimumArriveBeforeShowTime;if(!(n<r.start-q||p>r.stop+q))return!0}k.push(c)});return k})}}]);
angular.module("fringeApp").service("UserData",["$q","debounce",function(b,a){var c=this,f={preferences:{},unavailability:[],schedule:[],maybe:[],settings:{scheduleMode:"full"}},e=function(a){return function(){return h[a]}},g=function(a){return function(b){h[a]=b;c.save()}},d=function(){},h=store.has("fringeData")?store.get("fringeData"):angular.copy(f);this.getPreferences=e("preferences");this.setPreferences=g("preferences");this.getUnavailability=e("unavailability");this.setUnavailability=g("unavailability");
this.getSchedule=e("schedule");this.setSchedule=g("schedule");this.getMaybes=e("maybe");this.setMaybes=g("maybe");this.getSettings=e("settings");this.setSettings=g("settings");this.reset=function(){store.set("fringeData",angular.copy(f));h=store.get("fringeData")};this.save=a(function(){var a=b.defer();d(a.promise);store.set("fringeData",h);setTimeout(a.resolve,2E3)},5E3);this["export"]=function(){return JSON.stringify(h)};this["import"]=function(a){a=JSON.parse(a);this.reset();angular.extend(h,a);
this.save()};this.onSave=function(a){d=a}}]);
angular.module("fringeApp").controller("CoreCtrl",["$rootScope","$scope","$route","$location","$timeout","$window","$q","Data","Menu","UserData","Error",function(b,a,c,f,e,g,d,h,m,n,q){f=h.getShows().then(function(){a.loaded=!0},function(){q.error("Unable to retrieve data from server","Please wait a moment and try again.")});n.onSave(function(b){e(function(){a.saving=!0});b.then(function(){e(function(){a.saving=!1})})});q.onError(function(b){a.error=b});a.menu=m;var k=d.defer();b.$on("$routeChangeSuccess",
function(){if(c.current.$$route){k.resolve();var b=c.current.$$route.originalPath.split("/");a.currentRoute="/"+b[1];g.scroll(0,0)}});d.all([f,k.promise]).then(function(){e(function(){a.loaded=!0},100)});void 0!==Blob&&void 0!==Worker&&void 0!==window.URL&&void 0!==window.URL.createObjectURL||q.error("Unsupported Browser","Your browser does not support Web Workers. Please use a modern browser like Google Chrome.")}]);
angular.module("fringeApp").component("about",{templateUrl:"app/about/about.html",controller:["$scope",function(b){}]});
angular.module("fringeApp").component("help",{templateUrl:"app/help/help.html",controller:["$scope","UserData","Data",function(b,a,c){b.userData=a["export"]();b["import"]=function(c){c.settings=angular.extend({scheduleMode:"smart",displaySchedulerStats:!0},c.settings||{});a["import"](JSON.stringify(c));b.userData=a["export"]()};b.testData={"New User":{settings:{scheduleMode:"full"}},"Preferences (all 1s)":{preferences:{1:1,2:1,4:1,5:1,6:1,7:1,8:1,9:1,10:1,11:1,12:1,13:1,14:1,15:1,16:1,17:1,18:1,19:1,
20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:1,28:1,29:1,30:1,31:1,32:1,33:1,34:1,35:1,36:1,37:1,38:1,39:1,40:1,41:1,42:1,43:1,44:1,45:1,46:1,47:1,48:1,49:1,50:1,51:1,52:1,53:1,54:1,55:1,56:1,57:1,58:1,59:1,60:1,61:1,62:1,63:1,64:1,65:1,66:1,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:1,75:1,76:1,77:1,78:1,79:1,80:1,81:1,82:1,83:1,84:1,85:1,86:1,87:1,88:1,89:1,90:1,91:1,92:1,93:1,94:1,95:1,96:1,97:1,98:1,99:1,100:1,101:1,102:1,103:1,104:1,105:1,106:1,107:1,108:1,109:1,110:1,111:1,112:1,113:1,114:1,115:1,116:1,
117:1,118:1,119:1,120:1,121:1,122:1,123:1,124:1,125:1,126:1,127:1,128:1,129:1,130:1,131:1,132:1,133:1,134:1,135:1,136:1,137:1,138:1,139:1,140:1,141:1,142:1,143:1,144:1,145:1,146:1,147:1,148:1,149:1,150:1,151:1,152:1,153:1,154:1,155:1,156:1,157:1,158:1,159:1,160:1,161:1,162:1,163:1,186:1},settings:{autoScheduleIntroComplete:!0}},Preferences:{preferences:{1:1,2:4,4:2,6:3,7:4,8:4,9:2,10:3,12:4,15:4,22:3,27:1,28:2,29:3,32:3,33:2,34:1,35:2,41:2,46:4,47:3,50:4,51:3,54:3,63:2,68:2,70:3,71:1,72:1,73:4,74:4,
77:2,80:1,82:2,83:3,84:4,86:4,87:3,90:4,98:1,99:3,100:2,102:2,103:3,104:2,105:3,106:4,107:1,111:2,112:4,114:2,117:4,119:4,122:4,123:1,126:3,127:2,128:4,129:3,130:4,131:3,138:3,140:1,142:1,146:2,149:1,151:1,153:2,155:4,159:1,186:4},settings:{autoScheduleIntroComplete:!0}},Availability:{},Schedule:{schedule:"715 549 515 817 923 531 451 932".split(" "),settings:{autoScheduleIntroComplete:!0}},"Preferences and Schedule":{preferences:{1:1,2:4,4:2,6:3,7:4,8:4,9:2,10:3,12:4,15:4,22:3,27:1,28:2,29:3,32:3,
33:2,34:1,35:2,41:2,46:4,47:3,50:4,51:3,54:3,63:2,68:2,70:3,71:1,72:1,73:4,74:4,77:2,80:1,82:2,83:3,84:4,86:4,87:3,90:4,98:1,99:3,100:2,102:2,103:3,104:2,105:3,106:4,107:1,111:2,112:4,114:2,117:4,119:4,122:4,123:1,126:3,127:2,128:4,129:3,130:4,131:3,138:3,140:1,142:1,146:2,149:1,151:1,153:2,155:4,159:1,186:4},schedule:"715 549 515 817 923 531 451 932".split(" "),settings:{autoScheduleIntroComplete:!0}},"Preferences and Schedule (Full)":{preferences:{1:1,2:4,4:2,6:3,7:4,8:4,9:2,10:3,12:4,15:4,22:3,
27:1,28:2,29:3,32:3,33:2,34:1,35:2,41:2,46:4,47:3,50:4,51:3,54:3,63:2,68:2,70:3,71:1,72:1,73:4,74:4,77:2,80:1,82:2,83:3,84:4,86:4,87:3,90:4,98:1,99:3,100:2,102:2,103:3,104:2,105:3,106:4,107:1,111:2,112:4,114:2,117:4,119:4,122:4,123:1,126:3,127:2,128:4,129:3,130:4,131:3,138:3,140:1,142:1,146:2,149:1,151:1,153:2,155:4,159:1,186:4},schedule:"1 2 3 55 187 211 245 291 438 465 549 594 705 745 811 419 795 265 883 378 901 824 817 31 260 489 898 639 727 756 664 113 808 534 916 183 43 501 156 657 19 195 923 508 74 683 785 515 852 864 875 778 288 715 40 635 678 672 235 927 316 165 531 28 653 430 145 412 330 437 805 451 932".split(" "),
settings:{autoScheduleIntroComplete:!0}}}}]});
angular.module("fringeApp").component("myFringe",{templateUrl:"app/myFringe/myFringe.html",controller:["$scope","$location","Schedule","UserData","Configuration","Plurals",function(b,a,c,f,e,g){b.plurals=g;b.tabs={activeTab:"My Schedule"};"/my-fringe/availability"===a.path()?b.tabs.activeTab="My Availability":"/my-fringe/auto-scheduler"===a.path()&&(b.tabs.activeTab="Auto-Scheduler");b.statuses=e.fringeLevels;b.userData={schedule:f.getSchedule()};b.$watch("userData.schedule",function(){b.goingCount=
c.getPerformancesAttending().length;b.level=0;b.nextLevelCount=0;for(var a=b.nextLevelRemaining=0;a<b.statuses.length;a++)b.maxLevel=b.statuses[a].min,b.goingCount>=b.statuses[a].min&&(b.level=b.maxLevel,b.status=a,void 0!==b.statuses[a+1]&&(b.nextLevelCount=b.goingCount-b.statuses[a].min,b.nextLevelRemaining=Math.max(0,b.statuses[a+1].min-b.level-b.nextLevelCount)))});b.$watch("tabs.activeTab",function(){"My Schedule"===b.tabs.activeTab?a.updatePath("/my-fringe"):"My Availability"===b.tabs.activeTab?
a.updatePath("/my-fringe/availability"):"Auto-Scheduler"===b.tabs.activeTab&&a.updatePath("/my-fringe/auto-scheduler")})}]});
angular.module("fringeApp").component("myFringeAvailability",{templateUrl:"app/myFringe/availability/availability.html",controller:["$scope","$uibModal","$timeout","$q","Data","Schedule","Availability","Configuration",function(b,a,c,f,e,g,d,h){var m;b.moment=moment;b.slotSize=h.slotSize;b.availability={};var n=function(){var a=g.getSchedule();b.slotPerformances={};angular.forEach(b.availabilitySlots,function(c){angular.forEach(c,function(c){b.slotPerformances[c]=[];for(var d=0;d<a.length;d++){var e=
a[d],f=m[e];f.stop<=c||f.start>=c+h.slotSize||b.slotPerformances[c].push(e)}})})};c(function(){f.all([e.getPerformances(),e.getAvailabilitySlots(),e.getAvailabilitySlotsAll()]).then(function(a){m=a[0];b.availabilitySlots=a[1];b.availabilitySlotsAll=a[2];angular.forEach(b.availabilitySlots,function(a){angular.forEach(a,function(a){b.availability[a]=d.isSlotAvailable(a)})});n()})});b.toggleAvailability=function(a){b.availability[a]?d.setSlotUnavailable(a):d.setSlotAvaialble(a);b.availability[a]=!b.availability[a]};
var q;b.dragStart=function(a){b.toggleAvailability(a);q=b.availability[a];b.dragging=!0};b.dragStop=function(){b.dragging=!1};b.dragOver=function(a){b.dragging&&b.availability[a]!==q&&b.toggleAvailability(a)};b.showPerformances=function(c,d,e){a.open({templateUrl:"app/myFringe/availability/slotPerformancesModal/slotPerformancesModal.html",controller:"slotPerformancesModalCtrl",size:"lg",scope:b,resolve:{slotStart:function(){return c},slotStop:function(){return d},slotPerformances:function(){return e}}})}}]});
angular.module("fringeApp").controller("slotPerformancesModalCtrl",["$uibModalInstance","$scope","Data","Schedule","Sorters","slotStart","slotStop","slotPerformances",function(b,a,c,f,e,g,d,h){a.slotStart=g;a.slotStop=d;c.getShows().then(function(b){a.shows=b});c.getPerformances().then(function(b){a.performances=b;a.slotPerformances=h.sort(function(a,c){return e.performance(b[a],b[c])})});c.getVenues().then(function(b){a.venues=b});a.ok=function(){b.close()};a.remove=function(b){f.remove(b);a.slotPerformances.remove(b);
0===a.slotPerformances.length&&a.ok()}}]);
angular.module("fringeApp").component("myFringeAutoScheduler",{templateUrl:"app/myFringe/autoScheduler/autoScheduler.html",controller:["$scope","$q","$timeout","$uibModal","$location","Data","Schedule","UserData","Availability","Configuration","Plurals",function(b,a,c,f,e,g,d,h,m,n,q){b.plurals=q;b.moment=moment;b.interestText=n.interestText;b.instantAddScreenCount=0;var k=!1,l=function(){var c=d.getDesiredShows(),f=d.getSchedule();c.length?(b.progressByDesireMax={4:0,3:0,2:0,1:0},b.progressByDesire=
{4:0,3:0,2:0,1:0},c.map(function(a){b.progressByDesireMax[d.getShowDesire(a)]++}),a.all([g.getPerformances(),g.getShows(),g.getVenues(),g.getVenueDistances(),d.getPossiblePerformances(),d.getShowsAttending()]).then(function(a){var g=a[0],l=a[1],h=a[2],p=a[3],r=a[4];a=a[5];var q=c.diff(a);f.map(function(a){b.progressByDesire[d.getShowDesire(g[a].show)]++});b.availablePerformanceCount=0;angular.forEach(g,function(a){m.isUserAvailable(a.start,a.stop)&&b.availablePerformanceCount++});b.possiblePerformanceCount=
r.length;b.allDesiredShowsOnSchedule=0===q.length;if(!r.length)return k&&e.path("/my-fringe"),"schedule-full";if(0===q.length)return k&&e.path("/my-fringe"),"schedule-complete";var t=r.filter(function(a){return-1<c.indexOf(g[a].show)});if(!t.length)return k&&e.path("/my-fringe"),"no-possible-desired";var v=t.filter(function(a){var b=g[a],c=b.start,d=b.stop;b=l[b.show].venue;for(var e=0;e<t.length;e++){var f=t[e];if(a!==f){f=g[f];var k=p[b][l[f.show].venue]+n.minimumArriveBeforeShowTime;if(!(d<f.start-
k||c>f.stop+k))return!1}}return!0}).map(function(a){return{id:a,performance:g[a],showId:g[a].show,show:l[g[a].show],venueId:l[g[a].show].venue,venue:h[l[g[a].show].venue]}});v=v.filter(function(a){for(var b=0;b<v.length;b++)if(v[b].id!==a.id&&v[b].showId===a.showId)return!1;return!0});b.instantAddScreenCount++;if(v.length)return b.instantAddPerformances=v,"instant-add";b.showsOnScheduleCount=a.length;if(k)return"done";b.generate();return"generator"}).then(function(a){b.screen=a})):b.screen="no-interests"};
b.getProgressType=function(a,b){return a===b?"success":a<b/2?"danger":"warning"};b.addInstantAdd=function(){angular.forEach(b.instantAddPerformances,function(a){d.add(a.id)});p()};b.generate=function(){f.open({templateUrl:"app/myFringe/autoScheduler/autoSchedulerModal/autoSchedulerModal.html",controller:"AutoSchedulerModalCtrl",size:"lg",backdrop:"static",keyboard:!1}).result.then(function(){k=!0;p()},function(){b.screen="done"})};var p=function(){b.screen="";c(l,500)};h.getSettings().autoScheduleIntroComplete?
p():(b.screen="intro",b.completeIntro=function(){var a=h.getSettings();a.autoScheduleIntroComplete=!0;h.setSettings(a);p()})}]});
angular.module("fringeApp").controller("AutoSchedulerModalCtrl",["$uibModalInstance","$q","$scope","$timeout","Configuration","Data","Schedule","UserData","generatorFactory","Plurals",function(b,a,c,f,e,g,d,h,m,n){var q,k,l;c.moment=moment;c.plurals=n;c.infoMessages=e.generatorMessages;c.isUserAttendingPerformance=d.isUserAttendingPerformance;c.userData={settings:h.getSettings(),preferences:h.getPreferences()};c.$watch("userData.settings",function(){h.setSettings(c.userData.settings)});a.all([d.getPossiblePerformances(),
d.getShowsAttending(),g.getShows(),g.getPerformances(),g.getVenueDistances(),g.getSortedShows(),g.getSortedPerformances(),g.getVenues()]).then(function(a){var b=a[0],f=a[1];c.shows=a[2];c.performances=a[3];c.distances=a[4];l=a[5];c.sortedPerformances=a[6];c.venues=a[7];c.generationCount=Math.max(500,Math.min(1E3,2*b.length));c.populationSize=Math.floor(Math.max(500,Math.min(2E4,Math.pow(b.length,1.05))));c.crossoverRate=.9;c.mutationRate=.2;c.desireFitnessPoints=[0,3,7,15,31];c.arrivalThreshold=e.minimumArriveBeforeShowTime;
q={iterations:c.generationCount,size:c.populationSize,crossover:c.crossoverRate,mutation:c.mutationRate,skip:5,maxResults:1};k={shows:{},showIds:[],performances:{},venueDistances:c.distances,desireToFitnessMap:c.desireFitnessPoints,extraPointsForAdjacentVenues:1,extraPointsForTimeOff:1,timeOffThreshold:7200,adjacentVenueThreshold:600,extraPointsForEmptyDays:1,idealFitness:0,iterations:c.generationCount,populationSize:c.populationSize,arrivalThreshold:c.arrivalThreshold};c.progressByDesireMax={1:0,
2:0,3:0,4:0};c.progressByDesireBase={1:0,2:0,3:0,4:0};angular.forEach(c.shows,function(a,e){var g=d.getShowDesire(e),l=a.performances.filter(function(a){return-1<b.indexOf(a)});-1<f.indexOf(e)&&(c.progressByDesireMax[g]++,c.progressByDesireBase[g]++);if(0===g||0===l.length||-1<f.indexOf(e))return!0;c.progressByDesireMax[g]++;k.showIds.push(e);k.shows[e]={name:a.name,desire:g,venue:a.venue,performances:[]};k.idealFitness+=k.desireToFitnessMap[g];angular.forEach(l,function(b){var d=c.performances[b];
k.performances[b]={start:d.start,stop:d.stop,show:e,offsetTimes:{}};k.shows[e].performances.push(b);angular.forEach(c.distances,function(e,f){k.performances[b].offsetTimes[f]={start:d.start-e[a.venue]-c.arrivalThreshold,stop:d.stop+e[a.venue]+c.arrivalThreshold}})});k.shows[e].performances=k.shows[e].performances.shuffle()});k.showIds=k.showIds.shuffle();c.idealFitness=k.idealFitness;console.log("Generator Config: ",k);c.start()});var p=function(a,b){c.proposed=[];c.unscheduled=[];c.accept={};for(var e=
{4:[],3:[],2:[],1:[]},f=a.length;f--;){c.accept[a[f]]=!1;var g=k.performances[a[f]].show;-1===b.indexOf(g)&&(c.proposed.push(a[f]),e[d.getShowDesire(g)].push(a[f]))}for(f=0;f<l.length;f++)-1<b.indexOf(l[f])&&c.unscheduled.push(l[f]);for(f=4;0<f;f--)for(g=0;g<e[f].length;g++)c.accept[e[f][g]]=!0},r,t,v=function(){c.currentMessage=0;var a=!0,b=function(){a&&(c.currentMessage=++c.currentMessage%e.generatorMessages.length,f(b,1E4))};f(b,1E4);return function(){a=!1}},u=function(){var a=Date.now(),b=0,
d=[];r=m.create();r.notification=function(e,g,k,l){var h=this.fitness(e.entity,!0);c.bestFitness=k.maximum;c.bestExtraPoints=h.extraPoints;c.worstFitness=k.minimum;c.currentGeneration=g;c.progressByDesire=h.groups;c.progressByDesire={1:h.groups[1]+c.progressByDesireBase[1],2:h.groups[2]+c.progressByDesireBase[2],3:h.groups[3]+c.progressByDesireBase[3],4:h.groups[4]+c.progressByDesireBase[4]};l?(c.progress=this.userData.idealFitness,c.done=!0,f(function(){p(e.entity,h.conflicts)},500),t()):(c.progress=
Math.max(e.fitness-h.extraPoints,this.userData.idealFitness)/2,c.progress+=this.userData.idealFitness/2/this.userData.iterations*g,c.bestSchedule=e.entity,c.bestConflicts=h.conflicts,0<g&&(d.push((Date.now()-a)/(g-b)),5<d.length&&d.shift(),c.timeRemaining=d.reduce(function(a,b){return a+b})/d.length*(c.generationCount-g)),a=Date.now(),b=g);c.$apply()};f(function(){r.evolve(q,k);t=v()},100);return r};c.getProgressType=function(a,b){return a===b?"success":a<b/2?"danger":"warning"};c.start=function(){c.progress=
0;c.currentGeneration=0;c.progressByDesire={1:0,2:0,3:0,4:0};c.proposed=void 0;c.accept={};c.bestFitness=0;c.bestExtraPoints=0;c.worstFitness=0;c.done=!1;c.currentMessage=0;f(u,500)};c.stop=function(){t();r.stop();c.progress=c.idealFitness;f(function(){p(c.bestSchedule,c.bestConflicts)},1E3)};c.restart=function(){t();r.stop();c.start()};c.save=function(){angular.forEach(c.accept,function(a,b){!0===a&&d.add(b)});b.close()};c.close=function(){b.dismiss()}}]);
angular.module("fringeApp").factory("generatorFactory",function(){return{create:function(){var b=Genetic.create();b.optimize=Genetic.Optimize.Maximize;b.seed=function(){for(var a=[],b=this.userData.showIds.length;b--;){var f=this.userData.shows[this.userData.showIds[b]].performances;a.push(f[Math.floor(Math.random()*f.length)])}return a};b.mutate=function(a){for(var b=a.length,f=2;b--;){var e=Math.floor(Math.random()*a.length),g=this.userData.shows[this.userData.performances[a[e]].show].performances;
if(1<g.length&&(a[e]=g[Math.floor(Math.random()*g.length)],f--,0===f))break}return a};b.crossover=function(a,b){var c=a.length,e=Math.floor(Math.random()*c);c=Math.floor(Math.random()*c);if(e>c){var g=c;c=e;e=g}return[a.slice(0,e).concat(b.slice(e,c)).concat(a.slice(c)),b.slice(0,e).concat(a.slice(e,c)).concat(b.slice(c))]};b.fitness=function(a,b){var c=this,e=a.length,g=e,d=0,h=0,m=!1,n=0,q=[[],[],[],[],[]],k=[],l=0,p=a.slice().sort(function(a,b){var d=c.userData.performances[a],e=c.userData.performances[b];
return e.start-d.start||e.stop-d.stop}),r=[0,0,0,0,0],t=this.userData.performances,v=this.userData.shows;a:for(;e--;){var u=t[p[e]];var w=v[u.show];m=!1;h=d=0;var x=w.desire;for(d=1;d<g;d++){h=e-d;if(void 0===p[h])break;h=t[p[h]];var A=v[h.show];if(x<=A.desire&&h.start<u.offsetTimes[A.venue].stop){q[w.desire].push(u.show);k.push(u.show);m=!0;continue a}else if(h.start>u.stop+3E3)break}for(d=1;d<g;d++){h=e+d;if(void 0===p[h])break;h=t[p[h]];A=v[h.show];if(x<=A.desire&&h.stop>u.offsetTimes[A.venue].start){q[w.desire].push(u.show);
k.push(u.show);m=!0;continue a}else if(h.stop<u.start-3E3)break}m||(n+=this.userData.desireToFitnessMap[x],r[x]++)}p=p.filter(function(a){return-1===k.indexOf(t[a].show)});for(e=p.length-1;e--;)u=t[p[e]],h=t[p[e+1]],this.userData.adjacentVenueThreshold>this.userData.venueDistances[v[u.show].venue][v[h.show].venue]&&(l+=this.userData.extraPointsForAdjacentVenues),l+=Math.floor((u.start-h.stop)/this.userData.timeOffThreshold)*this.userData.extraPointsForTimeOff;n+=l;return b?{fitness:n,groups:r,extraPoints:l,
conflicts:k}:n};b.generation=function b(a,b){return void 0===this.userData.genState||this.userData.genState.lastFitness<a[0].fitness?(this.userData.genState={lastFitness:a[0].fitness,sinceGeneration:b},!0):100>=b-this.userData.genState.sinceGeneration};return b}}});
angular.module("fringeApp").component("myFringeSchedule",{templateUrl:"app/myFringe/schedule/schedule.html",controller:["$scope","$q","Schedule","Data",function(b,a,c,f){var e,g,d,h;b.moment=moment;b.refresh=function(){b.amazingSchedule={};var a;b.hasPreferences=0<c.getDesiredShows().length;b.hasSchedule=0<c.getSchedule().length;c.getSortedSchedule().then(function(c){angular.forEach(c,function(c){var f=g[c],l=moment(f.start,"X").startOf("day").format("X");void 0===b.amazingSchedule[l]&&(a=void 0,
b.amazingSchedule[l]=[]);if(a){var p=e[f.show].venue,m=15>h[e[a.show].venue][p]/60?"Walk":"Travel";3600<f.start-a.stop?(p=moment(a.stop,"X").hour(),p=15<p&&19>p?"Dinner time!":10<p&&14>p?"Lunch time!":["Snack time!","Drinks on the Great Green Lawn of Fabulousness!","Eat some cheese curds.","See what's happening in the ourdoor tent."].randomElement(),b.amazingSchedule[l].push({as:"break",text:p})):b.amazingSchedule[l].push({as:"travel",text:m+" to "+d[p].name})}b.amazingSchedule[l].push({as:"performance",
id:c,start:f.start,stop:f.stop,show:f.show});a=f})})};b.removeFromSchedule=function(a){c.remove(a);b.refresh()};a.all([f.getShows(),f.getPerformances(),f.getVenues(),f.getVenueDistances()]).then(function(a){b.shows=e=a[0];g=a[1];b.venues=d=a[2];h=a[3]}).then(b.refresh)}]});
angular.module("fringeApp").component("fringeMap",{templateUrl:"app/map/map.html",controller:["$scope","$routeParams","NgMap","$window","$timeout","$q","debounce","Data","MapConfig",function(b,a,c,f,e,g,d,h,m){b.lawnPolygon=m.lawnPolygon;b.isGroupVisible={};h.getVenueHosts().then(function(a){b.venueHosts=a});h.getVenues().then(function(d){b.markerGroups=m.markerGroups.slice(0);b.views=m.views.slice(0);b.venueViews={};var e=Object.keys(d).map(function(a){var b=d[a];return{byov:b.byov,position:b.mapPos,
title:b.name,icon:b.mapIcon,venue:a,host:b.host}});b.markerGroups[0].markers=e.filter(function(a){return a.byov});b.markerGroups[1].markers=e.filter(function(a){return!a.byov});c.getMap().then(function(){if(a.venue){var e=d[a.venue].mapPos;angular.forEach(b.markerGroups,function(a){b.isGroupVisible[a.id]=!0});c.getMap().then(function(a){a.setCenter(new google.maps.LatLng(e[0],e[1]));a.setZoom(21)})}else if(a.host){var f=[];angular.forEach(b.markerGroups,function(c){b.isGroupVisible[c.id]=!0;angular.forEach(c.markers,
function(b){b.host===a.host&&f.push(b.position)})});n(f,19)}else b.gotoView(b.views[m.initialView]);b.mapLoaded=!0})});b.toggleGroup=function(a){b.isGroupVisible[a]=!b.isGroupVisible[a]};var n=function(a,b){for(var d=new google.maps.LatLngBounds,e=0;e<a.length;e++)d.extend(new google.maps.LatLng(a[e][0],a[e][1]));k();c.getMap().then(function(a){a.setCenter(d.getCenter());a.fitBounds(d);a.getZoom()>b&&a.setZoom(b)})};b.gotoView=function(a){var d=[];angular.forEach(b.markerGroups,function(c){b.isGroupVisible[c.id]=
!1;if(!0===a.markerGroups||-1<a.markerGroups.indexOf(c.id))b.isGroupVisible[c.id]=!0,angular.forEach(c.markers,function(b){if(("venues"===c.id||"byov"===c.id)&&a.venueHosts&&-1===a.venueHosts.indexOf(b.venueHost))return!0;d.push(b.position)})});a.center&&a.zoom?c.getMap().then(function(b){b.setCenter(new google.maps.LatLng(a.center[0],a.center[1]));b.setZoom(a.zoom)}):n(d)};var q=function(){b.innerHeight=f.innerHeight;e(function(){c.getMap().then(function(a){google.maps.event.trigger(a,"resize")})})};
angular.element(f).on("resize",d(function(){b.$apply(q)},100));q();var k=function(){b.markerWindow&&c.getMap().then(function(a){a.hideInfoWindow("marker-info");b.markerWindow=void 0})};b.markerClick=function(a,d,e,f){k();c.getMap().then(function(a){b.markerWindow={title:d.title,location:d.location||d.host&&b.venueHosts[d.host].name,address:d.address||d.host&&b.venueHosts[d.host].address,venue:"venues"===e||"byov"===e?d.venue:!1,id:e+"-"+f,notes:d.notes};a.setCenter(new google.maps.LatLng(d.position[0],
d.position[1]));a.showInfoWindow("marker-info",b.markerWindow.id)})}}]});
angular.module("fringeApp").component("schedule",{templateUrl:"app/schedule/schedule.html",controller:["$scope","$q","$timeout","$window","UserData","Data","Schedule","Availability","Plurals","debounce",function(b,a,c,f,e,g,d,h,m,n){b.moment=moment;b.plurals=m;b.settings={scheduleMode:e.getSettings().scheduleMode};b.preferences=e.getPreferences();var q,k=function(){q&&a.all([d.getPossiblePerformances(),d.getShowsAttending()]).then(function(a){var c=a[0],e=a[1],f=d.getSchedule();b.schedule=q.filter(function(a){var c=
b.days[b.currentDay-1];return"smart"===b.settings.scheduleMode&&1>d.getShowDesire(a.showId)?!1:!(a.performance.start<c||a.performance.start>c+86400)}).map(function(a){a.isAttending=-1<f.indexOf(a.id);a.canAttend=h.isUserAvailable(a.performance.start,a.performance.stop);a.canBeScheduled=-1<c.indexOf(a.id);a.attendState=d.getPerformanceScheduleState(a.id);return a}).filter(function(a){return"full"===b.settings.scheduleMode||"yes"===a.attendState?!0:a.canBeScheduled&&-1===e.indexOf(a.showId)})})};c(function(){a.all([g.getAvailabilitySlots(),
g.getSortedPerformances(),g.getPerformances(),g.getShows(),g.getVenues(),g.getRatings()]).then(function(a){b.days=Object.keys(a[0]).map(function(a){return+a});b.currentDay=b.days.indexOf(moment().startOf("day").unix())+1||1;var c=a[2],d=a[3],e=a[4],f=a[5];q=a[1].map(function(a){var b=c[a],g=d[b.show];return{id:a,performance:b,showId:b.show,show:g,venueId:g.venue,venue:e[g.venue],rating:f[g.rating],isAttending:!1,canAttend:!1,canBeScheduled:!1,attendState:"no"}});k()})});var l=function(){b.innerHeight=
f.innerHeight};angular.element(f).on("resize",n(function(){b.$apply(l)},100));l();b.$watch("settings",function(){var a=e.getSettings();a.scheduleMode=b.settings.scheduleMode;e.setSettings(a);k()},!0);b.$watch("userData.preferences",k,!0);b.setDay=function(a){b.currentDay=a;k();c(function(){f.scroll(0,196)})};b.addToSchedule=function(a){d.add(a);k()};b.removeFromSchedule=function(a){d.remove(a);k()};b.addMaybe=function(a){d.addMaybe(a);k()}}]});
angular.module("fringeApp").component("shows",{templateUrl:"app/shows/shows.html",controller:["$q","$scope","$window","$timeout","$filter","$routeParams","debounce","Data","UserData","Plurals","Schedule",function(b,a,c,f,e,g,d,h,m,n,q){a.moment=moment;a.plurals=n;a.allShowPerformances={};a.currentPage=1;a.perPage=10;a.isUserAttendingPerformance=q.isUserAttendingPerformance;a.userData={preferences:m.getPreferences()};a.otherOptions=[{value:"*",label:"All Shows"},{value:"interested",label:"Interested Only"},
{value:"attending",label:"Attending Only"}];b.all([h.getShows(),h.getVenues(),h.getRatings(),h.getPrices(),h.getSortedShows(),h.getPerformances()]).then(function(b){a.shows=b[0];a.venues=b[1];a.ratings=b[2];a.prices=b[3];a.sortedShows=b[4];a.performances=b[5];a.venueOptions=Object.keys(a.venues).map(function(b){return{value:b,label:a.venues[b].name}}).sort(function(a,b){return a.label.localeCompareSmart(b.label)});a.venueOptions.unshift({value:"*",label:"All Venues"});a.ratingOptions=a.ratings.map(function(a,
b){return{value:b,label:a}});a.ratingOptions.unshift({value:"*",label:"All Ratings"});a.priceOptions=a.prices.map(function(a){return{value:a,label:e("price")(a)}});a.priceOptions.unshift({value:"*",label:"All Prices"});void 0!==g.venue?a.selectedVenue=g.venue:void 0!==g.show&&(a.search=a.shows[g.show].name);a.buildData()});a.showAllPerformances=function(b){a.allShowPerformances[b]=!0};a.scroll=function(){f(function(){c.scroll(0,210)})};a.resetFilters=function(){a.selectedVenue="*";a.selectedRating=
"*";a.selectedPrice="*";a.selectedOther="*";a.search="";a.searchText=""};a.refresh=function(){a.buildData();a.scroll()};a.buildData=function(){q.getShowsAttending().then(function(b){a.searchText=a.search.toLowerCase().replace(/[^\s\d\w'!?"&-:,\(\)#]/g,"").trim()||"";var c=a.searchText.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),d=new RegExp("("+c+")(?![^<]*>|[^<>]*<\\/)","i");a.allShows=a.sortedShows.filter(function(c){var e=a.shows[c];if("*"!==a.selectedVenue&&e.venue!==a.selectedVenue||
"*"!==a.selectedRating&&e.rating!==a.selectedRating||"*"!==a.selectedPrice&&e.price!==a.selectedPrice||"interested"===a.selectedOther&&0===q.getShowDesire(c)||"attending"===a.selectedOther&&-1===b.indexOf(c))return!1;c=e.name+" "+e.description+" "+e.artist;c=c.replace(/&amp;/g,"&").replace(/&quot;/g,'"');return a.searchText&&!d.exec(c)?!1:!0})})};a.searchTextEntered=d(function(){a.$apply(a.buildData)},50);a.clearSearch=function(){a.search="";a.buildData()};a.$watch("userData.preferences",a.buildData,
!0);a.resetFilters()}]});
angular.module("fringeApp").component("venues",{templateUrl:"app/venues/venues.html",controller:["$q","$scope","Data",function(b,a,c){a.distanceCalc={from:0,to:void 0,driving:""};a.getHostVenues=function(b){return Object.keys(a.venues).filter(function(c){return a.venues[c].host===b}).sort(function(b,c){return a.venues[b].name.localeCompareSmart(a.venues[c].name)})};var f=function(){if(a.distanceCalc.from&&a.distanceCalc.to){var b=[a.venueHosts[a.venues[a.distanceCalc.from.value].host].driving,a.venueHosts[a.venues[a.distanceCalc.to.value].host].driving],
c=["assumed","recommended","possible"];a.distanceCalc.driving="";for(var d=0;d<c.length;d++)if(-1<b.indexOf(c[d])){a.distanceCalc.driving=c[d];break}}};a.$watch("distanceCalc.from",f);a.$watch("distanceCalc.to",f);b.all([c.getVenues(),c.getVenueHosts(),c.getVenueDistances()]).then(function(b){a.venues=b[0];a.venueHosts=b[1];a.distances=b[2];a.venueOptions=Object.keys(a.venues).map(function(b){return{value:b,label:a.venues[b].name}}).sort(function(a,b){return a.label.localeCompareSmart(b.label)});
for(a.distanceCalc.from=a.venueOptions.randomElement();void 0===a.distanceCalc.to||a.distanceCalc.to===a.distanceCalc.from;)a.distanceCalc.to=a.venueOptions.randomElement()})}]});
